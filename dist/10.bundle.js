(window.webpackJsonp=window.webpackJsonp||[]).push([[10,68],{242:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(3),l=n(245),c=n(20),p=n.n(c),u=n(6),f=n.n(u),d=n(24),h=n.n(d),m=n(9),y=n.n(m),g=n(182),b=n.n(g),v=n(183),w=n.n(v),S=n(184),O=n.n(S),C=n(40),P=n.n(C),E=n(34),j=n.n(E),x=n(12),k=n.n(x),N=n(42),_=n.n(N),T=n(26),A=n.n(T),I=n(557),R=n.n(I);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=B(t).call(this,e),n=!o||"object"!==L(o)&&"function"!=typeof o?G(r):o,W(G(G(n)),"nameByEndpointId",function(e){for(var t=0;t<n.props.devices.length;t++)if(n.props.devices[t].endpointId==e)return n.props.devices[t].friendlyName;console.log("Did not find device named",e,n.props.devices.length)}),W(G(G(n)),"endpointIdByName",function(e){for(var t=0;t<n.props.devices.length;t++)if(n.props.devices[t].friendlyName==e)return n.props.devices[t].endpointId;console.log("Did not find device named",e,n.props.devices.length)}),W(G(G(n)),"sceneLevelChange",function(e,t){var r=n.props.scene;r[e]={brightness:t},n.saveScene(r)}),W(G(G(n)),"saveScene",function(e){fetch("/save/logic/scene/"+n.props.name,{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(e)})}),W(G(G(n)),"brightnessIflightInScene",function(e){var t=n.endpointIdByName(e);return n.props.scene&&n.props.scene.hasOwnProperty(t)&&n.props.scene[t].hasOwnProperty("brightness")?n.props.scene[t].brightness:0}),n.state={expansionPanelOpen:!1,shortcutIds:["x","0","1","2","3"]},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.scene,a=t.name,i=t.edit,s=t.area,c=t.lights,u=t.shortcut,d=this.state.shortcutIds;return o.a.createElement(b.a,{elevation:0,expanded:this.state.expansionPanelOpen},o.a.createElement(w.a,{className:n.summary,expandIcon:o.a.createElement(j.a,{onClick:function(){e.setState({expansionPanelOpen:!e.state.expansionPanelOpen})}})},i?o.a.createElement(k.a,{onClick:function(){return e.props.deleteScene(a)}},o.a.createElement(A.a,null)):o.a.createElement(k.a,{className:this.props.shortcut==this.props.computedLevel.toString()?n.hotAvatar:n.avatar,onClick:function(){return e.props.runScene(a)}},"x"==this.props.shortcut?o.a.createElement(_.a,null):this.props.shortcut),o.a.createElement(P.a,{variant:"subtitle1",className:n.summaryLabel},a)),o.a.createElement(O.a,{className:n.sceneExpand},o.a.createElement(p.a,{className:n.sceneList},Object.keys(c).map(function(t){return o.a.createElement(l.default,{brightness:e.brightnessIflightInScene(t),key:"scene-line-"+t,levelsChange:e.sceneLevelChange,name:t,endpointId:e.endpointIdByName(t),scenename:a,scene:r,area:e.props.area})}),o.a.createElement(f.a,null,o.a.createElement(h.a,null,o.a.createElement(R.a,null)),d.map(function(t){return o.a.createElement(y.a,{onClick:function(){return e.props.setShortcut(s,a,t)},size:"small",key:t+"m",className:u==t?n.hotButton:n.button},t)})))))}}])&&D(n.prototype,r),a&&D(n,a),t}();M.propTypes={classes:i.a.object.isRequired},t.default=Object(s.withStyles)(function(e){return{sceneExpand:{padding:0,margin:0},sceneList:{width:"100%"},summary:{padding:"0 8",alignItems:"center"},summaryLabel:{alignSelf:"center",padding:"0 16"},avatar:{color:e.palette.primary.contrastText},hotAvatar:{color:e.palette.primary.contrastText,background:e.palette.primary.main},button:{minWidth:36},hotButton:{minWidth:36,"&:hover":{backgroundColor:e.palette.primary.light},backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText}}})(M)},244:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(3),l=n(37),c=n.n(l),p=n(24),u=n.n(p),f=n(52),d=n.n(f),h=n(41),m=n.n(h),y=n(40),g=n.n(y),b=n(43),v=n(258),w=n(240);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=C(t).call(this,e),n=!o||"object"!==S(o)&&"function"!=typeof o?E(r):o,j(E(E(n)),"handlePowerChange",function(e){e.target.checked?(n.setState({powerState:"ON",target:n.props.name}),n.props.sendAlexaCommand(n.props.name,n.props.device.endpointId,"PowerController","TurnOn")):(n.setState({powerState:"OFF",target:n.props.name}),n.props.sendAlexaCommand(n.props.name,n.props.device.endpointId,"PowerController","TurnOff"))}),j(E(E(n)),"handlePreBrightnessChange",function(e){n.setState({brightness:e,target:n.props.device.name})}),j(E(E(n)),"handleBrightnessChange",function(e){n.props.sendAlexaCommand(n.props.name,n.props.device.endpointId,"BrightnessController","SetBrightness",{brightness:e})}),j(E(E(n)),"handleClickOpen",function(){n.setState({open:!0})}),j(E(E(n)),"handleClose",function(){n.setState({open:!1})}),n.state={open:!1,powerState:"OFF",brightness:"no"},n.handleClose=n.handleClose.bind(E(E(n))),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,o.a.Component),n=t,a=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.deviceProperties,r={};return n.hasOwnProperty("powerState")&&(r.powerState=n.powerState),n.hasOwnProperty("brightness")&&(r.brightness=n.brightness),r}}],(r=[{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement(c.a,{className:t.tile,cols:1,rows:1},o.a.createElement(d.a,{className:t.sliderPaper,elevation:0},o.a.createElement(u.a,{className:"ON"==this.state.powerState?t.litAvatar:t.avatar,onClick:function(){return e.handleClickOpen()}},o.a.createElement(b.MdLightbulbOutline,{className:t.iconSize})),"no"==this.state.brightness?o.a.createElement(g.a,{variant:"subtitle1",className:t.nostack,gutterBottom:!0},this.props.name):o.a.createElement(w.default,{value:this.state.brightness,preChange:this.handlePreBrightnessChange,change:this.handleBrightnessChange,disabled:"OFF"==this.state.powerState,name:this.props.name,padLeft:!1,minWidth:240}),o.a.createElement(m.a,{color:"primary",className:t.lightSwitch,checked:"ON"==this.state.powerState,onChange:this.handlePowerChange}),o.a.createElement(v.default,{sendAlexaCommand:this.props.sendAlexaCommand,open:this.state.open,name:this.props.name,handleClose:this.handleClose,device:this.props.device,deviceProperties:this.props.deviceProperties,sendMessage:this.props.sendMessage})))}}])&&O(n.prototype,r),a&&O(n,a),t}();x.propTypes={classes:i.a.object.isRequired},t.default=Object(s.withStyles)(function(e){return{litAvatar:{color:e.palette.primary.main},iconSize:{height:24,width:24},stack:{height:44,display:"flex",flexGrow:1,paddingLeft:16,justifyContent:"space-between",flexWrap:"wrap"},stackLabel:{alignSelf:"center"},xsliderPaper:{display:"flex",flexDirection:"row",padding:"16 0 16 16",alignItems:"center",minWidth:320},stackSlider:{marginTop:4,marginLeft:4,marginRight:6},tile:{display:"flex",flexGrow:1,height:90,paddingRight:8},sliderPaper:{display:"flex",flexDirection:"row",padding:"16 8 16 16",alignItems:"center"},nostack:{height:44,display:"flex",flexGrow:1,justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",maxWidth:480,minWidth:240,boxSizing:"border-box",marginRight:8},lightSwitch:{marginLeft:8}}})(x)},245:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(3),l=n(43),c=n(6),p=n.n(c),u=n(24),f=n.n(u),d=n(240);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=y(t).call(this,e),n=!o||"object"!==h(o)&&"function"!=typeof o?b(r):o,v(b(b(n)),"handlePreLevelsChange",function(e){n.setState({brightness:e})}),v(b(b(n)),"handleLevelsChange",function(e){n.props.levelsChange(n.props.endpointId,n.state.brightness)}),n.state={brightness:0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,o.a.Component),n=t,a=[{key:"getDerivedStateFromProps",value:function(e,t){var n={};return e.brightness!==t.brightness&&(n.brightness=e.brightness),n}}],(r=[{key:"render",value:function(){var e=this.props,t=(e.classes,e.name),n=this.state.brightness;return o.a.createElement(p.a,null,o.a.createElement(f.a,null,o.a.createElement(l.MdLightbulbOutline,null)),o.a.createElement(d.default,{name:t,value:n,preChange:this.handlePreLevelsChange,change:this.handleLevelsChange}))}}])&&m(n.prototype,r),a&&m(n,a),t}();w.propTypes={classes:i.a.object.isRequired},t.default=Object(s.withStyles)(function(e){return{input:{width:50,margin:e.spacing.unit},stack:{height:44,display:"flex",flexDirection:"column",flexGrow:1,paddingLeft:16,paddingRight:16,justifyContent:"center"},sliderPaper:{display:"flex",flexDirection:"row",padding:"16 8 16 16",alignItems:"center",minWidth:320,maxWidth:480},stackSlider:{marginTop:4,marginLeft:4,marginRight:6}}})(w)},250:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(3),l=n(13),c=n.n(l),p=n(6),u=n.n(p),f=n(24),d=n.n(f),h=n(23),m=n.n(h),y=n(29),g=n.n(y),b=n(44),v=n.n(b);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var E=function(e){function t(e){var n,r,o,a,i,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=O(t).call(this,e),n=!o||"object"!==w(o)&&"function"!=typeof o?P(r):o,a=P(P(n)),s=function(e){n.setState({newRegionName:e.target.value})},(i="editNewRegionName")in a?Object.defineProperty(a,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[i]=s,n.state={newRegionName:""},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement(u.a,{className:t.listItem},o.a.createElement(d.a,null,o.a.createElement(g.a,null)),o.a.createElement(m.a,{className:t.areaInput,id:"required",label:"Area name",margin:"normal",value:this.state.newRegionName,onChange:function(t){return e.editNewRegionName(t)}}),o.a.createElement(c.a,{"aria-label":"Confirm",onClick:function(t){return e.props.add(e.state.newRegionName)}},o.a.createElement(v.a,null)))}}])&&S(n.prototype,r),a&&S(n,a),t}();E.propTypes={classes:i.a.object.isRequired},t.default=Object(s.withStyles)(function(e){return{listItem:{padding:16,width:"100%"},areaInput:{marginTop:0,marginLeft:16,flexGrow:1}}})(E)},251:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(3),l=n(9),c=n.n(l),p=n(32),u=n.n(p),f=n(28),d=n.n(f),h=n(20),m=n.n(h),y=n(246),g=n(247),b=n(248),v=n(249),w=n(38);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=C(t).call(this,e),n=!o||"object"!==S(o)&&"function"!=typeof o?E(r):o,j(E(E(n)),"deviceByName",function(e){for(var t=0;t<n.props.devices.length;t++)if(n.props.devices[t].friendlyName==e)return n.props.devices[t]}),j(E(E(n)),"sendGroupAlexaCommand",function(e,t,r,o,a){console.log("cm",r,n.props.controllermap);for(var i=0;i<n.props.controllermap[r].length;i++){var s=n.deviceByName(n.props.controllermap[r][i]);n.props.sendAlexaCommand(s.friendlyName,s.endpointId,r,o,a)}}),j(E(E(n)),"handleClickOpen",function(){n.setState({open:!0})}),j(E(E(n)),"handleClose",function(){n.setState({open:!1})}),n.state={brightness:50},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.open,r=e.name,a=e.color,i=e.brightness,s=e.colorTemperatureInKelvin,l=e.powerState;return o.a.createElement(w.default,{name:r,open:n,close:this.props.close,fullWidth:!0},o.a.createElement(u.a,{className:t.dialogContent},o.a.createElement(m.a,{className:t.list},o.a.createElement(y.default,{sendAlexaCommand:this.sendGroupAlexaCommand,name:r,endpointId:r,powerState:l}),o.a.createElement(g.default,{sendAlexaCommand:this.sendGroupAlexaCommand,name:r,endpointId:r,powerState:l,brightness:i}),o.a.createElement(b.default,{sendAlexaCommand:this.sendGroupAlexaCommand,name:r,endpointId:r,powerState:l,colorTemperatureInKelvin:s}),o.a.createElement(v.default,{sendAlexaCommand:this.sendGroupAlexaCommand,name:r,endpointId:r,color:a}))),o.a.createElement(d.a,null,o.a.createElement(c.a,{onClick:this.props.close,color:"primary",autoFocus:!0},"OK")))}}])&&O(n.prototype,r),a&&O(n,a),t}();x.propTypes={classes:i.a.object.isRequired},t.default=Object(s.withStyles)(function(e){return{root:{width:"100%",display:"flex",flexWrap:"wrap"}}})(x)},252:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(20),i=n.n(a),s=n(1),l=n.n(s),c=n(3),p=n(9),u=n.n(p),f=n(28),d=n.n(f),h=n(32),m=n.n(h),y=n(13),g=n.n(y),b=n(6),v=n.n(b),w=n(24),S=n.n(w),O=n(7),C=n.n(O),P=n(31),E=n.n(P),j=n(29),x=n.n(j),k=n(26),N=n.n(k),_=n(561),T=n.n(_),A=n(250);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=L(t).call(this,e),n=!o||"object"!==I(o)&&"function"!=typeof o?B(r):o,F(B(B(n)),"updateList",function(e,t){var r=n.state.regions;r[e].rooms=t,n.setState({regions:r})}),F(B(B(n)),"editNewRegionName",function(e){n.setState({newRegionName:e.target.value})}),F(B(B(n)),"handleAdd",function(e){if(n.props.done(),n.state.regions.hasOwnProperty(e))console.log("That region already exists");else{var t=n.state.regions;t[e]={areas:{},scenes:{}},n.setState({regions:t},function(){return n.addRegion(e,t[e])})}}),F(B(B(n)),"handleDelete",function(e){var t=n.state.regions;delete t[e],n.setState({regions:t},function(){return n.delRegion(e)})}),F(B(B(n)),"handleSelect",function(e){n.props.editMode||n.props.handleSelect(e)}),F(B(B(n)),"addRegion",function(e,t){fetch("/add/logic/region/"+e,{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return console.log(e)})}),F(B(B(n)),"delRegion",function(e){fetch("/del/logic/region/"+e,{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({})}).then(function(e){return console.log(e)})}),F(B(B(n)),"saveRegion",function(e,t){fetch("/save/logic/region/"+e,{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return console.log(e)})}),F(B(B(n)),"done",function(){n.setState({add:!1,edit:!1})}),n.state={edit:!1,add:!1,adding:!1,selectedName:"",selectedDevices:[],areamap:{},regions:{},roomBrowser:!1,objectBrowser:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;fetch("/list/logic/regions").then(function(e){return e.json()}).then(function(t){return e.setState({regions:t})})}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state,r=n.add,a=n.edit;return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,{className:t.dialogContent},o.a.createElement(i.a,{className:t.List},Object.keys(this.state.regions).sort().map(function(n){return o.a.createElement(v.a,{className:t.listItem,key:n+"-reg",onClick:function(){return e.props.selectRegion(n)}},o.a.createElement(S.a,null,o.a.createElement(T.a,null)),o.a.createElement(C.a,{primary:n,secondary:Object.keys(e.state.regions[n].areas).length+" rooms"}),e.state.edit?o.a.createElement(E.a,null,o.a.createElement(g.a,{onClick:function(){return e.handleDelete(n)}},o.a.createElement(N.a,null)),o.a.createElement(g.a,{onClick:function(){return e.props.handleRegionEdit(n)}},o.a.createElement(x.a,null))):null)}),r?o.a.createElement(A.default,{add:this.handleAdd}):null)),o.a.createElement(d.a,{className:t.dialogActions},a||r?o.a.createElement(o.a.Fragment,null,r?o.a.createElement(u.a,{onClick:function(t){return e.done()},color:"primary",autoFocus:!0},"CANCEL"):o.a.createElement(u.a,{onClick:function(t){return e.done()},color:"primary",autoFocus:!0},"DONE")):o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{onClick:function(t){return e.setState({add:!0})},color:"primary",autoFocus:!0},"ADD"),o.a.createElement(u.a,{onClick:function(t){return e.setState({edit:!0})},color:"primary",autoFocus:!0},"EDIT"),o.a.createElement(u.a,{onClick:function(t){return e.props.close()},color:"primary",autoFocus:!0},"OK"))))}}])&&R(n.prototype,r),a&&R(n,a),t}();G.propTypes={classes:l.a.object.isRequired},t.default=Object(c.withStyles)(function(e){return{content:{minWidth:0,padding:"0 !important",flexGrow:1,display:"flex",alignItems:"center"},list:{minWidth:320,width:"100%"},tabTitle:{backgroundColor:e.palette.primary[700],padding:0,paddingTop:"env(safe-area-inset-top)",display:"flex",alignItems:"center",justifyContent:"space-around"},dialogTitle:{display:"flex",alignItems:"center",justifyContent:"center",flexGrow:1,color:e.palette.primary.contrastText},dialogActions:{paddingBottom:"env(safe-area-inset-bottom)"},listItem:{padding:16,width:"100%"},dialogContent:{padding:0},sceneExpand:{padding:"0",marginBottom:2},areaInput:{marginTop:0,marginLeft:16}}})(G)},253:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(41),i=n.n(a),s=n(1),l=n.n(s),c=n(3),p=n(240),u=n(12),f=n.n(u),d=n(52),h=n.n(d),m=n(543),y=n.n(m),g=(n(558),n(251));function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=w(t).call(this,e),n=!o||"object"!==b(o)&&"function"!=typeof o?O(r):o,C(O(O(n)),"handlePowerChange",function(e){n.setState({powerState:e.target.checked});for(var t=0;t<n.props.devices.length;t++)e.target.checked?n.props.sendAlexaCommand(n.props.devices[t].friendlyNamee,n.props.devices[t].endpointId,"PowerController","TurnOn"):n.props.sendAlexaCommand(n.props.devices[t].friendlyNamee,n.props.devices[t].endpointId,"PowerController","TurnOff")}),C(O(O(n)),"handlePreBrightnessChange",function(e){n.setState({brightness:e,target:n.props.friendlyName})}),C(O(O(n)),"handleBrightnessChange",function(e){for(var t=0;t<n.props.devices.length;t++)n.props.deviceProperties[n.props.devices[t].friendlyName].hasOwnProperty("brightness")&&n.props.sendAlexaCommand(n.props.devices[t].friendlyNamee,n.props.devices[t].endpointId,"BrightnessController","SetBrightness",{brightness:e})}),C(O(O(n)),"handleClickOpen",function(){n.setState({open:!0})}),C(O(O(n)),"handleClose",function(){n.setState({open:!1})}),n.state={brightness:50,powerState:!1,colorTemperatureInKelvin:4e3,color:{hue:200,saturation:1,brightness:1},target:null,open:!1,endpointId:"",lastmessage:"",controllermap:[],areaState:{}},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e={ColorController:[],ColorTemperatureController:[],BrightnessController:[],PowerController:[]};for(var t in this.props.devices)if(this.props.devices[t].hasOwnProperty("displayCategories"))switch(this.props.devices[t].displayCategories[0]){case"LIGHT":for(var n=0;n<this.props.devices[t].capabilities.length;n++)e.hasOwnProperty(this.props.devices[t].capabilities[n].interface.split(".")[1])&&e[this.props.devices[t].capabilities[n].interface.split(".")[1]].push(this.props.devices[t].friendlyName)}this.setState({controllermap:e})}},{key:"avgState",value:function(e){if("on"==e){for(var t in this.props.deviceProperties)if(this.props.deviceProperties[t].hasOwnProperty("powerState")&&"ON"==this.props.deviceProperties[t].powerState)return!0;return!1}if("brightness"==e){var n=0,r=0;for(var t in this.props.deviceProperties)this.props.deviceProperties[t].hasOwnProperty("brightness")&&(n+=1,"ON"==this.props.deviceProperties[t].powerState&&(r+=this.props.deviceProperties[t].brightness));return 0==n?0:r/n}if("temperature"==e){var o=0,a=0;for(var t in this.props.deviceProperties)this.props.deviceProperties[t].hasOwnProperty("colorTemperatureInKelvin")&&(o+=1,"ON"==this.props.deviceProperties[t].powerState&&(a+=this.props.deviceProperties[t].colorTemperatureInKelvin));return 0==o?0:a/o}return 0}},{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement(h.a,{className:t.sliderPaper,elevation:0},o.a.createElement(f.a,{className:this.avgState("on")?t.litAvatar:t.avatar,onClick:function(){return e.handleClickOpen()}},o.a.createElement(y.a,null)),o.a.createElement(p.default,{name:this.props.name+" Lights",min:0,max:100,step:1,value:this.avgState("brightness"),preChange:this.handlePreBrightnessChange,change:this.handleBrightnessChange,disabled:!(this.avgState("on")||"no"==this.brightness),padLeft:!0}),o.a.createElement(i.a,{color:"primary",checked:this.avgState("on"),onChange:this.handlePowerChange}),o.a.createElement(g.default,{powerState:this.avgState("on"),brightness:this.avgState("brightness"),open:this.state.open,close:this.handleClose,color:this.avgState("color"),colorTemperatureInKelvin:this.avgState("colorTemperatureInKelvin"),controllermap:this.state.controllermap,devices:this.props.devices,sendAlexaCommand:this.props.sendAlexaCommand}))}}])&&v(n.prototype,r),a&&v(n,a),t}();P.propTypes={classes:l.a.object.isRequired},t.default=Object(c.withStyles)(function(e){return{root:{width:"100%",display:"flex",flexWrap:"wrap"},expansionList:{paddingLeft:4,paddingRight:4},halves:{width:"40%"},halfSlider:{width:"40%",paddingLeft:16,paddingRight:16,display:"flex",flex:1},chip:{background:"silver",color:"black",margin:e.spacing.unit},hotchip:{background:"orangeRed",color:"white",margin:e.spacing.unit},stackedLightControl:{width:"100%",paddingLeft:16,paddingRight:16},nameAndSwitch:{display:"flex",paddingRight:0,paddingLeft:10,alignItems:"center"},deviceName:{flex:1},listItemLabel:{paddingBottom:0},grouplight:{width:"100%",display:"flex",flexGrow:1,maxWidth:480,minWidth:320},litAvatar:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main},stack:{height:44,display:"flex",flexDirection:"column",flexGrow:1,paddingLeft:16,paddingRight:16,justifyContent:"center"},sliderPaper:{display:"flex",flexDirection:"row",padding:"16 8 16 16",alignItems:"center",minWidth:320,backgroundColor:e.palette.primary[50]},stackSlider:{marginTop:4,marginLeft:4,marginRight:6}}})(P)},254:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(3),l=n(12),c=n.n(l),p=(n(242),n(44)),u=n.n(p),f=n(29),d=n.n(f),h=n(23),m=n.n(h),y=n(13),g=n.n(y),b=n(20),v=n.n(b),w=n(6),S=n.n(w),O=n(31),C=n.n(O);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var N=function(e){function t(e){var n,r,o,a,i,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=j(t).call(this,e),n=!o||"object"!==P(o)&&"function"!=typeof o?k(r):o,a=k(k(n)),s=function(e){n.setState({newSceneName:e.target.value})},(i="editNewSceneName")in a?Object.defineProperty(a,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[i]=s,n.state={newSceneName:""},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement(v.a,null,o.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off"},o.a.createElement(S.a,{className:t.listItem},o.a.createElement(c.a,null,o.a.createElement(d.a,null)),o.a.createElement(m.a,{className:t.sceneInput,id:"required",label:"New scene name",margin:"none",value:this.state.newSceneName,onChange:function(t){return e.editNewSceneName(t)}}),o.a.createElement(C.a,null,o.a.createElement(g.a,{"aria-label":"Confirm",onClick:function(t){return e.props.addScene(e.state.newSceneName)}},o.a.createElement(u.a,null))))))}}])&&E(n.prototype,r),a&&E(n,a),t}();N.propTypes={classes:i.a.object.isRequired},t.default=Object(s.withStyles)(function(e){return{dialogContent:{height:"100%",padding:8},listItem:{padding:"0 8"},sceneInput:{marginLeft:16}}})(N)},266:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(3),l=n(30),c=n(242),p=n(254),u=n(32),f=n.n(u);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=m(t).call(this,e),n=!o||"object"!==d(o)&&"function"!=typeof o?g(r):o,b(g(g(n)),"isAShortcut",function(e){for(var t in n.state.shortcuts)if(n.state.shortcuts[t]==e)return t;return"x"}),b(g(g(n)),"devicesByArea",function(e){var t=[];for(var r in n.state.lights){var o=n.props.deviceByName(r);o&&t.push(o)}return t}),b(g(g(n)),"runScene",function(e){n.props.sendAlexaCommand(e,"logic:scene:"+e,"SceneController","Activate")}),b(g(g(n)),"sortByShortcuts",function(){for(var e=Object.keys(n.state.scenes).sort().reverse(),t=Object.keys(n.state.shortcuts).sort(),r=0;r<t.length;r++)e.indexOf(n.state.shortcuts[t[r]])>0&&(e.splice(e.indexOf(n.state.shortcuts[t[r]]),1),e.unshift(n.state.shortcuts[t[r]]));return e}),n.state={scenes:{},shortcuts:{},lights:{},sceneData:{}},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;fetch("/list/logic/scenes").then(function(e){return e.json()}).then(function(t){return e.setState({sceneData:t})}),fetch("/list/logic/area/"+this.props.name).then(function(e){return e.json()}).then(function(t){return e.setState(t)})}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.computedLevel,a=this.state,i=(a.scenes,a.sceneData),s=a.lights;return o.a.createElement(f.a,{className:n.dialogContent},this.sortByShortcuts().map(function(t){return o.a.createElement(c.default,{devices:e.devicesByArea(name),deviceProperties:e.props.propertiesFromDevices(e.devicesByArea(name)),setShortcut:e.props.setShortcut,shortcut:e.isAShortcut(t),edit:e.props.edit,addScene:e.props.addScene,deleteScene:e.props.deleteScene,runScene:e.runScene,key:"scene-edit-"+t,name:t,area:e.props.area,lights:s,scene:i[t],levelsChange:e.props.levelsChange,computedLevel:r})}),this.props.edit?o.a.createElement(p.default,{addScene:this.props.addScene,area:this.props.area}):null)}}])&&h(n.prototype,r),a&&h(n,a),t}();v.propTypes={classes:i.a.object.isRequired},t.default=Object(l.withData)(Object(s.withStyles)(function(e){return{dialogContent:{height:"100%",padding:8}}})(v))},278:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(3),l=n(9),c=n.n(l),p=n(21),u=n.n(p),f=n(28),d=n.n(f),h=n(252),m=n(265),y=n(38);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=v(t).call(this,e),n=!o||"object"!==g(o)&&"function"!=typeof o?S(r):o,O(S(S(n)),"handleSave",function(e){n.groupSaveChanges(),n.props.close(e)}),O(S(S(n)),"saveRegions",function(){fetch("/config/regions",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(n.state.regions)}).then(function(e){return console.log(e)})}),O(S(S(n)),"groupSaveChanges",function(){fetch("/config/regions",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(n.state.regions)})}),O(S(S(n)),"updateList",function(e,t){var r=n.state.regions;r[e].rooms=t,n.setState({regions:r})}),O(S(S(n)),"handleObjectBrowser",function(){n.setState({roomBrowser:!0})}),O(S(S(n)),"handleCloseObjectBrowser",function(){n.setState({roomBrowser:!1})}),O(S(S(n)),"handleCloseRoomBrowser",function(){n.setState({roomBrowser:!1})}),O(S(S(n)),"handleClick",function(e){if(!n.state.adding){if(n.state.regions[e].hasOwnProperty("rooms"))t=n.state.regions[e].rooms;else var t=[];n.setState({selectedRegion:e,selectedRooms:t,roomBrowser:!0})}}),O(S(S(n)),"handleRegionEdit",function(e){console.log("hre",e),n.setState({roomBrowser:!0,selectedRegion:e})}),n.state={edit:!1,add:!1,selectedName:"",selectedDevices:[],areamap:{},regions:{},roomBrowser:!1,objectBrowser:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;fetch("/config/regions").then(function(e){return e.json()}).then(function(t){return e.setState({regions:t})}),fetch("/config/areamap").then(function(e){return e.json()}).then(function(t){return e.setState({areamap:t})})}},{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement(y.default,{open:this.props.open,close:this.props.close,title:"Regions"},this.state.roomBrowser?o.a.createElement(m.default,{name:this.state.selectedRegion,close:this.handleCloseRoomBrowser,devices:this.props.devices,propertiesFromDevices:this.props.propertiesFromDevices}):o.a.createElement(h.default,{edit:this.state.edit,add:this.state.add,doneEditing:this.doneEditing,handleRegionEdit:this.handleRegionEdit,handleRegionSelect:this.props.handleRegionSelect}),o.a.createElement(u.a,null),o.a.createElement(d.a,{className:t.dialogActions},this.state.edit||this.state.add?o.a.createElement(c.a,{onClick:function(t){return e.setState({add:!1,edit:!1})},color:"primary",autoFocus:!0},"DONE"):o.a.createElement(o.a.Fragment,null,o.a.createElement(c.a,{onClick:function(t){return e.setState({add:!0})},color:"primary",autoFocus:!0},"ADD"),o.a.createElement(c.a,{onClick:function(t){return e.setState({edit:!0})},color:"primary",autoFocus:!0},"EDIT"),o.a.createElement(c.a,{onClick:function(t){return e.handleSave(t)},color:"primary",autoFocus:!0},"OK"))))}}])&&b(n.prototype,r),a&&b(n,a),t}();C.propTypes={classes:i.a.object.isRequired},t.default=Object(s.withStyles)(function(e){return{dialogActions:{paddingBottom:"env(safe-area-inset-bottom)"}}})(C)},281:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(3),l=n(40),c=n.n(l),p=n(6),u=n.n(p),f=n(240);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=m(t).call(this,e),n=!o||"object"!==d(o)&&"function"!=typeof o?g(r):o,b(g(g(n)),"handlePreLevelChange",function(e,t){console.log(t),n.setState({level:t,delaySet:!0})}),b(g(g(n)),"runScene",function(e){n.props.sendAlexaCommand(e,"logic:scene:"+e,"SceneController","Activate")}),b(g(g(n)),"endSliderDelay",function(){n.setState({delaySet:!1},function(){return t.computeLevels(n.props.sceneData,n.props.deviceProperties,n.state)})}),b(g(g(n)),"delaySliderUpdates",function(){n.setState({delaySet:!0},function(){return setTimeout(function(){return endSliderDelay()},1e3)})}),b(g(g(n)),"runShortcut",function(e){if(n.props.shortcuts.hasOwnProperty(e.toString())){var t=n.props.shortcuts[e];n.runScene(t)}else console.log("No scene shortcut for area level",e)}),n.state={level:0,delaySet:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,o.a.Component),n=t,a=[{key:"getDerivedStateFromProps",value:function(e,n){var r=e.deviceProperties,o={};return e.hasOwnProperty("deviceProperties")&&(o.devices=e.devices,o.deviceProperties=e.deviceProperties,n.hasOwnProperty("delaySet")&&n.delaySet||(o.level=t.computeLevels(e.sceneData,r,e,n))),o}},{key:"computeLevels",value:function(e,t,n,r){for(var o=0,a=0,i={},s=n.devices,l=0;l<4;l++){var c=l.toString();if(n.shortcuts.hasOwnProperty(c)){var p=n.shortcuts[c],u=n.sceneData[p],f=0;for(var d in u)for(var h=0;h<s.length;h++)if(s[h].endpointId==d){var m=s[h].friendlyName;if("ON"==t[m].powerState)var y=t[m].brightness;else y=0;f+=50-Math.abs(y-u[d].brightness);break}i[c]=f,f>o&&(a=l,o=f)}}return a}}],(r=[{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement(u.a,{className:t.areaListItem},o.a.createElement(c.a,{variant:"subtitle1",className:t.halves,onClick:function(){return e.props.selectArea(e.props.name)}},this.props.name),o.a.createElement(f.default,{half:!0,value:this.state.level,step:1,min:0,max:3,preChange:this.handlePreLevelChange,change:this.runShortcut}))}}])&&h(n.prototype,r),a&&h(n,a),t}();v.propTypes={classes:i.a.object.isRequired},t.default=Object(s.withStyles)(function(e){return{halves:{flexGrow:1,flexBasis:0,boxSizing:"border-box"},areaListItem:{display:"flex",height:64,padding:"0 4",alignItems:"center"}}})(v)},282:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(3),l=n(252),c=n(265),p=n(38);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=d(t).call(this,e),n=!o||"object"!==u(o)&&"function"!=typeof o?m(r):o,y(m(m(n)),"done",function(){n.setState({add:!1,edit:!1,areaSelect:!1})}),y(m(m(n)),"handleClick",function(e){if(!n.state.adding){if(n.state.regions[e].hasOwnProperty("rooms"))t=n.state.regions[e].rooms;else var t=[];n.setState({selectedRegion:e,selectedRooms:t,roomBrowser:!0})}}),y(m(m(n)),"handleRegionEdit",function(e){console.log("hre",e),n.setState({areaSelect:!0,selectedRegion:e})}),n.state={edit:!1,add:!1,selectedName:"",selectedDevices:[],areamap:{},regions:{},areaSelect:!1,objectBrowser:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){this.props.classes,this.state.add;return o.a.createElement(p.default,{open:this.props.open,close:this.props.close,title:"Regions"},this.state.areaSelect?o.a.createElement(c.default,{name:this.state.selectedRegion,close:this.done,devices:this.props.devices,propertiesFromDevices:this.props.propertiesFromDevices}):o.a.createElement(l.default,{close:this.props.close,done:this.done,Editing:this.doneEditing,handleRegionEdit:this.handleRegionEdit,selectRegion:this.props.selectRegion}))}}])&&f(n.prototype,r),a&&f(n,a),t}();g.propTypes={classes:i.a.object.isRequired},t.default=Object(s.withStyles)(function(e){return{list:{minWidth:320,width:"100%"}}})(g)},283:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(3),l=n(9),c=n.n(l),p=n(28),u=n.n(p),f=n(32),d=n.n(f),h=n(97),m=n.n(h),y=n(21),g=n.n(y),b=n(20),v=n.n(b),w=n(38),S=n(253),O=n(244),C=n(266);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=j(t).call(this,e),n=!o||"object"!==P(o)&&"function"!=typeof o?k(r):o,N(k(k(n)),"state",{open:!1}),N(k(k(n)),"handlePreLevelChange",function(e){n.setState({level:e})}),N(k(k(n)),"handleTab",function(e,t){0==t&&n.setState({frontTab:t}),1==t&&n.setState({frontTab:t})}),N(k(k(n)),"handleEdit",function(){n.setState({edit:!0})}),N(k(k(n)),"editFinished",function(){n.setState({edit:!1})}),n.state={scenes:{},shortcuts:{},lights:{},frontTab:0,computedLevel:0,level:0,brightness:0,powerState:!1,colorTemperatureInKelvin:4e3,target:null,open:!1,endpointIdCache:[],lastmessage:"",updates:{},areaState:{},edit:!1,delaySet:!1},n.avgState=n.avgState.bind(k(k(n))),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,o.a.Component),n=t,a=[{key:"getDerivedStateFromProps",value:function(e,n){var r=e.deviceProperties,o={};return e.hasOwnProperty("deviceProperties")&&(o.devices=e.devices,o.deviceProperties=e.deviceProperties,n.hasOwnProperty("delaySet")&&(n.delaySet||(o.level=t.computeLevels(e,e.sceneData,r,n)))),o}},{key:"computeLevels",value:function(e,n,r,o){for(var a=0,i=0,s={},l=0;l<4;l++){var c=l.toString();if(e.shortcuts.hasOwnProperty(c)){var p=e.shortcuts[c],u=e.sceneData[p],f=0;for(var d in u){var h=t.nameByEndpointId(d,e.devices);if(r.hasOwnProperty(h)){if("ON"==r[h].powerState)var m=r[h].brightness;else m=0;f+=50-Math.abs(m-u[d].brightness)}}s[c]=f,f>a&&(i=l,a=f)}}return i}}],(r=[{key:"lightList",value:function(){var e=[];for(var t in this.props.deviceProperties)this.props.deviceProperties[t].hasOwnProperty("brightness")&&e.push(t);return e}},{key:"avgState",value:function(e){if("on"==e){for(var t in this.props.deviceProperties)if(this.props.deviceProperties[t].hasOwnProperty("powerState")&&"ON"==this.props.deviceProperties[t].powerState)return!0;return!1}if("brightness"==e){var n=0,r=0;for(var t in this.props.deviceProperties)this.props.deviceProperties[t].hasOwnProperty("brightness")&&(n+=1,"ON"==this.props.deviceProperties[t].powerState&&(r+=this.props.deviceProperties[t].brightness));return 0==n?0:r/n}if("temperature"==e){var o=0,a=0;for(var t in this.props.deviceProperties)this.props.deviceProperties[t].hasOwnProperty("colorTemperatureInKelvin")&&(o+=1,"ON"==this.props.deviceProperties[t].powerState&&(a+=this.props.deviceProperties[t].colorTemperatureInKelvin));return 0==o?0:a/o}return 0}},{key:"anyOn",value:function(){for(var e in this.props.deviceProperties)if(this.props.deviceProperties[e].hasOwnProperty("powerState")&&"ON"==this.props.deviceProperties[e].powerState)return!0;return!1}},{key:"renderSwitch",value:function(e){if(e==={}||null==e)return null;if(e.hasOwnProperty("displayCategories"))switch(e.displayCategories[0]){case"LIGHT":for(var t=[],n=0;n<e.capabilities.length;n++)t.push(e.capabilities[n].interface);return o.a.createElement(O.default,{sendAlexaCommand:this.props.sendAlexaCommand,key:e.endpointId,name:e.friendlyName,device:e,deviceProperties:this.props.deviceProperties[e.friendlyName]});default:return null}}},{key:"componentDidMount",value:function(){var e=this;fetch("/list/logic/area/"+this.props.name).then(function(e){return e.json()}).then(function(t){return e.setState(t)})}},{key:"render",value:function(){var e=this,t=this.props.classes;this.state.devices;return o.a.createElement(w.default,{title:this.props.name,open:this.props.open,close:this.props.close,tabChange:this.handleTab,tabValue:this.state.frontTab,tabs:["Lights","Scenes"]},"All"!=this.props.name&&0==this.state.frontTab?o.a.createElement(m.a,{className:t.groupHead},o.a.createElement(S.default,{sendAlexaCommand:this.props.sendAlexaCommand,key:this.props.name,name:this.props.name,deviceProperties:this.props.deviceProperties,devices:this.props.devices,avgState:this.avgState}),o.a.createElement(g.a,null)):null,0==this.state.frontTab?o.a.createElement(d.a,{className:t.dialogContent},o.a.createElement(v.a,{className:t.root},Object.keys(this.props.devices).sort().map(function(t){return e.renderSwitch(e.props.devices[t])}))):o.a.createElement(C.default,{sendAlexaCommand:this.props.sendAlexaCommand,name:this.props.name,computedLevel:this.state.level,edit:this.state.edit,editFinished:this.editFinished,lightList:this.lightList(),area:this.props.name}),o.a.createElement(g.a,null),o.a.createElement(u.a,{className:t.dialogActions},this.state.edit?o.a.createElement(c.a,{onClick:this.editFinished,color:"primary",autoFocus:!0},"Cancel"):o.a.createElement(c.a,{onClick:this.handleEdit,color:"primary"},"Edit"),this.state.edit?null:o.a.createElement(c.a,{onClick:this.props.close,color:"primary",autoFocus:!0},"OK")))}}])&&E(n.prototype,r),a&&E(n,a),t}();N(_,"nameByEndpointId",function(e,t){for(var n=0;n<t.length;n++)if(t[n].endpointId==e)return t[n].friendlyName}),_.propTypes={classes:i.a.object.isRequired},t.default=Object(s.withStyles)(function(e){var t;return N(t={root:{flexGrow:1},flex:{flex:1},nogrow:{flex:1},slider:{flex:1,paddingLeft:16,paddingRight:16},touchSized:{height:72},halves:{width:"50%"}},"flex",{flex:1}),N(t,"menuButton",{marginLeft:-12,marginRight:20}),N(t,"paperItem",{display:"flex",height:40,padding:"16px",alignItems:"center"}),N(t,"tabTitle",{padding:0,backgroundColor:e.palette.primary.dark}),N(t,"xtabTitle",{backgroundColor:e.palette.primary.dark,width:"100%",padding:0,display:"flex",alignItems:"center",justifyContent:"space-around"}),N(t,"xtabRow",{padding:0,width:"100%",backgroundColor:e.palette.primary.dark,color:e.palette.primary.contrastText,display:"flex",justifyContent:"center"}),N(t,"tabInfo",{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.dark,display:"flex",justifyContent:"space-around",alignItems:"center"}),N(t,"baseTitle",{minHeight:48}),N(t,"dialogTitle",{display:"flex",alignItems:"center",justifyContent:"center",flexGrow:1,color:e.palette.primary.contrastText}),N(t,"dialogActions",{paddingBottom:"env(safe-area-inset-bottom)"}),N(t,"dialogContent",{height:"100%",padding:0}),N(t,"groupHead",{backgroundColor:e.palette.primary[100],padding:0}),t})(_)},285:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(3),l=n(12),c=n.n(l),p=n(9),u=n.n(p),f=n(97),d=n.n(f),h=n(32),m=n.n(h),y=n(28),g=n.n(y),b=n(40),v=n.n(b),w=n(43),S=n(52),O=n.n(S),C=n(244),P=n(38);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var _=function(e){function t(e){var n,r,o,a,i,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=x(t).call(this,e),n=!o||"object"!==E(o)&&"function"!=typeof o?N(r):o,a=N(N(n)),s=function(e){"on"==n.state.filter?n.setState({filter:"all"}):n.setState({filter:"on"})},(i="toggleFilter")in a?Object.defineProperty(a,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[i]=s,n.state={showOverlay:!0,showdialog:!1,filter:"on"},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.classes;t.fullScreen;return o.a.createElement(P.default,{open:this.props.showdialog,close:function(){return e.props.closeDialog()}},o.a.createElement(d.a,{elevation:1,disableTypography:!0,className:n.titleControls},o.a.createElement(O.a,{className:n.titleContent,onClick:function(){return e.toggleFilter("all")}},this.props.lightCount("on")>0?o.a.createElement(c.a,{className:n.on},o.a.createElement(w.MdLightbulbOutline,null)):o.a.createElement(c.a,{className:n.off},o.a.createElement(w.MdLightbulbOutline,null)),this.props.lightCount("on")>0?o.a.createElement(v.a,{className:n.countLabel,variant:"subtitle1"},this.props.lightCount("on")," lights are on"):o.a.createElement(v.a,{className:n.countLabel,variant:"subtitle1"},"All lights off"))),o.a.createElement(m.a,{className:n.dialogContent},this.props.devices.map(function(t){return"all"==e.state.filter||String(e.props.deviceProperties[t.friendlyName].powerState).toLowerCase()==e.state.filter.toLowerCase()?o.a.createElement(C.default,{key:t.endpointId,name:t.friendlyName,filter:e.props.filter,device:t,deviceProperties:e.props.deviceProperties[t.friendlyName],sendMessage:e.props.sendMessage}):null})),o.a.createElement(g.a,null,o.a.createElement(u.a,{onClick:function(){return e.props.closeDialog()},color:"primary",autoFocus:!0},"OK")))}}])&&j(n.prototype,r),a&&j(n,a),t}();_.propTypes={classes:i.a.object.isRequired},t.default=Object(s.withStyles)(function(e){return{titleControls:{padding:0},titleContent:{padding:"16 24",minWidth:0,flexGrow:1,display:"flex",alignItems:"center"},dialogContent:{padding:0},dialogcard:{maxWidth:"480px",minWidth:"320px",flexDirection:"row",justifyContent:"space-between"},card:{display:"flex",maxWidth:"480px",boxSizing:"border-box",flexDirection:"column",justifyContent:"space-between",padding:16},content:{minWidth:0,padding:"0 !important",flexGrow:1,display:"flex",alignItems:"center"},countLabel:{padding:"8 16"},off:{backgroundColor:"#777"},on:{backgroundColor:e.palette.primary.dark}}})(_)},286:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(3),l=n(28),c=n.n(l),p=n(32),u=n.n(p),f=n(96),d=n.n(f),h=n(98),m=n.n(h),y=n(244),g=n(9),b=n.n(g),v=n(253),w=n(21),S=n.n(w),O=n(38),C=n(186),P=n.n(C);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=x(t).call(this,e),n=!o||"object"!==E(o)&&"function"!=typeof o?N(r):o,_(N(N(n)),"toggleFilter",function(e){"on"==n.state.filter?n.setState({filter:"all"}):n.setState({filter:"on"})}),_(N(N(n)),"handleTab",function(e,t){0==t&&n.setState({frontTab:t,filter:"on"}),1==t&&n.setState({frontTab:t,filter:"all"})}),n.state={filter:"on",frontTab:0},n.avgState=n.avgState.bind(N(N(n))),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,o.a.Component),n=t,(r=[{key:"avgState",value:function(e){if("on"==e){for(var t in this.props.deviceProperties)if(this.props.deviceProperties[t].hasOwnProperty("powerState")&&"ON"==this.props.deviceProperties[t].powerState)return!0;return!1}if("brightness"==e){var n=0,r=0;for(var t in this.props.deviceProperties)this.props.deviceProperties[t].hasOwnProperty("brightness")&&(n+=1,"ON"==this.props.deviceProperties[t].powerState&&(r+=this.props.deviceProperties[t].brightness));return 0==n?0:r/n}if("temperature"==e){var o=0,a=0;for(var t in this.props.deviceProperties)this.props.deviceProperties[t].hasOwnProperty("colorTemperatureInKelvin")&&(o+=1,"ON"==this.props.deviceProperties[t].powerState&&(a+=this.props.deviceProperties[t].colorTemperatureInKelvin));return 0==o?0:a/o}return 0}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes;t.theme;return o.a.createElement(O.default,{title:this.props.lightCount("on")>0?this.props.lightCount("on")+" lights are on":"All lights off",maxWidth:"md",open:this.props.showGrid,close:this.props.closeGrid,tabValue:this.state.frontTab,tabChange:this.handleTab,tabs:["On","All"]},"all"==this.props.name?null:o.a.createElement(d.a,{className:n.card},o.a.createElement(m.a,{className:n.content},o.a.createElement(v.default,{sendAlexaCommand:this.props.sendAlexaCommand,key:this.props.name,name:this.props.name,deviceProperties:this.props.deviceProperties,devices:this.props.devices,avgState:this.avgState}))),o.a.createElement(S.a,null),o.a.createElement(u.a,{className:n.dialogContent},o.a.createElement(P.a,{cols:2,cellHeight:10,spacing:1,className:n.gridList},"all"==this.props.name?null:o.a.createElement(GridTile,{cols:2},o.a.createElement(v.default,{sendAlexaCommand:this.props.sendAlexaCommand,key:this.props.name,name:this.props.name,deviceProperties:this.props.deviceProperties,devices:this.props.devices,avgState:this.avgState})),this.props.devices.map(function(t){return"all"==e.state.filter||String(e.props.deviceProperties[t.friendlyName].powerState).toLowerCase()==e.state.filter.toLowerCase()?o.a.createElement(y.default,{sendAlexaCommand:e.props.sendAlexaCommand,key:t.endpointId,name:t.friendlyName,filter:e.props.filter,device:t,deviceProperties:e.props.deviceProperties[t.friendlyName]}):null}))),o.a.createElement(S.a,null),o.a.createElement(c.a,{className:n.dialogActions},o.a.createElement(b.a,{onClick:function(t){return e.props.closeGrid(t)},color:"primary",autoFocus:!0},"OK")))}}])&&j(n.prototype,r),a&&j(n,a),t}();T.propTypes={classes:i.a.object.isRequired},t.default=Object(s.withStyles)(function(e){return{closed:{backgroundColor:"#6a6"},open:{backgroundColor:"#e66"},countLabel:{padding:"8 16"},card:{display:"flex",maxWidth:"480px",margin:8,boxSizing:"border-box",flexDirection:"column",justifyContent:"space-between",padding:16,width:"100%"},content:{minWidth:0,padding:"0 !important",flexGrow:1,display:"flex",alignItems:"center"},camGridDialog:{margin:"0 auto",display:"flex",alignItems:"center"},lGrid:{display:"flex",flexWrap:"wrap",padding:0,flex:"auto",flexGrow:0,margin:"0 0 auto 0"},paper:{boxShadow:"none",overflow:"hidden",display:"flex",alignItems:"center"},camGridToolbar:{paddingTop:"env(safe-area-inset-top)"},gridTitle:{color:e.palette.primary.contrastText},menuIcon:{color:e.palette.primary.contrastText},tabRow:{color:e.palette.primary.contrastText},tabInfo:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary[500],display:"flex",justifyContent:"space-around",alignItems:"center"},topBar:{width:"100%"},tabTitle:{backgroundColor:e.palette.primary[500],paddingTop:"env(safe-area-inset-top)",padding:"16px 24px 0px 24px",display:"flex",alignItems:"center",justifyContent:"space-around"},gridPlaceholder:{height:2,minWidth:320,flexGrow:1},fullDialog:{boxSizing:"border-box"},xdialogContent:{padding:8,display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",flexDirection:"row"},dialogActions:{paddingBottom:"env(safe-area-inset-bottom)"},gridList:{transform:"translateZ(0)"},dialogContent:{padding:0,width:"100%",overflowX:"hidden",height:"100%"}}})(T)},300:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(3),l=n(12),c=n.n(l),p=n(43),u=n(20),f=n.n(u),d=n(6),h=n.n(d),m=n(7),y=n.n(m),g=n(31),b=n.n(g),v=n(13),w=n.n(v),S=n(560),O=n.n(S),C=n(30),P=(n(278),n(281)),E=n(282),j=n(283),x=(n(285),n(286)),k=n(99);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=T(t).call(this,e),n=!o||"object"!==N(o)&&"function"!=typeof o?I(r):o,R(I(I(n)),"sceneDataByArea",function(e){var t={};if(n.state.areas.hasOwnProperty(e))for(var r in n.state.areas[e].scenes)n.state.scenes.hasOwnProperty(r)&&(t[r]=n.state.scenes[r]);return t}),R(I(I(n)),"areaSceneList",function(e){return n.state.areas.hasOwnProperty(e)&&n.state.areas[e].hasOwnProperty("scenes")?n.state.areas[e].scenes:{}}),R(I(I(n)),"areaShortcuts",function(e){return n.state.areas.hasOwnProperty(e)&&n.state.areas[e].hasOwnProperty("shortcuts")?n.state.areas[e].shortcuts:{}}),R(I(I(n)),"scenesByArea",function(e){var t={};if(n.state.areas.hasOwnProperty(e)&&n.state.areas[e].hasOwnProperty("scenes"))for(var r in n.state.areas[e].scenes)t[r]=n.state.scenes[r];return t}),R(I(I(n)),"shortcutsByArea",function(e){return n.state.areas.hasOwnProperty(e)&&n.state.areas[e].hasOwnProperty("shortcuts")?n.state.areas[e].shortcuts:{}}),R(I(I(n)),"devicesByArea",function(e){var t=[];if(n.state.areas.hasOwnProperty(e))for(var r in n.state.areas[e].lights){var o=n.props.deviceByName(r);o&&t.push(o)}return t}),R(I(I(n)),"lightCount",function(e){for(var t=0,r=0;r<n.props.devices.length;r++){var o=n.props.devices[r];o.hasOwnProperty("displayCategories")&&n.props.deviceProperties[o.friendlyName].hasOwnProperty("powerState")&&n.props.deviceProperties[o.friendlyName].powerState&&"LIGHT"==o.displayCategories[0]&&("all"!=e.toLowerCase()&&n.props.deviceProperties[o.friendlyName].powerState.toLowerCase()!=e.toLowerCase()||(t+=1))}return t}),R(I(I(n)),"handleEdit",function(){n.setState({showEditor:!0})}),R(I(I(n)),"selectRegion",function(e){n.setState({regionSelect:!1}),e?n.setState({region:e}):e=n.state.region,fetch("/list/logic/region/"+e).then(function(e){return e.json()}).then(function(e){return n.setState(e)})}),R(I(I(n)),"closeRegionSelect",function(){n.setState({regionSelect:!1})}),R(I(I(n)),"selectArea",function(e){n.setState({selectedArea:e,showAreaDialog:!0})}),R(I(I(n)),"closeAreaDialog",function(){n.setState({showAreaDialog:!1})}),R(I(I(n)),"handleClickOpen",function(){n.setState({showdialog:!0})}),R(I(I(n)),"closeDialog",function(){n.setState({showdialog:!1})}),R(I(I(n)),"confirmRegion",function(e){e.hasOwnProperty(n.state.region)||(e[n.state.region]=[]),n.setState({regionData:e})}),R(I(I(n)),"saveRegion",function(e,t){var r=n.state.regionData;r[e]=t,n.setState({regionData:r}),n.regionSaveChanges()}),R(I(I(n)),"regionSaveChanges",function(e){fetch("/save/logic/region"+e,{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(n.state.region)})}),n.state={regionName:"Main",arealist:{},regionlist:{},regionData:{},areamap:{},sceneData:{},showdialog:!1,showEditor:!1,showAraDialog:!1,selectedAreas:[],selectedArea:"",region:{},areas:{},scenes:[],regionSelect:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;fetch("/list/logic/region/"+this.state.regionName).then(function(e){return e.json()}).then(function(t){return e.setState(t)})}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.devices,a=(t.deviceProperties,t.propertiesFromDevices),i=this.state,s=i.areas,l=i.regionSelect,u=i.selectedArea,d=i.showdialog,m=this.lightCount("on")>0;return o.a.createElement(k.default,null,o.a.createElement(f.a,{className:n.list},o.a.createElement(h.a,{className:n.listItem},o.a.createElement(c.a,{className:m?n.on:n.off,onClick:function(){return e.handleClickOpen()}},o.a.createElement(p.MdLightbulbOutline,null)),o.a.createElement(y.a,{primary:m?this.lightCount("on")+" lights are on":"All lights off",onClick:function(){return e.handleClickOpen()}}),o.a.createElement(b.a,null,o.a.createElement(w.a,{onClick:function(t){return e.setState({regionSelect:!0})}},o.a.createElement(O.a,null)))),Object.keys(s).map(function(t){return o.a.createElement(P.default,{sendAlexaCommand:e.props.sendAlexaCommand,key:t,name:t,shortcuts:e.areaShortcuts(t),scenes:e.areaSceneList(t),sceneData:e.scenesByArea(t),devices:e.devicesByArea(t),deviceProperties:e.props.propertiesFromDevices(e.devicesByArea(t)),selectArea:e.selectArea})})),l?o.a.createElement(E.default,{selectRegion:this.selectRegion,open:l,close:this.closeRegionSelect,devices:r,propertiesFromDevices:a}):null,d?o.a.createElement(x.default,{sendAlexaCommand:this.props.sendAlexaCommand,name:"all",lightCount:this.lightCount,closeGrid:this.closeDialog,showGrid:this.state.showdialog,key:"lightlist",filter:"ON",Category:"Light",devices:this.props.devicesByCategory("LIGHT"),deviceProperties:this.props.propertiesFromDevices(this.props.devicesByCategory("LIGHT"))}):null,u?o.a.createElement(j.default,{shortcuts:this.shortcutsByArea(u),sendAlexaCommand:this.props.sendAlexaCommand,open:this.state.showAreaDialog,close:this.closeAreaDialog,name:u,sceneData:this.sceneDataByArea(u),devices:this.devicesByArea(u),deviceProperties:this.props.propertiesFromDevices(this.devicesByArea(u))}):null)}}])&&_(n.prototype,r),a&&_(n,a),t}();L.propTypes={classes:i.a.object.isRequired},t.default=Object(C.withData)(Object(s.withStyles)(function(e){return{areaList:{padding:8,minWidth:320,maxWidth:"480px"},countLabel:{padding:"8 16",flexGrow:1},off:{backgroundColor:"#777"},on:{backgroundColor:e.palette.primary.main},listItem:{padding:0,marginBottom:8,minHeight:48,width:"100%"},list:{display:"flex",flexDirection:"column",flexGrow:1,padding:0}}})(L))}}]);