(this["webpackJsonpsofa-client"]=this["webpackJsonpsofa-client"]||[]).push([[171],{11:function(e,t,r){"use strict";r.r(t),r.d(t,"useStream",(function(){return c})),r.d(t,"useApi",(function(){return l})),r.d(t,"NetworkContext",(function(){return u})),r.d(t,"default",(function(){return d}));var n=r(80),o=r(6),a=r(0),i=r.n(a),s="https://"+window.location.hostname,c=function(e){var t=Object(a.useState)(e),r=Object(o.a)(t,2),i=r[0],c=r[1],l=Object(a.useState)(void 0),u=Object(o.a)(l,2),d=u[0],p=u[1],m=Object(a.useState)(!1),f=Object(o.a)(m,2),h=f[0],v=f[1],g=Object(a.useState)([]),y=Object(o.a)(g,2),j=y[0],b=y[1],S=Object(a.useState)(!1),O=Object(o.a)(S,2),w=O[0],C=O[1],E=Object(a.useState)(0),x=Object(o.a)(E,2),k=x[0],L=(x[1],Object(a.useCallback)((function(e){var t=Object(n.a)(j);t.push(e),b(Object(n.a)(new Set(t)))}),[j]));return Object(a.useEffect)((function(){var e=!1,t=function(){v(!0),C(!1)},r=function(){console.log("ERROR with EventSource"),v(!1)},n=function(e){for(var t=JSON.parse(e.data),r=0;r<j.length;r++)j[r](t)};return e||w||h||function(){if(i&&j.length>0&&!w&&k<5){C(!0),console.log(".. Connecting event source:",i,j);var e=new EventSource(s+"/sse",{headers:{authorization:i},withCredentials:!0});e.addEventListener("message",n),e.addEventListener("error",r),e.addEventListener("open",t),p(e)}}(),function(){e=!0}}),[i,j,w,h]),{connected:h,streamStatus:function(){return d.status},setToken:c,closeStream:function(){v(!1),p(void 0)},addSubscriber:L}},l=function(e,t,r){var n=Object(a.useState)(!0),i=Object(o.a)(n,2),c=i[0],l=i[1],u=Object(a.useState)(!1),d=Object(o.a)(u,2),p=d[0],m=d[1],f=Object(a.useState)(!1),h=Object(o.a)(f,2),v=h[0],g=h[1],y=Object(a.useState)(r),j=Object(o.a)(y,2),b=j[0],S=j[1];return Object(a.useEffect)((function(){var n=!1,o=function(e){return n?r:(g(400!==e.status&&401!==e.status),m(!e.ok),l(!1),400!==e.status&&401!==e.status&&e.ok&&e.json?e.json():r)};return e&&!n&&(l(!0),fetch(s+"/"+e,{method:"GET",headers:{authorization:t}}).then(o).catch(o)).then((function(e){return!n&&S(e)})),function(){n=!0}}),[e,t,r]),{isLoading:c,hasError:p,loggedIn:v,data:b}},u=Object(a.createContext)();function d(e){var t=Object(a.useState)(!0),r=Object(o.a)(t,2),n=r[0],l=r[1],d=Object(a.useState)(!1),p=Object(o.a)(d,2),m=p[0],f=p[1],h=Object(a.useState)(x("token")),v=Object(o.a)(h,2),g=v[0],y=v[1],j=c(g,[]),b=j.streamConnected,S=j.streamStatus,O=(j.setStreamToken,j.closeStream),w=j.addSubscriber;function C(e){return 400===e.status?(l(!1),console.log("Not logged in",e.status,e.statusText),{error:"login"}):401===e.status?(l(!1),console.log("Not logged in",e.status,e.statusText),{error:"login"}):e.ok?(f(!1),e.json()):(console.log("Error connecting",e.status,e.statusText),f(!0),{error:e.statusText})}function E(e,t,r){var n=new Date;return r=r||365,n.setTime(+n+864e5*r),window.document.cookie=e+"="+t+"; expires="+n.toGMTString()+"; path=/",t}function x(e){for(var t=e+"=",r=decodeURIComponent(document.cookie).split(";"),n=0;n<r.length;n++){for(var o=r[n];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return""}return i.a.createElement(u.Provider,{value:{connectError:m,streamConnected:b,streamStatus:S,loggedIn:n,getJSON:function(e){return g&&n?fetch(s+"/"+e,{method:"GET",headers:{authorization:g}}).then((function(e){return C(e)})):(l(!1),new Promise((function(e,t){e(void 0)})))},postJSON:function(e,t){return g?fetch(s+"/"+e,{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",authorization:g},body:JSON.stringify(t)}).then((function(e){return C(e)})):(l(!1),new Promise((function(e,t){e(void 0)})))},login:function(e,t){console.log("Logging in as user",e,t);var r=new FormData;return r.append("user",e),r.append("password",t),fetch(s+"/login",{method:"post",body:r}).then((function(e){return e.json()})).then((function(t){return function(e,t){if(console.log("tokendata",t),t.hasOwnProperty("token"))return E("token",t.token,365),E("user",e,365),console.log("GetCookie",x("token")),y(t.token),n||l(!0),t.token}(e,t)}))},logout:function(){document.cookie="token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",console.log("logging out"),fetch(s+"/logout",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){return l(!1)})).then((function(e){return O()}))},addSubscriber:w,getCookie:x}},e.children)}},16:function(e,t,r){"use strict";r.r(t),r.d(t,"moduleReducer",(function(){return l})),r.d(t,"LayoutContext",(function(){return u})),r.d(t,"LayoutProvider",(function(){return d}));var n=r(6),o=r(56),a=r(0),i=r.n(a),s=r(11),c=r(64),l=function(e,t){return function(t){var n=Object(o.a)({},e);return t.forEach((function(e){var t;n.hasOwnProperty(e)||(console.log("adding module",e),n[e]=(t=e,i.a.lazy((function(){return r(266)("./"+t)}))))})),n}(t)},u=Object(a.createContext)({}),d=function(e){var t=Object(a.useContext)(s.NetworkContext).getJSON,r=window.innerWidth<=800,o=Object(a.useState)(void 0),d=Object(n.a)(o,2),p=d[0],m=d[1],f=Object(a.useState)(function(){for(var e={name:"Home",props:{},data:{},page:""},t=decodeURIComponent(document.cookie).split(";"),n=0;n<t.length;n++){for(var o=t[n];" "===o.charAt(0);)o=o.substring(1);0===o.indexOf("layout=")&&(e=JSON.parse(o.substring("layout=".length,o.length)))}r&&e.data.hasOwnProperty("mobile")&&!e.hasOwnProperty("page")&&(e.page=e.data.mobile);return e}()),h=Object(n.a)(f,2),v=h[0],g=h[1],y=Object(a.useState)({name:"",props:{}}),j=Object(n.a)(y,2),b=j[0],S=j[1],O=Object(a.useState)({name:"",props:{}}),w=Object(n.a)(O,2),C=w[0],E=w[1],x=Object(a.useState)("System"),k=Object(n.a)(x,2),L=k[0],P=k[1],T=Object(a.useReducer)(l,[]),A=Object(n.a)(T,2),N=A[0],D=A[1];function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{type:"single"};P("Home");var n={name:e,props:t,data:r,page:v.page};g(n),I(n)}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};E({name:e,props:t})}function I(e){var t=new Date;return t.setTime(+t+864e5),window.document.cookie="layout="+JSON.stringify(e)+"; expires="+t.toGMTString()+"; path=/",e}return Object(a.useEffect)((function(){t("layout").then((function(e){m(e)}))}),[t]),Object(a.useEffect)((function(){if(void 0!==p){if(p.hasOwnProperty("error"))return console.log("Error getting layout",p),void g(void 0);if(r&&p.Home.hasOwnProperty("mobile"))return void P("Home");var e={name:"Home",props:{},data:p.Home};return g(e),void I(e)}}),[p,r]),Object(a.useEffect)((function(){function e(e,t){if(t.data.pages.hasOwnProperty(e)){for(var r=t.data.pages[e],n=[],o=0;o<r.length;o++)n.push(r[o].module);D(n)}else console.log("Page",e,"not found in layout")}var t;t=v,"pages"===v.data.type?r?t.hasOwnProperty("page")?t.data.hasOwnProperty("mobile")&&t.page===t.data.mobile?D([t.data.mobile]):e(t.page,t):t.data.hasOwnProperty("mobile")?D([t.data.mobile]):e(Object.keys(t.data.pages)[0],t):function(t,r){for(var n=0,o=Object.keys(r.data.pages);n<o.length;n++)e(o[n],r)}(v.name,t):D([v.name])}),[v,r]),i.a.createElement(u.Provider,{value:{layouts:p,layout:v,modules:N,renderSuspenseModule:function(e,t){if(N.hasOwnProperty(e)){var r=N[e];return t.wide=!0,i.a.createElement(i.a.Suspense,{fallback:i.a.createElement(c.default,{name:e})},i.a.createElement(r,Object.assign({key:e},t)))}return console.log("could not render",e),null},backPage:C,returnPage:b,applyLayout:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};P("Home"!==e?"Home":"System");var r={name:e,props:t,data:p[e],page:v.page};g(r),I(r)},applyLayoutCard:H,applyLayoutPage:function(e){console.log("Apply layout page",e);var t={name:v.name,props:v.props,data:v.data,page:e};g(t),I(t)},applyHomePage:function(e){console.log("Apply home page",e),P("Home");var t={name:"Home",props:v.props,data:p.Home,page:e};console.log("Apply home page",e,t),g(t),I(t)},applyReturnPage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};S({name:e,props:t})},applyBackPage:B,goBack:function(){H(C.name,C.props),B("",{})},goHome:function(){console.log("gohome to",p.Home);var e={name:"Home",props:{},data:p.Home,page:p.Home.order[0]};r&&p.Home.hasOwnProperty("mobile")&&(console.log("setting home to mobile"),e.page=p.Home.mobile),g(e),I(e),P("System")},isMobile:r,setMasterButtonState:P,masterButtonState:L}},e.children)}},19:function(e,t,r){"use strict";r.r(t);var n=r(39),o=r(40),a=r(91),i=r(90),s=r(92),c=r(0),l=r.n(c),u=r(41),d=function(e){function t(e){var r;return Object(n.a)(this,t),(r=Object(a.a)(this,Object(i.a)(t).call(this,e))).state={hasError:!1,error:"",info:""},r}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0,error:e,info:t})}},{key:"render",value:function(){return this.state.hasError?l.a.createElement(u.default,{wide:this.props.wide,name:this.state.error.name,message:this.state.error.message}):this.props.children}}]),t}(c.Component);t.default=d},23:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return p}));var n=r(0),o=r.n(n),a=r(29),i=r(70),s=r.n(i),c=r(36),l=r(270),u=r(107),d=Object(a.a)((function(e){return{content:{borderWidth:"thin",borderStyle:"solid",borderColor:e.palette.divider,display:"flex",margin:0,boxSizing:"border-box",padding:"0 8px 0 0",flexWrap:"wrap",alignItems:"center",flexGrow:1,minWidth:"320px",minHeight:80,flexBasis:0,position:"relative"},hover:{"&:hover":{backgroundColor:e.palette.background.hover,borderColor:e.palette.primary.dark}},nopad:{padding:0},list:{width:"100%"},nopadlist:{padding:0,width:"100%"},colorband:{borderLeft:"solid 5px #44F"},thinmargin:{margin:2,padding:0},normal:{padding:"4px !important"}}}));function p(e){var t=d(),r=window.innerWidth<=800,n=o.a.createElement(o.a.Fragment,null,e.nolist?o.a.createElement(c.a,{container:!0},e.children):o.a.createElement(u.a,{className:e.nopad?t.nopadlist:t.list},e.children));return o.a.createElement(c.a,{item:!0,xs:e.xs?e.xs:r||e.wide?12:4,className:e.thinmargin?t.thinmargin:t.normal},e.nopaper?o.a.createElement(o.a.Fragment,null,n):o.a.createElement(l.a,{elevation:e.elevation,className:s()(t.content,e.hover&&t.hover,e.nopad&&t.nopad,e.colorband&&t.colorband)},n))}p.defaultProps={elevation:0,wide:!1,thinmargin:!1,nopaper:!1}},258:function(e,t,r){e.exports=r(60)},266:function(e,t,r){var n={"./":[60,9],"./AdapterItem":[186,9,2,3,6,100],"./AdapterItem.js":[186,9,2,3,6,100],"./AdapterLayout":[217,9,2,3,6,65],"./AdapterLayout.js":[217,9,2,3,6,65],"./AdapterStatus":[187,9,101],"./AdapterStatus.js":[187,9,101],"./AlertSummary":[188,9,126],"./AlertSummary.js":[188,9,126],"./Area":[218,9,52],"./Area.js":[218,9,52],"./AreaHero":[219,9,0,1,47,61],"./AreaHero.js":[219,9,0,1,47,61],"./AreaLayout":[220,9,0,1,43,53],"./AreaLayout.js":[220,9,0,1,43,53],"./AreaLine":[167,9,70],"./AreaLine.js":[167,9,70],"./AreasLayout":[221,9,62],"./AreasLayout.js":[221,9,62],"./AutomationColumn":[191,9,4,5,29],"./AutomationColumn.js":[191,9,4,5,29],"./AutomationLayout":[222,9,2,3,4,5,27],"./AutomationLayout.js":[222,9,2,3,4,5,27],"./AutomationsLayout":[223,9,41],"./AutomationsLayout.js":[223,9,41],"./AvSummary":[197,9,102],"./AvSummary.js":[197,9,102],"./CameraLayout":[224,9,50,110],"./CameraLayout.js":[224,9,50,110],"./CameraSelect":[225,9,60,111],"./CameraSelect.js":[225,9,60,111],"./CameraSummary":[198,9,127],"./CameraSummary.js":[198,9,127],"./CompositeDevice":[145,9,48],"./CompositeDevice.js":[145,9,48],"./DataContext/AlexaDevice":[50,9],"./DataContext/AlexaDevice.js":[50,9],"./DataContext/DataProvider":[53,9],"./DataContext/DataProvider.js":[53,9],"./DeviceDialog":[147,9,4,5,54],"./DeviceDialog.js":[147,9,4,5,54],"./DeviceDirectiveLayout":[226,9,36],"./DeviceDirectiveLayout.js":[226,9,36],"./DeviceHero":[227,9,128],"./DeviceHero.js":[227,9,128],"./DeviceIcon":[132,9,55],"./DeviceIcon.js":[132,9,55],"./DeviceLayout":[228,9,5,51],"./DeviceLayout.js":[228,9,5,51],"./DevicePropertyLayout":[254,9,32],"./DevicePropertyLayout.js":[254,9,32],"./DeviceSummary":[199,9,129],"./DeviceSummary.js":[199,9,129],"./DotLevel":[148,9,88],"./DotLevel.js":[148,9,88],"./ErrorBoundary":[19,9],"./ErrorBoundary.js":[19,9],"./ErrorCard":[41,9],"./ErrorCard.js":[41,9],"./GridBreak":[140,9,149],"./GridBreak.js":[140,9,149],"./GridItem":[23,9],"./GridItem.js":[23,9],"./GridSearch":[142,9,150],"./GridSearch.js":[142,9,150],"./GridSection":[113,9,131],"./GridSection.js":[113,9,131],"./HistoryLayout":[229,9,2,3,6,89],"./HistoryLayout.js":[229,9,2,3,6,89],"./HistoryLine":[200,9,2,3,6,112],"./HistoryLine.js":[200,9,2,3,6,112],"./LightLayout":[230,9,0,1,40],"./LightLayout.js":[230,9,0,1,40],"./LightSummary":[201,9,132],"./LightSummary.js":[201,9,132],"./LightbulbOutline":[111,9,151],"./LightbulbOutline.js":[111,9,151],"./MasterButton":[63,9],"./MasterButton.js":[63,9],"./MiniLauncher":[231,9,134],"./MiniLauncher.js":[231,9,134],"./ModeLines":[158,9,113],"./ModeLines.js":[158,9,113],"./MoreDevicesLayout":[232,9,59,57],"./MoreDevicesLayout.js":[232,9,59,57],"./NetworkProvider":[11,9],"./NetworkProvider.js":[11,9],"./Opener":[233,9,4,17,103],"./Opener.js":[233,9,4,17,103],"./PlaceholderCard":[64,9],"./PlaceholderCard.js":[64,9],"./PlayerGroup":[234,9,56],"./PlayerGroup.js":[234,9,56],"./PlayerHero":[235,9,0,7,33],"./PlayerHero.js":[235,9,0,7,33],"./PlayersLayout":[236,9,71],"./PlayersLayout.js":[236,9,71],"./ReceiverHero":[237,9,0,18,75],"./ReceiverHero.js":[237,9,0,18,75],"./Scene":[189,9,77],"./Scene.js":[189,9,77],"./SceneAdd":[190,9,92],"./SceneAdd.js":[190,9,92],"./SecuritySummary":[210,9,114],"./SecuritySummary.js":[210,9,114],"./ShortcutHero":[238,9,135],"./ShortcutHero.js":[238,9,135],"./SmallSlider":[131,9,0,152],"./SmallSlider.js":[131,9,0,152],"./SofaApp":[62,9],"./SofaApp.js":[62,9],"./SofaAppContent":[65,9],"./SofaAppContent.js":[65,9],"./SofaAvatarSlider":[182,9,0,139],"./SofaAvatarSlider.js":[182,9,0,139],"./SofaLogin":[67,9],"./SofaLogin.js":[67,9],"./SofaPage":[66,9],"./SofaPage.js":[66,9],"./SofaSlider":[112,9,0,153],"./SofaSlider.js":[112,9,0,153],"./SofaSnackbar":[253,9,115],"./SofaSnackbar.js":[253,9,115],"./SummaryLayout":[239,9,30],"./SummaryLayout.js":[239,9,30],"./SystemLayout":[240,9,67],"./SystemLayout.js":[240,9,67],"./ThermostatHero":[241,9,140],"./ThermostatHero.js":[241,9,140],"./ThermostatHistory":[242,9,2,6,28,130],"./ThermostatHistory.js":[242,9,2,6,28,130],"./ThermostatLayout":[243,9,0,66],"./ThermostatLayout.js":[243,9,0,66],"./ThermostatSummary":[211,9,154],"./ThermostatSummary.js":[211,9,154],"./ToggleAvatar":[54,9],"./ToggleAvatar.js":[54,9],"./ToggleButton":[146,9,155],"./ToggleButton.js":[146,9,155],"./ToggleChip":[141,9,142],"./ToggleChip.js":[141,9,142],"./TvHero":[244,9,0,16,76],"./TvHero.js":[244,9,0,16,76],"./ZoneHero":[245,9,116],"./ZoneHero.js":[245,9,116],"./ZoneLayout":[246,9,2,3,6,74],"./ZoneLayout.js":[246,9,2,3,6,74],"./automation/AutomationItemBase":[247,9,156],"./automation/AutomationItemBase.js":[247,9,156],"./automation/ScheduleDays":[162,9,141],"./automation/ScheduleDays.js":[162,9,141],"./automation/ScheduleInterval":[161,9,93],"./automation/ScheduleInterval.js":[161,9,93],"./automation/ScheduleItem":[195,9,117],"./automation/ScheduleItem.js":[195,9,117],"./automation/ScheduleStart":[160,9,80],"./automation/ScheduleStart.js":[160,9,80],"./automation/UnitButton":[153,9,143],"./automation/UnitButton.js":[153,9,143],"./automation/automationAction":[168,9,4,5,34],"./automation/automationAction.js":[168,9,4,5,34],"./automation/automationActionNew":[248,9,38],"./automation/automationActionNew.js":[248,9,38],"./automation/automationAdd":[196,9,94],"./automation/automationAdd.js":[196,9,94],"./automation/automationCondition":[169,9,31],"./automation/automationCondition.js":[169,9,31],"./automation/automationDetails":[173,9,2,3,118],"./automation/automationDetails.js":[173,9,2,3,118],"./automation/automationHeader":[193,9,2,3,63],"./automation/automationHeader.js":[193,9,2,3,63],"./automation/automationItem":[194,9,108],"./automation/automationItem.js":[194,9,108],"./automation/automationSave":[192,9,144],"./automation/automationSave.js":[192,9,144],"./automation/automationSchedule":[171,9,46],"./automation/automationSchedule.js":[171,9,46],"./automation/automationTitle":[172,9,157],"./automation/automationTitle.js":[172,9,157],"./automation/automationTrigger":[170,9,4,5,35],"./automation/automationTrigger.js":[170,9,4,5,35],"./automation/automationTriggerReal":[249,9,39],"./automation/automationTriggerReal.js":[249,9,39],"./automation/operatorButton":[152,9,145],"./automation/operatorButton.js":[152,9,145],"./camera/cameraDialog":[154,9,81],"./camera/cameraDialog.js":[154,9,81],"./camera/securitycamera":[163,9,49],"./camera/securitycamera.js":[163,9,49],"./controllers/BrightnessController":[134,9,0,78],"./controllers/BrightnessController.js":[134,9,0,78],"./controllers/ColorController":[135,9,1,82],"./controllers/ColorController.js":[135,9,1,82],"./controllers/ColorTemperatureController":[136,9,0,79],"./controllers/ColorTemperatureController.js":[136,9,0,79],"./controllers/EndpointHealth":[137,9,95],"./controllers/EndpointHealth.js":[137,9,95],"./controllers/PowerController":[138,9,72],"./controllers/PowerController.js":[138,9,72],"./controllers/StateController":[139,9,83],"./controllers/StateController.js":[139,9,83],"./controllers/properties/brightness":[123,9,0,8],"./controllers/properties/brightness.js":[123,9,0,8],"./controllers/properties/color":[115,9,1,19],"./controllers/properties/color.js":[115,9,1,19],"./controllers/properties/connectivity":[116,9,20],"./controllers/properties/connectivity.js":[116,9,20],"./controllers/properties/detectionState":[117,9,21],"./controllers/properties/detectionState.js":[117,9,21],"./controllers/properties/duration":[124,9,14],"./controllers/properties/duration.js":[124,9,14],"./controllers/properties/input":[118,9,22],"./controllers/properties/input.js":[118,9,22],"./controllers/properties/onLevel":[125,9,0,9],"./controllers/properties/onLevel.js":[125,9,0,9],"./controllers/properties/powerLevel":[126,9,0,10],"./controllers/properties/powerLevel.js":[126,9,0,10],"./controllers/properties/powerState":[119,9,23],"./controllers/properties/powerState.js":[119,9,23],"./controllers/properties/pressState":[120,9,24],"./controllers/properties/pressState.js":[120,9,24],"./controllers/properties/surround":[121,9,25],"./controllers/properties/surround.js":[121,9,25],"./controllers/properties/targetSetpoint":[127,9,0,11],"./controllers/properties/targetSetpoint.js":[127,9,0,11],"./controllers/properties/targetTemperature":[128,9,0,12],"./controllers/properties/targetTemperature.js":[128,9,0,12],"./controllers/properties/thermostatMode":[122,9,26],"./controllers/properties/thermostatMode.js":[122,9,26],"./controllers/properties/time":[129,9,15],"./controllers/properties/time.js":[129,9,15],"./controllers/properties/volume":[130,9,0,13],"./controllers/properties/volume.js":[130,9,0,13],"./deviceSelect/Device":[143,9,5,133],"./deviceSelect/Device.js":[143,9,5,133],"./deviceSelect/deviceExpand":[166,9,42],"./deviceSelect/deviceExpand.js":[166,9,42],"./deviceSelect/deviceExpandActions":[155,9,120],"./deviceSelect/deviceExpandActions.js":[155,9,120],"./deviceSelect/deviceExpandEvents":[157,9,121],"./deviceSelect/deviceExpandEvents.js":[157,9,121],"./deviceSelect/deviceExpandProperties":[156,9,122],"./deviceSelect/deviceExpandProperties.js":[156,9,122],"./deviceSelect/deviceSelect":[250,9,37],"./deviceSelect/deviceSelect.js":[250,9,37],"./deviceSelect/sofaCategoryFilter":[215,9,58],"./deviceSelect/sofaCategoryFilter.js":[215,9,58],"./devices/Television":[213,9,0,16,91],"./devices/Television.js":[213,9,0,16,91],"./devices/TvRemote":[184,9,68],"./devices/TvRemote.js":[184,9,68],"./devices/Zone":[214,9,2,3,6,123],"./devices/Zone.js":[214,9,2,3,6,123],"./devices/receiver":[209,9,0,18,90],"./devices/receiver.js":[209,9,0,18,90],"./devices/statusLock":[206,9,124],"./devices/statusLock.js":[206,9,124],"./dialogs/PinDialog":[216,9,4,17],"./dialogs/PinDialog.js":[216,9,4,17],"./dialogs/SofaDialog":[144,9,4,167],"./dialogs/SofaDialog.js":[144,9,4,167],"./directives/SetBrightness":[251,9,0,138],"./directives/SetBrightness.js":[251,9,0,138],"./index":[60,9],"./index.css":[99,7],"./index.js":[60,9],"./layout/NewLayoutProvider":[16,9],"./layout/NewLayoutProvider.js":[16,9],"./light/Light":[159,9,0,1,44],"./light/Light.js":[159,9,0,1,44],"./light/LightSliderBrightness":[149,9,0,104],"./light/LightSliderBrightness.js":[149,9,0,104],"./light/LightSliderColor":[151,9,1,109],"./light/LightSliderColor.js":[151,9,1,109],"./light/LightSliderTemperature":[150,9,0,105],"./light/LightSliderTemperature.js":[150,9,0,105],"./logo.svg":[286,7,174],"./other/Computer":[175,9,96],"./other/Computer.js":[175,9,96],"./other/ComputerList":[203,9,84],"./other/ComputerList.js":[203,9,84],"./other/Device":[177,9,97],"./other/Device.js":[177,9,97],"./other/DeviceList":[205,9,85],"./other/DeviceList.js":[205,9,85],"./other/Mode":[176,9,98],"./other/Mode.js":[176,9,98],"./other/ModeList":[204,9,86],"./other/ModeList.js":[204,9,86],"./other/Shade":[174,9,73],"./other/Shade.js":[174,9,73],"./other/Sprinkler":[252,9,87],"./other/Sprinkler.js":[252,9,87],"./other/VirtualList":[202,9,69],"./other/VirtualList.js":[202,9,69],"./player/CoverDimmer":[165,9,168],"./player/CoverDimmer.js":[165,9,168],"./player/NoPlayer":[208,9,148],"./player/NoPlayer.js":[208,9,148],"./player/PlayerArtOverlay":[178,9,125],"./player/PlayerArtOverlay.js":[178,9,125],"./player/PlayerArtOverlayButtons":[179,9,64],"./player/PlayerArtOverlayButtons.js":[179,9,64],"./player/PlayerBase":[164,9,99],"./player/PlayerBase.js":[164,9,99],"./player/PlayerCard":[207,9,0,7,45],"./player/PlayerCard.js":[207,9,0,7,45],"./player/PlayerCover":[181,9,7,169],"./player/PlayerCover.js":[181,9,7,169],"./player/PlayerVolume":[180,9,0,106],"./player/PlayerVolume.js":[180,9,0,106],"./serviceWorker":[69,9],"./serviceWorker.js":[69,9],"./theme/SofaTheme":[61,9],"./theme/SofaTheme.js":[61,9],"./theme/sofaThemeDark":[34,9],"./theme/sofaThemeDark.js":[34,9],"./theme/sofaThemeLight":[33,9],"./theme/sofaThemeLight.js":[33,9],"./thermostat/TemperatureSensor":[183,9,170],"./thermostat/TemperatureSensor.js":[183,9,170],"./thermostat/Thermostat":[212,9,0,107],"./thermostat/Thermostat.js":[212,9,0,107],"./user/UserProvider":[68,9],"./user/UserProvider.js":[68,9]};function o(e){if(!r.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],o=t[0];return Promise.all(t.slice(2).map(r.e)).then((function(){return r.t(o,t[1])}))}o.keys=function(){return Object.keys(n)},o.id=266,e.exports=o},33:function(e,t,r){"use strict";r.r(t);var n=r(76),o=r(27),a=r.n(o),i=r(28),s=r.n(i);t.default=Object(n.a)({palette:{primary:{light:a.a[300],main:a.a[500],dark:a.a[700]},secondary:{light:s.a[300],main:s.a[500],dark:s.a[700]},background:{page:"#eee",hover:"rgba(255, 87, 34, 0.1)"},type:"light"}})},34:function(e,t,r){"use strict";r.r(t);var n=r(76),o=r(27),a=r.n(o),i=r(28),s=r.n(i);t.default=Object(n.a)({direction:"ltr",palette:{primary:{light:a.a[300],main:a.a[500],dark:a.a[700]},secondary:{light:s.a[300],main:s.a[500],dark:s.a[700]},text:{primary:"#c0c0c0"},background:{default:"#000",page:"#111",hover:"rgba(188, 54, 12, 0.1)",paper:"#222"},type:"dark"}})},41:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return p}));var n=r(0),o=r.n(n),a=r(23),i=r(54),s=r(107),c=r(22),l=r(52),u=r(105),d=r.n(u);function p(e){return o.a.createElement(a.default,{wide:e.wide},o.a.createElement(s.a,null,o.a.createElement(c.a,null,o.a.createElement(i.default,{avatarState:"open"},o.a.createElement(d.a,null)),o.a.createElement(l.a,{primary:e.name,secondary:e.message})),o.a.createElement(c.a,null,o.a.createElement(l.a,{primary:"Reload",onClick:function(){return"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})),void window.location.reload(!0)}}))))}},50:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return a})),r.d(t,"AlexaController",(function(){return i})),r.d(t,"AlexaControllerProperty",(function(){return s}));var n=r(39),o=r(40),a=function(){function e(t){Object(n.a)(this,e),this.endpointId=t.endpointId,this.friendlyName=t.friendlyName,this.manufacturerName=t.manufacturerName,this.description=t.description,this.displayCategories=t.displayCategories,this.interfaces=[],this.interfaceobjects=[];for(var r=0;r<t.capabilities.length;r++){var o=t.capabilities[r].interface.split(".")[1];t.capabilities[r].hasOwnProperty("instance")&&(o=t.capabilities[r].instance.split(".")[1]),t.capabilities[r].interface.split(".")[1]&&!this.interfaces.includes(o)&&(this[o]=new i(this,t.capabilities[r]),this.interfaces.push(o),this.interfaceobjects.push(this[o]))}}return Object(o.a)(e,[{key:"hasData",value:function(){for(var e in this.interfaceobjects)for(var t in e.propertyobjects)if(null===t.value)return console.log("device is missing data",this.endpointId,this.friendlyName,e.controller,t),!1;return!0}},{key:"newtoken",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return((15&(e^crypto.getRandomValues(new Uint8Array(1))[0]))>>e/4).toString(16)}))}},{key:"responseHandler",value:function(e){if(e.hasOwnProperty("context"))for(var t=0;t<e.context.properties.length;t++){var r=e.context.properties[t],n=r.namespace.split(".")[1];r.hasOwnProperty("instance")&&(n=r.instance.split(".")[1]),this[n][r.name].value=r.value,this[n][r.name].timeOfSample=r.timeOfSample}return e}},{key:"properties",value:function(){for(var e=[],t=0;t<this.interfaces.length;t++)e=e.concat(this[this.interfaces[t]].properties);return e}},{key:"controllerForProperty",value:function(e){for(var t=0;t<this.interfaces.length;t++)if(this[this.interfaces[t]].properties.includes(e))return this.interfaces[t];return""}}]),e}(),i=function(){function e(t,r){if(Object(n.a)(this,e),this.device=t,this.namespace=r.interface.split(".")[0],this.controller=r.interface.split(".")[1],this.properties=[],this.propertyobjects=[],r.hasOwnProperty("configuration")&&(this.configuration=r.configuration),r.hasOwnProperty("inputs")&&(this.inputs=r.inputs),r.hasOwnProperty("instance")&&(this.instance=r.instance),r.hasOwnProperty("capabilityResources")&&(this.capabilityResources=r.capabilityResources),r.hasOwnProperty("properties")&&r.properties.hasOwnProperty("supported"))for(var o=0;o<r.properties.supported.length;o++)this[r.properties.supported[o].name]=new s,this.properties.push(r.properties.supported[o].name),this.propertyobjects.push(this[r.properties.supported[o].name])}return Object(o.a)(e,[{key:"directive",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o="https://"+window.location.hostname,a={name:e,namespace:this.namespace+"."+this.controller,payloadVersion:"3",messageId:this.device.newtoken(),correlationToken:this.device.newtoken()};this.hasOwnProperty("instance")&&(a.instance=this.instance);var i={endpointId:this.device.endpointId,cookie:n,scope:{type:"BearerToken",token:"sofa-interchange-token"}},s={directive:{header:a,endpoint:i,payload:r}};return console.log("Sending device-based alexa command:",s),fetch(o+"/directive",{withCredentials:!0,credentials:"include",method:"post",body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){return t.device.responseHandler(e)})).then((function(e){return e}))}}]),e}(),s=function(){function e(){Object(n.a)(this,e),this.value=null}return Object(o.a)(e,[{key:"deepvalue",get:function(){return this.value?this.value.hasOwnProperty("value")?this.value.value:this.value:null}}]),e}()},53:function(e,t,r){"use strict";r.r(t),r.d(t,"DataContext",(function(){return l})),r.d(t,"deviceReducer",(function(){return d})),r.d(t,"default",(function(){return p}));var n=r(6),o=r(56),a=r(0),i=r.n(a),s=r(11),c=r(50),l=Object(a.createContext)();function u(){try{return JSON.parse(localStorage.getItem("devices"))}catch(e){}return{}}var d=function(e,t){if(t==={})return e;if(!t.hasOwnProperty("event"))return e;var r=0,n=Object(o.a)({},e),a="",i="";switch(t.event.header.name){case"DeleteReport":for(r=0;r<t.event.payload.endpoints.length;r++)t.event.payload.endpoints[r].endpointId in n&&delete n[t.event.payload.endpoints[r].endpointId];return n;case"AddOrUpdateReport":var s=u();for(s||(s={}),r=0;r<t.event.payload.endpoints.length;r++)s[t.event.payload.endpoints[r].endpointId]=t.event.payload.endpoints[r],n[t.event.payload.endpoints[r].endpointId]=new c.default(t.event.payload.endpoints[r]);return localStorage.setItem("devices",JSON.stringify(s)),n;case"Multistate":for(var l in t.state)if(l in n)for(r=0;r<t.state[l].context.properties.length;r++)i=(a=t.state[l].context.properties[r]).namespace.split(".")[1],a.hasOwnProperty("instance")&&(i=a.instance.split(".")[1]),n[l][i][a.name].value=a.value,n[l][i][a.name].timeOfSample=a.timeOfSample;return n;case"ChangeReport":if(t.event.endpoint.endpointId in n){for(r=0;r<t.event.payload.change.properties.length;r++)i=(a=t.event.payload.change.properties[r]).namespace.split(".")[1],a.hasOwnProperty("instance")&&(i=a.instance.split(".")[1]),n[t.event.endpoint.endpointId][i][a.name].value=a.value,n[t.event.endpoint.endpointId][i][a.name].timeOfSample=a.timeOfSample;for(r=0;r<t.context.properties.length;r++)i=(a=t.context.properties[r]).namespace.split(".")[1],a.hasOwnProperty("instance")&&(i=a.instance.split(".")[1]),n[t.event.endpoint.endpointId][i][a.name].value=a.value,n[t.event.endpoint.endpointId][i][a.name].timeOfSample=a.timeOfSample}return n;default:return e}};function p(e){var t=Object(a.useContext)(s.NetworkContext),r=t.getJSON,o=t.postJSON,p=t.connectError,m=t.loggedIn,f=t.addSubscriber,h=function(){var e={},t=u();for(var r in t)e[t[r].endpointId]=new c.default(t[r]);return e}(),v=Object(a.useState)({}),g=Object(n.a)(v,2),y=g[0],j=g[1],b=Object(a.useState)({}),S=Object(n.a)(b,2),O=S[0],w=S[1],C=Object(a.useState)({}),E=Object(n.a)(C,2),x=E[0],k=E[1],L=Object(a.useState)("Main"),P=Object(n.a)(L,2),T=P[0],A=P[1],N=Object(a.useReducer)(d,h),D=Object(n.a)(N,2),H=D[0],B=D[1],I=Object(a.useState)("sonos:player:RINCON_B8E937ECE1F001400"),R=Object(n.a)(I,2),M=R[0],W=R[1],F=Object(a.useState)(""),G=Object(n.a)(F,2),U=G[0],z=G[1];function J(e){return"OK"===e.EndpointHealth.connectivity.value.value}function V(e,t){e||(e="ALL"),Array.isArray(e)||(e=[e]);for(var r=[],n=0;n<e.length;n++){var o=e[n];for(var a in H)(H[a].displayCategories.includes(o)||"ALL"===o)&&(t&&!H[a].friendlyName.toLowerCase().includes(t.toLowerCase())||H[a].hasData()&&r.push(H[a]))}return r.sort((function(e,t){var r=e.friendlyName.toLowerCase(),n=t.friendlyName.toLowerCase();return r<n?-1:r>n?1:0})),r}return Object(a.useEffect)((function(){}),[H]),Object(a.useEffect)((function(){console.log("logged in changed to",m),!0===m&&(f(B),r("directives").then((function(e){return w(e)})),r("properties").then((function(e){return j(e)})),r("list/logic/virtualDevices").then((function(e){return k(e)})))}),[m]),i.a.createElement(l.Provider,{value:{devices:H,virtualDevices:x,directives:O,controllerProperties:y,deviceByEndpointId:function(e){if(e in H)return H[e]},deviceByFriendlyName:function(e){for(var t in H)if(H[t].friendlyName===e)return H[t]},devicesByFriendlyName:function(e){var t=[];for(var r in H)(""===e||H[r].friendlyName.includes(e))&&t.push(H[r]);return t.sort((function(e,t){var r=e.friendlyName.toLowerCase(),n=t.friendlyName.toLowerCase();return r<n?-1:r>n?1:0})),t},devicesByCategory:V,devicesByController:function(e,t){if(!e)return[];Array.isArray(e)||(e=[e]);for(var r=[],n=0;n<e.length;n++){var o=e[n];for(var a in H)H[a].interfaces.includes(o)&&(t&&!H[a].friendlyName.toLowerCase().includes(t.toLowerCase())||H[a].hasData()&&r.push(H[a]))}return r.sort((function(e,t){var r=e.friendlyName.toLowerCase(),n=t.friendlyName.toLowerCase();return r<n?-1:r>n?1:0})),r},propertyNamesFromDevice:function(e){for(var t=[],r=0;r<e.capabilities.length;r++)t.push(e.capabilities[r].interface);return t},isReachable:J,sortByName:function(e){return e.sort((function(e,t){var r=e.friendlyName.toLowerCase(),n=t.friendlyName.toLowerCase();return r<n?-1:r>n?1:0})),e},getChangeTimesForDevices:function(e,t){for(var r=[],n=0;n<t.length;n++)r.push(t[n].endpointId);return o("list/influx/last/"+e,r).then((function(e){return e}))},getHistoryForDevice:function(e,t,n){var o="list/influx/history/"+e+"/"+t;return n&&(o=o+"/"+n),r(o)},setArea:A,area:T,lightCount:function(e){var t=0,r=V("LIGHT");for(var n in r)"all"===e.toLowerCase()?t+=1:"off"===e.toLowerCase()?"OFF"!==r[n].PowerController.powerState.value&&J(r[n])||(t+=1):"on"===e.toLowerCase()&&"ON"===r[n].PowerController.powerState.value&&J(r[n])&&(t+=1);return t},defaultPlayer:M,setDefaultPlayer:W,userPlayer:U,setUserPlayer:z,getModes:function(e){for(var t={},r=0;r<e.interfaces.length;r++)if("ModeController"===e[e.interfaces[r]].controller){for(var n=e[e.interfaces[r]],o=n.capabilityResources.friendlyNames[0].value.text,a=[],i=0;i<n.configuration.supportedModes.length;i++)a[n.configuration.supportedModes[i].value]=n.configuration.supportedModes[i].modeResources.friendlyNames[0].value.text;t[o]=a}return t},loggedIn:m,connectError:p}},e.children)}},54:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return p}));var n=r(0),o=r.n(n),a=r(29),i=r(70),s=r.n(i),c=r(271),l=r(275),u=Object(a.a)((function(e){return{off:{color:e.palette.primary.contrastText},on:{color:e.palette.primary.contrastText,background:e.palette.primary.main},notready:{color:e.palette.primary.contrastText,backgroundColor:"#bbb"},closed:{color:e.palette.primary.contrastText,backgroundColor:"#6a6"},open:{color:e.palette.primary.contrastText,backgroundColor:"#e66"},cool:{color:e.palette.primary.contrastText,backgroundColor:"#00796B"},mid:{color:e.palette.primary.contrastText,backgroundColor:"#558B2F"},hot:{color:e.palette.primary.contrastText,backgroundColor:"#E65100"},none:{color:e.palette.primary.dark,padding:"0 8px",fontSize:20}}})),d=Object(a.a)((function(e){return{normal:{color:e.palette.primary.main},off:{color:e.palette.text.disabled},on:{color:e.palette.primary.main},notready:{color:"#bbb"},closed:{color:"#6a6"},open:{color:"#e66"},cool:{color:"#00796B"},mid:{color:"#558B2F"},hot:{color:"#E65100"},base:{padding:"0 8px",fontSize:20}}}));function p(e){var t=u(),r=d();return o.a.createElement(c.a,{onClick:e.onClick,className:e.noback?s()(r.base,r[e.avatarState]):""},e.noback?o.a.createElement(o.a.Fragment,null,e.children):o.a.createElement(l.a,{className:t[e.avatarState],onClick:e.onClick},e.children))}},60:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),a=r(8),i=r.n(a),s=(r(99),r(62)),c=r(69);i.a.render(o.a.createElement(s.default,null),document.getElementById("root")),c.register()},61:function(e,t,r){"use strict";r.r(t),r.d(t,"ThemeContext",(function(){return u})),r.d(t,"default",(function(){return d})),r.d(t,"withThemeChange",(function(){return p}));var n=r(6),o=r(0),a=r.n(o),i=r(33),s=r(34),c=r(274),l=r(109),u=a.a.createContext();function d(e){var t=Object(o.useState)(""),r=Object(n.a)(t,2),d=r[0],p=r[1],m=Object(o.useState)({}),f=Object(n.a)(m,2),h=f[0],v=f[1];function g(){if(h.hasOwnProperty("palette"))return h;var e=(new Date).getHours();return e>17||e<8?s.default:i.default}return Object(o.useEffect)((function(){var e=(new Date).getHours();e>17||e<8?(p("dark"),v(s.default)):(p("light"),v(i.default))}),[]),a.a.createElement(u.Provider,{value:{colorScheme:d,sofaTheme:h,applyTheme:function(e){return"dark"===e?(p("dark"),v(s.default),s.default):"light"===e?(p("light"),v(i.default),i.default):g()},getTheme:g}},a.a.createElement(c.a,{theme:g()},a.a.createElement(l.a,null),e.children))}function p(e){return function(t){return a.a.createElement(u.Consumer,null,(function(r){return a.a.createElement(e,Object.assign({},t,r,{context:r,colorScheme:r.colorScheme,sofaTheme:r.sofaTheme,applyTheme:r.applyTheme}))}))}}},62:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return h}));var n=r(6),o=r(0),a=r.n(o),i=r(63),s=r(65),c=r(19),l=r(109),u=r(53),d=r(16),p=r(68),m=r(61),f=r(11);function h(e){var t=Object(o.useState)(!1),r=Object(n.a)(t,2),h=r[0],v=r[1],g=Object(o.useState)(window.innerWidth),y=Object(n.a)(g,2),j=y[0],b=y[1],S=j<=800;function O(){b(window.innerWidth)}return Object(o.useEffect)((function(){window.addEventListener("resize",O)}),[]),a.a.createElement(m.default,null,a.a.createElement(f.default,null,a.a.createElement(p.default,null,a.a.createElement(d.LayoutProvider,null,a.a.createElement(u.default,null,a.a.createElement(i.default,{open:function(){v(!h)},mobile:S}),a.a.createElement(c.default,null,a.a.createElement(s.default,null))),a.a.createElement(l.a,null)))))}},63:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return y}));var n=r(0),o=r.n(n),a=r(29),i=r(16),s=r(11),c=r(104),l=r.n(c),u=r(94),d=r.n(u),p=r(95),m=r.n(p),f=r(103),h=r.n(f),v=r(82),g=Object(a.a)((function(e){return{list:{minWidth:320},flex:{flex:1},menuButton:{marginLeft:-12,marginRight:20},desktopTop:{paddingTop:"env(safe-area-inset-top)"},phoneTop:{paddingTop:"env(safe-area-inset-top)",height:2},fab:{position:"fixed",bottom:16,right:16,marginBottom:"env(safe-area-inset-bottom)",zIndex:1200},fabBack:{position:"fixed",bottom:24,right:80,padding:0,marginBottom:"env(safe-area-inset-bottom)",boxSizing:"content-box",zIndex:1200}}}));function y(e){var t=g(),r=Object(n.useContext)(i.LayoutContext),a=r.applyLayoutCard,c=r.masterButtonState,u=r.goBack,p=r.goHome,f=r.backPage,y=Object(n.useContext)(s.NetworkContext),j=y.loggedIn,b=y.connectError;return!1===j||b?o.a.createElement(v.a,{className:t.fab,color:"primary",onClick:function(){return"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})),void window.location.reload(!0)}},o.a.createElement(h.a,null)):o.a.createElement(o.a.Fragment,null,o.a.createElement(v.a,{className:t.fab,color:"primary",onClick:function(){return"Home"===c&&p(),void("System"===c&&a("SystemLayout"))}},"System"===c&&o.a.createElement(l.a,null),"Home"===c&&o.a.createElement(d.a,null)),f.name&&o.a.createElement(v.a,{size:"small",color:"primary",onClick:function(){return u()},className:t.fabBack},o.a.createElement(m.a,null)))}},64:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(0),o=r.n(n),a=r(23);function i(e){return o.a.createElement(a.default,{wide:!0,nopaper:!0})}},65:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return g}));var n=r(0),o=r.n(n),a=r(16),i=r(11),s=r(29),c=r(36),l=r(19),u=r(66),d=r(22),p=r(52),m=r(46),f=r(67),h=r(41),v=Object(s.a)({controlArea:{margin:"8px auto",maxWidth:1440,boxSizing:"border-box",overflowY:"auto",width:"100%"},mobileControlArea:{margin:"8px auto",maxWidth:600,width:"100%",marginTop:"env(safe-area-inset-top)",paddingTop:8,boxSizing:"border-box",overflowY:"auto",minHeight:"100%",alignContent:"flex-start"},version:{paddingLeft:16,opacity:"0.5"}});function g(e){var t=Object(n.useContext)(a.LayoutContext),r=t.layout,s=t.isMobile,g=t.renderSuspenseModule,y=Object(n.useContext)(i.NetworkContext),j=y.connectError,b=y.streamError,S=y.loggedIn,O=v();return S?o.a.createElement(c.a,{container:!0,spacing:s&&"single"===r.data.type?2:8,className:s?O.mobileControlArea:O.controlArea},"pages"===r.data.type&&(!s||r.page||void 0===r.data.mobile)&&o.a.createElement(l.default,{wide:e.wide},r.data.order.map((function(e){return void 0!==r.page&&e!==r.page&&s?null:o.a.createElement(u.default,{key:e,name:e,page:r.data.pages[e]})}))),"single"===r.data.type&&o.a.createElement(l.default,{wide:e.wide},g(r.name,r.props)),"pages"===r.data.type&&s&&void 0!==r.data.mobile&&o.a.createElement(l.default,{wide:e.wide},g(r.page?r.page:r.data.mobile,r.props)),(b||j)&&o.a.createElement(c.a,{container:!0,spacing:2,className:s?O.mobileControlArea:O.controlArea},o.a.createElement(d.a,null,o.a.createElement(p.a,{primary:"Network not ready",secondary:b?"Server Side Event Stream not connected":null}))),o.a.createElement(m.a,{className:O.version,variant:"caption"},"2.2.14")):o.a.createElement(o.a.Fragment,null,j&&o.a.createElement(h.default,null),o.a.createElement(c.a,{container:!0,spacing:2,justify:"center",alignItems:"center",className:s?O.mobileControlArea:O.controlArea},o.a.createElement(f.default,null)))}},66:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return m}));var n=r(0),o=r.n(n),a=r(29),i=r(16),s=r(36),c=r(19),l=r(272),u=r(22),d=r(52),p=Object(a.a)((function(e){return{gridColumn:{margin:1,overflowX:"hidden",overflowY:"hidden",alignContent:"start",padding:"3px !important",backgroundColor:e.palette.background.page,borderRadius:"4px 4px 4px 4px",maxWidth:"33%"},mobileGridColumn:{margin:1,overflowX:"hidden",overflowY:"hidden",alignContent:"start",padding:"3px !important",backgroundColor:e.palette.background.page,borderRadius:"4px 4px 4px 4px"},paddedToolbar:{paddingBottom:"env(safe-area-inset-bottom)",marginBottom:"env(safe-area-inset-bottom)"}}}));function m(e){var t=p(),r=Object(n.useContext)(i.LayoutContext),a=r.isMobile,m=r.renderSuspenseModule;return o.a.createElement(s.a,{container:!0,item:!0,spacing:1,key:e.name,xs:a?12:4,className:a?t.mobileGridColumn:t.gridColumn},o.a.createElement(u.a,null,o.a.createElement(d.a,{primary:e.name})),e.page.map((function(t,r){return o.a.createElement(c.default,{wide:!0,key:e.name+r},m(t.module,t.props))})),a&&o.a.createElement(l.a,{className:t.paddedToolbar}))}},67:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return v}));var n=r(6),o=r(0),a=r.n(o),i=r(11),s=r(29),c=r(36),l=r(23),u=r(22),d=r(52),p=r(108),m=r(273),f=r(46),h=Object(s.a)({loginBox:{marginTop:"30%",margin:"auto"},controlArea:{height:"90%",margin:"8px auto",maxWidth:1440,boxSizing:"border-box",overflowY:"auto",width:"100%"},form:{width:"100%"}});function v(e){var t=Object(o.useContext)(i.NetworkContext),r=t.login,s=t.getCookie,v=Object(o.useState)(s("user")),g=Object(n.a)(v,2),y=g[0],j=g[1],b=Object(o.useState)(""),S=Object(n.a)(b,2),O=S[0],w=S[1],C=Object(o.useState)(""),E=Object(n.a)(C,2),x=E[0],k=E[1],L=h();function P(){r(y,O).then((function(e){return function(e){console.log("resulting token",e),e?(k(""),window.location.replace(window.location)):k("Incorrect credentials")}(e)}))}return a.a.createElement(c.a,{container:!0,spacing:2,justify:"center",alignItems:"center",className:L.controlArea},a.a.createElement(l.default,{wide:e.wide,className:L.loginBox},a.a.createElement(u.a,{style:{display:"flex",justifyContent:"center"}},a.a.createElement(f.a,{variant:"h6"},"Sofa Login")),a.a.createElement(u.a,null,a.a.createElement(p.a,{fullWidth:!0,variant:"outlined",onChange:function(e){return j(e.target.value)},value:y,id:"user",label:"User",type:"mail"})),a.a.createElement(u.a,null,a.a.createElement(p.a,{fullWidth:!0,variant:"outlined",onChange:function(e){return w(e.target.value)},onKeyDown:function(e){13===e.keyCode&&P()},id:"password",label:"Password",type:"password",defaultValue:""})),a.a.createElement(u.a,null,a.a.createElement(d.a,{primary:x})),a.a.createElement(u.a,{style:{display:"flex",justifyContent:"center"}},a.a.createElement(m.a,{fullWidth:!0,onClick:function(){return P()}},"Login"))))}},68:function(e,t,r){"use strict";r.r(t),r.d(t,"UserContext",(function(){return i})),r.d(t,"default",(function(){return s}));var n=r(6),o=r(0),a=r.n(o),i=Object(o.createContext)();function s(e){var t=Object(o.useState)(""),r=Object(n.a)(t,2),s=r[0],c=r[1];return a.a.createElement(i.Provider,{value:{userPlayer:s,setUserPlayer:c}},e.children)}},69:function(e,t,r){"use strict";r.r(t),r.d(t,"register",(function(){return o})),r.d(t,"unregister",(function(){return i}));var n=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function o(e){if("serviceWorker"in navigator){if(new URL("/client",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/client","/service-worker.js");n?(!function(e,t){fetch(e).then((function(r){var n=r.headers.get("content-type");404===r.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):a(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):a(t,e)}))}}function a(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var r=e.installing;null!=r&&(r.onstatechange=function(){"installed"===r.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}function i(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},99:function(e,t,r){}},[[258,172,173]]]);
//# sourceMappingURL=main.03eb3433.chunk.js.map