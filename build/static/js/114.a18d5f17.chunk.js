(this["webpackJsonpsofa-client"]=this["webpackJsonpsofa-client"]||[]).push([[114,185,187],{121:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return f}));var n=a(6),r=a(0),o=a.n(r),i=a(32),c=a(16),l=a(41),u=a.n(l),m=a(40),s=a(115),d=a(25),p=a(59),b=Object(i.a)((function(e){return{base:{margin:1,overflowX:"hidden",alignContent:"start",padding:"3px !important",borderRadius:"4px 4px 4px 4px"},gridColumn:{overflowY:"hidden"},scrollColumn:{overflowY:"auto",maxHeight:"100%"},mobile:{height:16},desktop:{},background:{backgroundColor:e.palette.layer.section},center:{justifyContent:"center"}}}));function f(e){var t=Object(r.useContext)(c.LayoutContext).isMobile,a=b(),i=Object(r.useState)(e.show),l=Object(n.a)(i,2),f=l[0],g=l[1];return o.a.createElement(m.a,{container:!0,item:!0,spacing:1,key:e.name,xs:e.xs,className:u()(a.base,e.scroll?a.scrollColumn:a.gridColumn,e.background?a.background:null)},e.name&&o.a.createElement(m.a,{item:!0,xs:12,className:a.nopad},o.a.createElement(s.a,{className:a.nopad},o.a.createElement(d.a,{className:t?a.mobile:a.desktop},o.a.createElement(p.a,{primary:e.name,onClick:function(){return g(!f)}}),(!t||!e.break)&&o.a.createElement(o.a.Fragment,null,e.secondary)),t&&e.break&&o.a.createElement(d.a,{className:a.center},e.secondary))),f&&e.children)}f.defaultProps={break:!1,show:!0,scroll:!1,xs:12,background:!0}},174:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return v}));var n=a(6),r=a(0),o=a.n(r),i=a(32),c=a(436),l=a(468),u=a.n(l),m=a(366),s=a.n(m),d=a(467),p=a.n(d),b=a(316),f=a(94),g=Object(i.a)({bigcamDialog:{backgroundColor:"#222",paddingTop:"env(safe-area-inset-top)",paddingBottom:"env(safe-area-inset-bottom)",minWidth:"320px",boxSizing:"border-box"},root:{backgroundColor:"#111"},paper:{backgroundColor:"#111",boxShadow:"none",overflow:"hidden"},bigcamPaper:{margin:"auto 4px",maxHeight:"100%",display:"flex"},bigcam:{width:"100%",height:"auto !important",maxWidth:"100%",maxHeight:"100%",background:"#222",opacity:"1.0",margin:"auto auto",padding:0,borderRadius:4},bigcamRotated:{position:"absolute",top:0,left:0,height:"100vw",maxWidth:"initial",padding:0,margin:"auto auto",marginTop:"calc((100vh - 100vw) / 2.5)",marginLeft:"calc((100vw * -1) /2.5) !important",borderRadius:4},rotatebutton:{zIndex:2e3,position:"absolute",top:16,right:72},ratebutton:{zIndex:2e3,position:"absolute",top:16,right:190},closebutton:{zIndex:2e3,position:"absolute",top:16,right:16}}),h=window.Hls;function v(e){var t=g(),a=Object(r.useState)(0),i=Object(n.a)(a,2),l=i[0],m=i[1],d=Object(r.useState)(""),v=Object(n.a)(d,2),E=v[0],C=v[1],w=Object(r.useRef)(null);function y(){document.querySelector("meta[name=viewport]").setAttribute("content","viewport-fit=cover, width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes")}function x(t){document.querySelector("meta[name=viewport]").setAttribute("content","viewport-fit=cover, width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"),e.close()}return Object(r.useEffect)((function(){y()}),[]),Object(r.useEffect)((function(){e.directive(e.camera.endpointId,"CameraStreamController","InitializeCameraStreams",{cameraStreams:[{protocol:"HLS",resolution:{width:640,height:480},authorizationType:"BASIC",videoCodec:"H264",audioCodec:"AAC"}]}).then((function(e){return C(e.payload.cameraStreams[0].uri)}))}),[e.camera]),Object(r.useEffect)((function(){if(console.log("uri update",E),y(),e.live&&window.Hls.isSupported()){var t=new h;t.loadSource(E),t.attachMedia(w.current),t.on(h.Events.MANIFEST_PARSED,(function(){w.current.play()}))}}),[E,e.live]),o.a.createElement(c.a,{fullScreen:!0,open:e.show,onClose:function(){return x()},className:t.bigcamDialog,PaperProps:{classes:{root:t.paper}}},!e.live&&o.a.createElement(f.a,{size:"medium","aria-label":"Rate",className:t.ratebutton,onClick:function(){return e.changeInterval()}},o.a.createElement(p.a,null),e.refreshInterval/1e3),o.a.createElement(f.a,{size:"medium",color:"primary","aria-label":"Close",className:t.closebutton,onClick:function(){return x()}},o.a.createElement(s.a,null)),o.a.createElement(f.a,{size:"medium","aria-label":"Rotate",className:t.rotatebutton,onClick:function(){return m(90!==l?90:0),void console.log("set rotate to ",l)}},o.a.createElement(u.a,null)),o.a.createElement(b.a,{className:t.bigcamPaper},e.live?o.a.createElement("video",{controls:!0,muted:!0,autoPlay:!0,playsInline:!0,id:"video",className:l>0?t.bigcamRotated:t.bigcam,style:{transform:"rotate(".concat(l,"deg)")},ref:w},o.a.createElement("source",{src:E,type:"application/x-mpegURL"})):o.a.createElement("img",{alt:e.camera.friendlyName,className:l>0?t.bigcamRotated:t.bigcam,style:{transform:"rotate(".concat(l,"deg)")},src:e.src})))}},185:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return E}));var n=a(6),r=a(0),o=a.n(r),i=a(16),c=a(32),l=a(430),u=a(367),m=a(448),s=a.n(m),d=a(449),p=a.n(d),b=a(402),f=a.n(b),g=a(174),h=a(27),v=Object(c.a)({nextbutton:{position:"absolute",top:"40%",right:8},prevbutton:{position:"absolute",top:"40%",left:8},gridbutton:{position:"absolute",left:8,bottom:8},newgridbutton:{position:"absolute",right:8,bottom:8},im:{width:"100%",height:"auto",borderRadius:4,display:"flex"},hiddenimage:{height:0,display:"none"},hidden:{borderRadius:4,position:"relative",width:"100%",paddingTop:"56.25%"},spinner:{position:"absolute",margin:"auto",top:0,left:0,right:0,bottom:0}});function E(e){var t=v(),a=Object(r.useContext)(i.LayoutContext),c=a.isMobile,m=a.applyLayoutCard,d=[1e3,500,5e3,3e3],b=Object(r.useState)(!1),E=Object(n.a)(b,2),C=E[0],w=E[1],y=Object(r.useState)(!1),x=Object(n.a)(y,2),j=x[0],O=x[1],S=Object(r.useState)(3e3),k=Object(n.a)(S,2),N=k[0],I=k[1],R=Object(r.useState)(""),z=Object(n.a)(R,2),A=z[0],H=z[1],L=Object(r.useState)(""),P=Object(n.a)(L,2),D=P[0],M=P[1],T=Object(r.useState)(!1),B=Object(n.a)(T,2),F=B[0],U=B[1];return function(e,t){var a=Object(r.useRef)();Object(r.useEffect)((function(){a.current=e}),[e]),Object(r.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){A&&M(A+"?time="+Date.now())}),N),Object(r.useEffect)((function(){e.camera&&F!==e.camera.endpointId&&(U(e.camera.endpointId),e.directive(e.camera.endpointId,"CameraStreamController","InitializeCameraStreams",{cameraStreams:[{protocol:"HLS",resolution:{width:640,height:480},authorizationType:"BASIC",videoCodec:"H264",audioCodec:"AAC"}]}).then((function(e){return M((t=e).payload.imageUri+"?time="+Date.now()),void H(t.payload.imageUri);var t})))}),[e.camera,F]),o.a.createElement(h.default,{wide:e.wide,nopad:!0,noMargin:e.top,thinmargin:c},A&&o.a.createElement("img",{className:C?t.im:t.hiddenimage,src:D,onLoad:function(){C||w(!0)},onClick:function(){O(!0)},alt:e.camera.friendlyName+" Security Camera"}),C?o.a.createElement(o.a.Fragment,null,e.prevCamera&&o.a.createElement(u.a,{color:"primary",className:t.prevbutton,onClick:function(){return e.prevCamera()}},o.a.createElement(s.a,null)),e.nextCamera&&o.a.createElement(u.a,{color:"primary",className:t.nextbutton,onClick:function(){return e.nextCamera()}},o.a.createElement(p.a,null)),e.selectButtons&&o.a.createElement(u.a,{color:"primary",className:t.newgridbutton,onClick:function(){return m("CameraLayout")}},o.a.createElement(f.a,null))):o.a.createElement("div",{className:t.hidden},o.a.createElement(l.a,{className:t.spinner,size:50})),j&&o.a.createElement(g.default,{directive:e.directive,live:!0,camera:e.camera,name:e.name,refreshInterval:N,changeInterval:function(){I(d.shift()),d.push(N)},show:j,close:function(){O(!1)},src:A}))}},221:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return l}));var n=a(0),r=a.n(n),o=a(32),i=a(40),c=Object(o.a)((function(e){return{oldbigcover:{width:"100%",maxHeight:480,position:"relative",padding:0,height:"auto",minHeight:100}}}));function l(e){var t=c(),a="https://"+window.location.hostname;return r.a.createElement(i.a,{item:!0,xs:4,className:t.songImageHolder},r.a.createElement("img",{className:t.bigcover,src:a+"/image/homekitcamera/qrcode/"+e.cameraId+"?width=1024",title:e.name,alt:e.name}),r.a.createElement("div",null,e.name))}},254:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return f}));var n=a(0),r=a.n(n),o=a(63),i=a(185),c=a(524),l=a.n(c),u=a(115),m=a(25),s=a(397),d=a(59),p=a(121),b=a(221);function f(e){var t=Object(n.useContext)(o.DataContext),a=t.deviceStatesByCategory,c=t.directive,f=a(["CAMERA"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.default,{name:"Cameras"},f.map((function(e){return r.a.createElement(i.default,{camera:e,key:e.endpointId,name:e.friendlyName,directive:c})}))),r.a.createElement(p.default,null,r.a.createElement(u.a,null,r.a.createElement(m.a,{button:!0,onClick:function(){window.open("https://unifi-video.dayton.tech:7443","_nvr")}},r.a.createElement(s.a,null,r.a.createElement(l.a,null)),r.a.createElement(d.a,{primary:"Unifi NVR"})))),r.a.createElement(p.default,{name:"QR Codes",show:!1},f.map((function(e){return r.a.createElement(b.default,{cameraId:e.endpointId,key:e.endpointId,name:e.friendlyName})}))))}}}]);
//# sourceMappingURL=114.a18d5f17.chunk.js.map