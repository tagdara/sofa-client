(this["webpackJsonpsofa-client"]=this["webpackJsonpsofa-client"]||[]).push([[207],{108:function(e,t,a){},12:function(e,t,a){"use strict";a.r(t),a.d(t,"useStream",(function(){return c})),a.d(t,"useApi",(function(){return l})),a.d(t,"NetworkContext",(function(){return u})),a.d(t,"default",(function(){return d}));var r=a(44),n=a(6),o=a(0),i=a.n(o),s="https://"+window.location.hostname,c=function(e){var t=Object(o.useState)(void 0),a=Object(n.a)(t,2),i=a[0],c=a[1],l=Object(o.useState)([]),u=Object(n.a)(l,2),d=u[0],p=u[1],f=Object(o.useState)(!1),m=Object(n.a)(f,2),v=m[0],h=m[1];var g=i?i.readyState:10,y=void 0!==i&&1===i.readyState;return Object(o.useEffect)((function(){var t=!1,a=function(){console.log("SSE Opened"),h(!1)},r=function(){console.log("ERROR with EventSource")},n=function(e){for(var t=JSON.parse(e.data),a=0;a<d.length;a++)d[a](t)};return t||v||1===g||function(){if(e&&d.length>0&&!v){h(!0);var t=new EventSource(s+"/sse",{headers:{authorization:e},withCredentials:!0});t.addEventListener("message",n),t.addEventListener("error",r),t.addEventListener("open",a),c(t)}}(),function(){t=!0}}),[e,d,v,y,g]),{streamConnected:y,streamStatus:g,closeStream:function(){c(void 0)},addSubscriber:function(e){p((function(t){return[].concat(Object(r.a)(t),[e])}))}}},l=function(e,t,a){var r=Object(o.useState)(!0),i=Object(n.a)(r,2),c=i[0],l=i[1],u=Object(o.useState)(!1),d=Object(n.a)(u,2),p=d[0],f=d[1],m=Object(o.useState)(!1),v=Object(n.a)(m,2),h=v[0],g=v[1],y=Object(o.useState)(a),b=Object(n.a)(y,2),j=b[0],O=b[1];return Object(o.useEffect)((function(){var r=!1,n=function(e){return r?a:(g(400!==e.status&&401!==e.status),f(!e.ok),l(!1),400!==e.status&&401!==e.status&&e.ok&&e.json?e.json():a)};return e&&!r&&(l(!0),fetch(s+"/"+e,{method:"GET",headers:{authorization:t}}).then(n).catch(n)).then((function(e){return!r&&O(e)})),function(){r=!0}}),[e,t,a]),{isLoading:c,hasError:p,loggedIn:h,data:j}},u=Object(o.createContext)();function d(e){var t=Object(o.useState)(!0),a=Object(n.a)(t,2),r=a[0],l=a[1],d=Object(o.useState)(!1),p=Object(n.a)(d,2),f=p[0],m=p[1],v=Object(o.useState)(E("token")),h=Object(n.a)(v,2),g=h[0],y=h[1],b=c(g,[]),j=b.streamConnected,O=b.streamStatus,S=b.closeStream,C=b.addSubscriber;function w(e){return 400===e.status?(l(!1),console.log("Not logged in",e.status,e.statusText),{error:"login"}):401===e.status?(l(!1),console.log("Not logged in",e.status,e.statusText),{error:"login"}):e.ok?(m(!1),e.json()):(console.log("Error connecting",e.status,e.statusText),m(!0),{error:e.statusText})}function x(e,t,a){var r=new Date;return a=a||365,r.setTime(+r+864e5*a),window.document.cookie=e+"="+t+"; expires="+r.toGMTString()+"; path=/",t}function E(e){for(var t=e+"=",a=decodeURIComponent(document.cookie).split(";"),r=0;r<a.length;r++){for(var n=a[r];" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(t))return n.substring(t.length,n.length)}return""}return i.a.createElement(u.Provider,{value:{connectError:f,streamConnected:j,streamStatus:O,loggedIn:r,getJSON:function(e){return g&&r?fetch(s+"/"+e,{method:"GET",headers:{authorization:g}}).then((function(e){return w(e)})):(l(!1),new Promise((function(e,t){e(void 0)})))},postJSON:function(e,t){return g?fetch(s+"/"+e,{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",authorization:g},body:JSON.stringify(t)}).then((function(e){return w(e)})).then((function(e){return e})):(l(!1),new Promise((function(e,t){e(void 0)})))},login:function(e,t){console.log("Logging in as user",e,t);var a=new FormData;return a.append("user",e),a.append("password",t),fetch(s+"/login",{method:"post",body:a}).then((function(e){return e.json()})).then((function(t){return function(e,t){if(console.log("tokendata",t),t.hasOwnProperty("token"))return x("token",t.token,365),x("user",e,365),console.log("GetCookie",E("token")),y(t.token),r||l(!0),t.token}(e,t)}))},logout:function(){document.cookie="token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",console.log("logging out"),fetch(s+"/logout",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){return l(!1)})).then((function(e){return S()}))},addSubscriber:C,getCookie:E}},e.children)}},16:function(e,t,a){"use strict";a.r(t),a.d(t,"moduleReducer",(function(){return u})),a.d(t,"LayoutContext",(function(){return d})),a.d(t,"LayoutProvider",(function(){return p}));var r=a(6),n=a(7),o=a(0),i=a.n(o),s=a(12),c=a(72),l=a(24),u=function(e,t){return function(t){var r=Object(n.a)({},e);return t.forEach((function(e){var t=e.split("/"),n=t[t.length-1];r.hasOwnProperty(n)||(r[n]=function(e){try{return i.a.lazy((function(){return a(313)("./"+e).catch((function(e){console.error("Error during loading module: "+e)}))}))}catch(t){return null}}(e))})),r}(t)},d=Object(o.createContext)({}),p=function(e){var t=Object(o.useContext)(s.NetworkContext),a=t.getJSON,n=t.loggedIn,p=window.innerWidth<=800,f=Object(o.useState)(void 0),m=Object(r.a)(f,2),v=m[0],h=m[1],g=Object(o.useState)(function(){for(var e={name:"Home",props:{},data:{},page:""},t=decodeURIComponent(document.cookie).split(";"),a=0;a<t.length;a++){for(var r=t[a];" "===r.charAt(0);)r=r.substring(1);0===r.indexOf("layout=")&&(e=JSON.parse(r.substring("layout=".length,r.length)))}p&&e.data.hasOwnProperty("mobile")&&!e.hasOwnProperty("page")&&(e.page=e.data.mobile);return e}()),y=Object(r.a)(g,2),b=y[0],j=y[1],O=Object(o.useState)({name:"",props:{}}),S=Object(r.a)(O,2),C=S[0],w=S[1],x=Object(o.useState)({name:"",props:{}}),E=Object(r.a)(x,2),k=E[0],P=E[1],L=Object(o.useState)("System"),A=Object(r.a)(L,2),D=A[0],N=A[1],B=Object(o.useReducer)(u,[]),T=Object(r.a)(B,2),H=T[0],I=T[1];function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{type:"single"};N("Home");var r={name:e,props:t,data:a,page:b.page};j(r),W(r)}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};P({name:e,props:t})}function W(e){var t=new Date;return t.setTime(+t+864e5),window.document.cookie="layout="+JSON.stringify(e)+"; expires="+t.toGMTString()+"; path=/",e}return Object(o.useEffect)((function(){a("layout").then((function(e){h(e)}))}),[a]),Object(o.useEffect)((function(){if(void 0!==v){if(v.hasOwnProperty("error"))return console.log("Error getting layout",v),void j(void 0);if(p)return void("Home"===b.name&&v.Home.hasOwnProperty("mobile")&&b.page===v.Home.mobile?N("System"):N("Home"));var e={name:"Home",props:{},data:v.Home};return j(e),void W(e)}}),[v,p]),Object(o.useEffect)((function(){function e(e,t){if(t.data.pages.hasOwnProperty(e)){for(var a=t.data.pages[e],r=[],n=0;n<a.length;n++)r.push(a[n].module);I(r)}else console.log("Page",e,"not found in layout")}var t;t=b,n&&("pages"===b.data.type?p?t.hasOwnProperty("page")?t.data.hasOwnProperty("mobile")&&t.page===t.data.mobile?I([t.data.mobile]):e(t.page,t):t.data.hasOwnProperty("mobile")?I([t.data.mobile]):e(Object.keys(t.data.pages)[0],t):function(t,a){for(var r=0,n=Object.keys(a.data.pages);r<n.length;r++)e(n[r],a)}(b.name,t):I([b.name]))}),[b,p]),i.a.createElement(d.Provider,{value:{layouts:v,layout:b,modules:H,renderSuspenseModule:function(e,t){try{if(H.hasOwnProperty(e)){var a=H[e];return t.wide=!0,i.a.createElement(l.default,null,i.a.createElement(i.a.Suspense,{fallback:i.a.createElement(c.default,{name:e})},i.a.createElement(a,Object.assign({key:e},t))))}}catch(r){}return null},backPage:k,returnPage:C,applyLayout:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};N("Home"!==e?"Home":"System");var a={name:e,props:t,data:v[e],page:b.page};j(a),W(a)},applyLayoutCard:M,applyLayoutPage:function(e){var t={name:b.name,props:b.props,data:b.data,page:e};j(t),W(t)},applyHomePage:function(e){N("Home");var t={name:"Home",props:b.props,data:v.Home,page:e};j(t),W(t)},applyReturnPage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};w({name:e,props:t})},applyBackPage:R,goBack:function(){M(k.name,k.props),R("",{})},goHome:function(){var e={name:"Home",props:{},data:v.Home,page:""};p&&v.Home.hasOwnProperty("mobile")&&(e.page=v.Home.mobile),j(e),W(e),N("System")},isMobile:p,setMasterButtonState:N,masterButtonState:D}},e.children)}},24:function(e,t,a){"use strict";a.r(t);var r=a(46),n=a(47),o=a(104),i=a(103),s=a(105),c=a(0),l=a.n(c),u=a(48),d=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={hasError:!1,error:"",info:""},a}return Object(s.a)(t,e),Object(n.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0,error:e,info:t})}},{key:"render",value:function(){return this.state.hasError?l.a.createElement(u.default,{wide:this.props.wide,name:this.state.error.name,message:this.state.error.message}):this.props.children}}]),t}(c.Component);t.default=d},27:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return p}));var r=a(0),n=a.n(r),o=a(32),i=a(41),s=a.n(i),c=a(40),l=a(316),u=a(115),d=Object(o.a)((function(e){return{content:{display:"flex",margin:0,boxSizing:"border-box",padding:"0",flexWrap:"wrap",alignItems:"center",flexGrow:1,flexBasis:0,position:"relative",minWidth:"320px",minHeight:64,backgroundColor:e.palette.layer.card},border:{borderWidth:"thin",borderStyle:"solid",borderColor:e.palette.divider},borderHover:{"&:hover":{borderColor:e.palette.primary.dark}},hover:{"&:hover":{backgroundColor:e.palette.background.hover}},nopad:{padding:0,minHeight:64},list:{width:"100%"},nopadlist:{padding:0,width:"100%"},colorband:{borderLeft:"solid 5px #44F"},thinmargin:{margin:2,padding:0},noMargin:{margin:0,padding:0},normal:{padding:"4px !important"},inset:{marginTop:"-16px",zIndex:0},upper:{zIndex:900},color:{color:e.palette.primary.contrastText,backgroundColor:"#444",borderBottomRightRadius:0,borderBottomLeftRadius:0,padding:0},flex:{display:"flex",width:"100%"}}}));function p(e){var t=d(),a=window.innerWidth<=800,r=n.a.createElement(n.a.Fragment,null,e.nolist?n.a.createElement(c.a,{container:!0},e.children):n.a.createElement(u.a,{className:e.nopad?t.nopadlist:t.list},e.children));return n.a.createElement(c.a,{item:!0,container:e.container,xs:e.xs?e.xs:a||e.wide?12:3,onClick:e.onClick,className:s()(e.flex&&t.flex,e.inset&&t.inset,e.noMargin?t.noMargin:e.thinmargin?t.thinmargin:t.normal)},e.nopaper?n.a.createElement(n.a.Fragment,null,r):n.a.createElement(l.a,{elevation:e.elevation,className:s()(t.content,e.hover&&t.hover,e.nopad&&t.nopad)},r))}p.defaultProps={elevation:0,wide:!1,thinmargin:!1,nopaper:!1,inset:!1,color:!1,flex:!1,noMargin:!1,container:!1}},304:function(e,t,a){e.exports=a(68)},313:function(e,t,a){var r={"./":[68,9],"./AdapterItem":[211,9,4,6,7,113],"./AdapterItem.js":[211,9,4,6,7,113],"./AdapterLayout":[244,9,4,6,7,76],"./AdapterLayout.js":[244,9,4,6,7,76],"./AdapterStatus":[212,9,128],"./AdapterStatus.js":[212,9,128],"./AdminFeatures":[245,9,96],"./AdminFeatures.js":[245,9,96],"./AlertSummary":[213,9,156],"./AlertSummary.js":[213,9,156],"./Area":[246,9,68],"./Area.js":[246,9,68],"./AreaHero":[247,9,0,1,2,9,53],"./AreaHero.js":[247,9,0,1,2,9,53],"./AreaLayout":[248,9,0,1,2,3,37],"./AreaLayout.js":[248,9,0,1,2,3,37],"./AreaLine":[214,9,89],"./AreaLine.js":[214,9,89],"./AreaSummary":[194,9,0,1,2,9,69],"./AreaSummary.js":[194,9,0,1,2,9,69],"./AreaSummaryLayout":[249,9,0,1,2,48,73],"./AreaSummaryLayout.js":[249,9,0,1,2,48,73],"./AreaSummaryLine":[179,9,97],"./AreaSummaryLine.js":[179,9,97],"./AreasLayout":[250,9,0,1,2,9,61],"./AreasLayout.js":[250,9,0,1,2,9,61],"./AutomationColumn":[217,9,3,5,29,40],"./AutomationColumn.js":[217,9,3,5,29,40],"./AutomationLayout":[251,9,3,4,5,6,36],"./AutomationLayout.js":[251,9,3,4,5,6,36],"./AutomationsFavorites":[252,9,57],"./AutomationsFavorites.js":[252,9,57],"./AutomationsLayout":[253,9,49],"./AutomationsLayout.js":[253,9,49],"./AvSummary":[201,9,129],"./AvSummary.js":[201,9,129],"./BottomBar":[76,9],"./BottomBar.js":[76,9],"./ButtonItem":[144,9,184],"./ButtonItem.js":[144,9,184],"./CameraLayout":[254,9,64,114],"./CameraLayout.js":[254,9,64,114],"./CameraQR":[221,9,185],"./CameraQR.js":[221,9,185],"./CameraSelect":[255,9,72,138],"./CameraSelect.js":[255,9,72,138],"./CameraSummary":[222,9,139],"./CameraSummary.js":[222,9,139],"./CardControl":[215,9,157],"./CardControl.js":[215,9,157],"./CompositeDevice":[154,9,58],"./CompositeDevice.js":[154,9,58],"./ComputerHero":[256,9,158],"./ComputerHero.js":[256,9,158],"./ComputerLayout":[257,9,45],"./ComputerLayout.js":[257,9,45],"./DataContext/AlexaDevice":[77,9],"./DataContext/AlexaDevice.js":[77,9],"./DataContext/DataProvider":[63,9],"./DataContext/DataProvider.js":[63,9],"./DataContext/DeviceProvider":[42,9],"./DataContext/DeviceProvider.js":[42,9],"./DeviceDialog":[160,9,3,5,42],"./DeviceDialog.js":[160,9,3,5,42],"./DeviceDirectiveLayout":[258,9,50],"./DeviceDirectiveLayout.js":[258,9,50],"./DeviceHero":[259,9,159],"./DeviceHero.js":[259,9,159],"./DeviceHistory":[260,9,1,3,4,5,34],"./DeviceHistory.js":[260,9,1,3,4,5,34],"./DeviceIcon":[162,9,79],"./DeviceIcon.js":[162,9,79],"./DeviceLayout":[261,9,5,47,98],"./DeviceLayout.js":[261,9,5,47,98],"./DevicePropertyLayout":[300,9,46],"./DevicePropertyLayout.js":[300,9,46],"./DeviceSummary":[225,9,160],"./DeviceSummary.js":[225,9,160],"./DotLevel":[165,9,115],"./DotLevel.js":[165,9,115],"./ErrorBoundary":[24,9],"./ErrorBoundary.js":[24,9],"./ErrorCard":[48,9],"./ErrorCard.js":[48,9],"./GridBreak":[169,9,186],"./GridBreak.js":[169,9,186],"./GridItem":[27,9],"./GridItem.js":[27,9],"./GridSearch":[152,9,55],"./GridSearch.js":[152,9,55],"./GridSection":[121,9,187],"./GridSection.js":[121,9,187],"./HistoryLayout":[262,9,4,6,7,116],"./HistoryLayout.js":[262,9,4,6,7,116],"./HistoryLine":[226,9,4,6,7,140],"./HistoryLine.js":[226,9,4,6,7,140],"./LightHero":[263,9,162],"./LightHero.js":[263,9,162],"./LightLayout":[264,9,0,1,2,65,77],"./LightLayout.js":[264,9,0,1,2,65,77],"./LightSummary":[204,9,163],"./LightSummary.js":[204,9,163],"./LightbulbOutline":[64,9],"./LightbulbOutline.js":[64,9],"./MasterButton":[71,9],"./MasterButton.js":[71,9],"./MiniLauncher":[265,9,164],"./MiniLauncher.js":[265,9,164],"./ModeChips":[266,9,165],"./ModeChips.js":[266,9,165],"./ModeLines":[187,9,166],"./ModeLines.js":[187,9,166],"./MoreDevicesHero":[267,9,67,119],"./MoreDevicesHero.js":[267,9,67,119],"./MoreDevicesLayout":[268,9,71,80],"./MoreDevicesLayout.js":[268,9,71,80],"./NetworkProvider":[12,9],"./NetworkProvider.js":[12,9],"./Opener":[269,9,3,30,130],"./Opener.js":[269,9,3,30,130],"./PlaceholderCard":[72,9],"./PlaceholderCard.js":[72,9],"./PlayerGroup":[270,9,70],"./PlayerGroup.js":[270,9,70],"./PlayerHero":[271,9,0,8,66],"./PlayerHero.js":[271,9,0,8,66],"./PlayersLayout":[272,9,91],"./PlayersLayout.js":[272,9,91],"./ReceiverHero":[273,9,0,32,188],"./ReceiverHero.js":[273,9,0,32,188],"./Scene":[172,9,90],"./Scene.js":[172,9,90],"./SceneAdd":[216,9,120],"./SceneAdd.js":[216,9,120],"./SceneLayout":[274,9,0,1,2,60,78],"./SceneLayout.js":[274,9,0,1,2,60,78],"./SceneOld":[275,9,100],"./SceneOld.js":[275,9,100],"./SecuritySummary":[208,9,131],"./SecuritySummary.js":[208,9,131],"./ShortcutHero":[276,9,167],"./ShortcutHero.js":[276,9,167],"./SmallSlider":[171,9,0,189],"./SmallSlider.js":[171,9,0,189],"./SofaApp":[70,9],"./SofaApp.js":[70,9],"./SofaAppContent":[74,9],"./SofaAppContent.js":[74,9],"./SofaAvatarSlider":[143,9,0,171],"./SofaAvatarSlider.js":[143,9,0,171],"./SofaLogin":[75,9],"./SofaLogin.js":[75,9],"./SofaPage":[51,9],"./SofaPage.js":[51,9],"./SofaSlider":[120,9,0,190],"./SofaSlider.js":[120,9,0,190],"./SofaSnackbar":[299,9,142],"./SofaSnackbar.js":[299,9,142],"./SummaryLayout":[277,9,62],"./SummaryLayout.js":[277,9,62],"./SummaryLayout.safe":[278,9,43],"./SummaryLayout.safe.js":[278,9,43],"./SystemButtons":[279,9,122],"./SystemButtons.js":[279,9,122],"./SystemLaunch":[233,9,143],"./SystemLaunch.js":[233,9,143],"./ThermostatHero":[280,9,0,83],"./ThermostatHero.js":[280,9,0,83],"./ThermostatHistory":[281,9,1,4,7,35,161],"./ThermostatHistory.js":[281,9,1,4,7,35,161],"./ThermostatLayout":[282,9,0,81],"./ThermostatLayout.js":[282,9,0,81],"./ThermostatSummary":[234,9,172],"./ThermostatSummary.js":[234,9,172],"./ToggleAvatar":[62,9],"./ToggleAvatar.js":[62,9],"./ToggleButton":[168,9,191],"./ToggleButton.js":[168,9,191],"./ToggleChip":[283,9,174],"./ToggleChip.js":[283,9,174],"./ToggleIconButton":[232,9,175],"./ToggleIconButton.js":[232,9,175],"./TvHero":[284,9,0,31,99],"./TvHero.js":[284,9,0,31,99],"./ZoneHero":[285,9,144],"./ZoneHero.js":[285,9,144],"./ZoneLayout":[286,9,4,6,7,117],"./ZoneLayout.js":[286,9,4,6,7,117],"./automation/AutomationAction":[195,9,3,5,29,54],"./automation/AutomationAction.js":[195,9,3,5,29,54],"./automation/AutomationAll":[219,9,176],"./automation/AutomationAll.js":[219,9,176],"./automation/AutomationCondition":[181,9,3,5,38],"./automation/AutomationCondition.js":[181,9,3,5,38],"./automation/AutomationDevice":[161,9,3,5,41],"./automation/AutomationDevice.js":[161,9,3,5,41],"./automation/AutomationInput":[156,9,192],"./automation/AutomationInput.js":[156,9,192],"./automation/AutomationItemBase":[287,9,193],"./automation/AutomationItemBase.js":[287,9,193],"./automation/AutomationMove":[164,9,103],"./automation/AutomationMove.js":[164,9,103],"./automation/AutomationTrigger":[196,9,3,5,39],"./automation/AutomationTrigger.js":[196,9,3,5,39],"./automation/ControllerProperty":[170,9,135],"./automation/ControllerProperty.js":[170,9,135],"./automation/DeviceDirective":[180,9,145],"./automation/DeviceDirective.js":[180,9,145],"./automation/PropertyValue":[163,9,177],"./automation/PropertyValue.js":[163,9,177],"./automation/ScheduleDays":[184,9,173],"./automation/ScheduleDays.js":[184,9,173],"./automation/ScheduleInterval":[183,9,123],"./automation/ScheduleInterval.js":[183,9,123],"./automation/ScheduleItem":[220,9,146],"./automation/ScheduleItem.js":[220,9,146],"./automation/ScheduleStart":[182,9,104],"./automation/ScheduleStart.js":[182,9,104],"./automation/UnitButton":[173,9,178],"./automation/UnitButton.js":[173,9,178],"./automation/automationDetails":[199,9,4,6,147],"./automation/automationDetails.js":[199,9,4,6,147],"./automation/automationHeader":[218,9,4,6,82],"./automation/automationHeader.js":[218,9,4,6,82],"./automation/automationItem":[200,9,74],"./automation/automationItem.js":[200,9,74],"./automation/automationSave":[240,9,179],"./automation/automationSave.js":[240,9,179],"./automation/automationSchedule":[197,9,59],"./automation/automationSchedule.js":[197,9,59],"./automation/automationTitle":[198,9,194],"./automation/automationTitle.js":[198,9,194],"./automation/automationTriggerReal":[288,9,52],"./automation/automationTriggerReal.js":[288,9,52],"./automation/operatorButton":[167,9,180],"./automation/operatorButton.js":[167,9,180],"./camera/cameraDialog":[174,9,105],"./camera/cameraDialog.js":[174,9,105],"./camera/securitycamera":[185,9,63],"./camera/securitycamera.js":[185,9,63],"./controllers/BrightnessController":[145,9,0,101],"./controllers/BrightnessController.js":[145,9,0,101],"./controllers/ColorController":[146,9,1,2,106],"./controllers/ColorController.js":[146,9,1,2,106],"./controllers/ColorTemperatureController":[147,9,0,102],"./controllers/ColorTemperatureController.js":[147,9,0,102],"./controllers/EndpointHealth":[148,9,124],"./controllers/EndpointHealth.js":[148,9,124],"./controllers/PowerController":[149,9,92],"./controllers/PowerController.js":[149,9,92],"./controllers/StateController":[150,9,107],"./controllers/StateController.js":[150,9,107],"./controllers/properties/brightness":[125,9,0,12],"./controllers/properties/brightness.js":[125,9,0,12],"./controllers/properties/color":[124,9,1,2,33],"./controllers/properties/color.js":[124,9,1,2,33],"./controllers/properties/connectivity":[126,9,19],"./controllers/properties/connectivity.js":[126,9,19],"./controllers/properties/detectionState":[127,9,20],"./controllers/properties/detectionState.js":[127,9,20],"./controllers/properties/doorbellPress":[128,9,26],"./controllers/properties/doorbellPress.js":[128,9,26],"./controllers/properties/duration":[129,9,27],"./controllers/properties/duration.js":[129,9,27],"./controllers/properties/input":[130,9,21],"./controllers/properties/input.js":[130,9,21],"./controllers/properties/mode":[131,9,17],"./controllers/properties/mode.js":[131,9,17],"./controllers/properties/onLevel":[132,9,0,18],"./controllers/properties/onLevel.js":[132,9,0,18],"./controllers/properties/playbackState":[133,9,22],"./controllers/properties/playbackState.js":[133,9,22],"./controllers/properties/power":[134,9,28],"./controllers/properties/power.js":[134,9,28],"./controllers/properties/powerLevel":[135,9,0,13],"./controllers/properties/powerLevel.js":[135,9,0,13],"./controllers/properties/powerState":[136,9,23],"./controllers/properties/powerState.js":[136,9,23],"./controllers/properties/pressState":[137,9,24],"./controllers/properties/pressState.js":[137,9,24],"./controllers/properties/targetSetpoint":[138,9,0,14],"./controllers/properties/targetSetpoint.js":[138,9,0,14],"./controllers/properties/temperature":[139,9,0,15],"./controllers/properties/temperature.js":[139,9,0,15],"./controllers/properties/thermostatMode":[140,9,25],"./controllers/properties/thermostatMode.js":[140,9,25],"./controllers/properties/time":[141,9,10],"./controllers/properties/time.js":[141,9,10],"./controllers/properties/timeEntry":[123,9,11],"./controllers/properties/timeEntry.js":[123,9,11],"./controllers/properties/volume":[142,9,0,16],"./controllers/properties/volume.js":[142,9,0,16],"./deviceSelect/Device":[153,9,5,197],"./deviceSelect/Device.js":[153,9,5,197],"./deviceSelect/deviceExpand":[193,9,56],"./deviceSelect/deviceExpand.js":[193,9,56],"./deviceSelect/deviceExpandActions":[176,9,149],"./deviceSelect/deviceExpandActions.js":[176,9,149],"./deviceSelect/deviceExpandEvents":[178,9,150],"./deviceSelect/deviceExpandEvents.js":[178,9,150],"./deviceSelect/deviceExpandProperties":[177,9,151],"./deviceSelect/deviceExpandProperties.js":[177,9,151],"./deviceSelect/deviceSelect":[289,9,51],"./deviceSelect/deviceSelect.js":[289,9,51],"./deviceSelect/sofaCategoryFilter":[241,9,86],"./deviceSelect/sofaCategoryFilter.js":[241,9,86],"./devices/Television":[237,9,0,31,118],"./devices/Television.js":[237,9,0,31,118],"./devices/TvRemote":[210,9,87],"./devices/TvRemote.js":[210,9,87],"./devices/Zone":[238,9,4,6,7,152],"./devices/Zone.js":[238,9,4,6,7,152],"./devices/receiver":[243,9,0,32],"./devices/receiver.js":[243,9,0,32],"./devices/statusLock":[228,9,153],"./devices/statusLock.js":[228,9,153],"./dialogs/PinDialog":[242,9,3,30],"./dialogs/PinDialog.js":[242,9,3,30],"./dialogs/SofaDialog":[155,9,3,198],"./dialogs/SofaDialog.js":[155,9,3,198],"./directives/SetBrightness":[290,9,0,170],"./directives/SetBrightness.js":[290,9,0,170],"./index":[68,9],"./index.css":[108,7],"./index.js":[68,9],"./layout/NewLayoutProvider":[16,9],"./layout/NewLayoutProvider.js":[16,9],"./light/Light":[166,9,0,1,2,44],"./light/Light.js":[166,9,0,1,2,44],"./light/LightSliderBrightness":[157,9,0,132],"./light/LightSliderBrightness.js":[157,9,0,132],"./light/LightSliderColor":[159,9,1,2,93],"./light/LightSliderColor.js":[159,9,1,2,93],"./light/LightSliderColorReal":[291,9,1,2,136],"./light/LightSliderColorReal.js":[291,9,1,2,136],"./light/LightSliderTemperature":[158,9,0,133],"./light/LightSliderTemperature.js":[158,9,0,133],"./logo.svg":[334,7,210],"./other/Computer":[202,9,94],"./other/Computer.js":[202,9,94],"./other/ComputerList":[223,9,88],"./other/ComputerList.js":[223,9,88],"./other/Device":[175,9,125],"./other/Device.js":[175,9,125],"./other/DeviceList":[186,9,108],"./other/DeviceList.js":[186,9,108],"./other/Matrix":[203,9,154],"./other/Matrix.js":[203,9,154],"./other/MatrixList":[224,9,137],"./other/MatrixList.js":[224,9,137],"./other/Mode":[206,9,126],"./other/Mode.js":[206,9,126],"./other/ModeList":[227,9,109],"./other/ModeList.js":[227,9,109],"./other/Shade":[188,9,110],"./other/Shade.js":[188,9,110],"./other/Sprinkler":[292,9,111],"./other/Sprinkler.js":[292,9,111],"./other/VirtualList":[205,9,95],"./other/VirtualList.js":[205,9,95],"./player/CoverDimmer":[239,9,199],"./player/CoverDimmer.js":[239,9,199],"./player/JukeboxOverlay":[293,9,200],"./player/JukeboxOverlay.js":[293,9,200],"./player/NoPlayer":[231,9,201],"./player/NoPlayer.js":[231,9,201],"./player/OldPlayerArtOverlay":[294,9,155],"./player/OldPlayerArtOverlay.js":[294,9,155],"./player/OldPlayerArtOverlayButtons":[295,9,75],"./player/OldPlayerArtOverlayButtons.js":[295,9,75],"./player/OldPlayerCard":[296,9,0,8,84],"./player/OldPlayerCard.js":[296,9,0,8,84],"./player/OldPlayerVolume":[297,9,0,134],"./player/OldPlayerVolume.js":[297,9,0,134],"./player/PlayerArtOverlay":[189,9,202],"./player/PlayerArtOverlay.js":[189,9,202],"./player/PlayerArtOverlayButtons":[190,9,112],"./player/PlayerArtOverlayButtons.js":[190,9,112],"./player/PlayerBase":[207,9,127],"./player/PlayerBase.js":[207,9,127],"./player/PlayerCard":[229,9,0,8,85],"./player/PlayerCard.js":[229,9,0,8,85],"./player/PlayerCover":[192,9,8,203],"./player/PlayerCover.js":[192,9,8,203],"./player/PlayerMini":[230,9,204],"./player/PlayerMini.js":[230,9,204],"./player/PlayerVolume":[191,9,0,141],"./player/PlayerVolume.js":[191,9,0,141],"./serviceWorker":[78,9],"./serviceWorker.js":[78,9],"./theme/SofaTheme":[69,9],"./theme/SofaTheme.js":[69,9],"./theme/sofaThemeDark":[38,9],"./theme/sofaThemeDark.js":[38,9],"./theme/sofaThemeDarkOrange":[298,9,205],"./theme/sofaThemeDarkOrange.js":[298,9,205],"./theme/sofaThemeLight":[37,9],"./theme/sofaThemeLight.js":[37,9],"./thermostat/AirQuality":[235,9,183],"./thermostat/AirQuality.js":[235,9,183],"./thermostat/TemperatureSensor":[236,9,206],"./thermostat/TemperatureSensor.js":[236,9,206],"./thermostat/Thermostat":[209,9,0,121],"./thermostat/Thermostat.js":[209,9,0,121],"./user/UserProvider":[45,9],"./user/UserProvider.js":[45,9]};function n(e){if(!a.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],n=t[0];return Promise.all(t.slice(2).map(a.e)).then((function(){return a.t(n,t[1])}))}n.keys=function(){return Object.keys(r)},n.id=313,e.exports=n},37:function(e,t,a){"use strict";a.r(t);var r=a(84),n=a(13),o=a.n(n),i=a(31),s=a.n(i);t.default=Object(r.a)({palette:{primary:{light:o.a[300],main:o.a[500],dark:o.a[700]},secondary:{light:s.a[300],main:s.a[500],dark:s.a[700]},background:{page:"#eee",button:"#fff",selectButton:o.a[300],hover:o.a[100],hover2:"rgba(255, 87, 34, 0.1)",card:"#efefef",area:"#ddd",header:"#e8e8e8"},dot:{off:"#bbb",on:o.a[500]},avatar:{normal:o.a[500],off:"#aaa",on:o.a[500],notready:"#bbb",closed:"#6a6",open:"#e66",cool:"#00796B",mid:"#558B2F",hot:"#E65100",good:"#558B2F",fair:"#E65100",bad:"#E60000",none:"rgba(255,255,255, 0)"},layer:{body:"#ccc",section:"#ddd",card:"#e8e8e8",item:"#eee",itemHighlight:"#f4f4f4"},type:"light"}})},38:function(e,t,a){"use strict";a.r(t);var r=a(84),n=a(13),o=a.n(n),i=a(31),s=a.n(i);t.default=Object(r.a)({direction:"ltr",palette:{primary:{light:o.a[300],main:o.a[500],dark:o.a[700]},secondary:{light:s.a[300],main:s.a[500],dark:s.a[700]},text:{primary:"#c0c0c0"},background:{default:"#000",button:"#333",selectButton:o.a[700],page:"#111",hover:"rgba(188, 54, 12, 0.1)",paper:"#222",card:"#262626",area:"#000"},dot:{off:"#444",on:o.a[500]},avatar:{normal:o.a[500],off:"#444",on:o.a[500],notready:"#bbb",closed:"#6a6",open:"#e66",cool:"#00796B",mid:"#558B2F",hot:"#E65100",good:"#558B2F",fair:"#E65100",bad:"#E60000",none:"rgba(0,0,0, 0)"},layer:{body:"#000",section:"#111",card:"#222",item:"#272727",itemHighlight:"#333"},type:"dark"}})},42:function(e,t,a){"use strict";a.r(t),a.d(t,"DeviceContext",(function(){return c})),a.d(t,"default",(function(){return d}));var r=a(6),n=a(7),o=a(0),i=a.n(o),s=a(12),c=Object(o.createContext)();function l(){try{return JSON.parse(localStorage.getItem("devices"))}catch(e){}return{}}var u=function(e,t){if(t==={})return e;if(!t.hasOwnProperty("event"))return e;var a=0,r=Object(n.a)({},e);switch(t.event.header.name){case"DeleteReport":for(a=0;a<t.event.payload.endpoints.length;a++)t.event.payload.endpoints[a].endpointId in r&&delete r[t.event.payload.endpoints[a].endpointId];return localStorage.setItem("devices",JSON.stringify(r)),r;case"AddOrUpdateReport":var o=l();for(o||(o={}),a=0;a<t.event.payload.endpoints.length;a++)o[t.event.payload.endpoints[a].endpointId]=t.event.payload.endpoints[a];return localStorage.setItem("devices",JSON.stringify(o)),o;default:return e}};function d(e){var t=Object(o.useContext)(s.NetworkContext),a=t.getJSON,n=t.postJSON,d=t.loggedIn,p=t.addSubscriber,f=l(),m=Object(o.useState)({}),v=Object(r.a)(m,2),h=v[0],g=v[1],y=Object(o.useState)({}),b=Object(r.a)(y,2),j=b[0],O=b[1],S=Object(o.useState)({}),C=Object(r.a)(S,2),w=C[0],x=C[1],E=Object(o.useState)("Main"),k=Object(r.a)(E,2),P=k[0],L=k[1],A=Object(o.useReducer)(u,f),D=Object(r.a)(A,2),N=D[0],B=D[1],T={DoorbellEventSource:{doorbellPress:{}}};function H(e){if(e in N)return N[e]}function I(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return((15&(e^crypto.getRandomValues(new Uint8Array(1))[0]))>>e/4).toString(16)}))}function M(e,t){var a=H(e);if(void 0!==a)for(var r=0;r<a.capabilities.length;r++){if(a.capabilities[r].interface.endsWith("."+t))return a.capabilities[r];if(a.capabilities[r].hasOwnProperty("instance")&&a.capabilities[r].instance.endsWith("."+t))return a.capabilities[r]}}return Object(o.useEffect)((function(){p(B)}),[]),Object(o.useEffect)((function(){!0===d&&(a("directives").then((function(e){return O(e)})),a("properties").then((function(e){return g(e)})),a("list/logic/virtualDevices").then((function(e){return x(e)})))}),[d]),i.a.createElement(c.Provider,{value:{devices:N,virtualDevices:w,directives:j,controllerProperties:h,controllerForProperty:function(e,t){if(e){var a=H(e);for(var r in T)if(T[r].hasOwnProperty(t))return r;for(var n=0;n<a.capabilities.length;n++){if(void 0!==h[a.capabilities[n].interface.split(".")[1]]&&Object.keys(h[a.capabilities[n].interface.split(".")[1]]).includes(t))return a.capabilities[n].interface.split(".")[1];if(a.capabilities[n].hasOwnProperty("instance")&&a.capabilities[n].instance.split(".")[1]===t)return a.capabilities[n].interface.split(".")[1]}}},getControllerProperties:function(e){var t=[];if(e)for(var a=H(e),r=0;r<a.capabilities.length;r++)void 0!==h[a.capabilities[r].interface.split(".")[1]]&&(t=t.concat(Object.keys(h[a.capabilities[r].interface.split(".")[1]]))),T.hasOwnProperty(a.capabilities[r].interface.split(".")[1])&&(t=t.concat(Object.keys(T[a.capabilities[r].interface.split(".")[1]])));return t},getDeviceProperties:function(e){var t=[];if(e)for(var a=0;a<e.capabilities.length;a++)e.capabilities[a].hasOwnProperty("instance")?t=t.concat([e.capabilities[a].instance.split(".")[1]]):void 0!==h[e.capabilities[a].interface.split(".")[1]]?t=t.concat(Object.keys(h[e.capabilities[a].interface.split(".")[1]])):T.hasOwnProperty(e.capabilities[a].interface.split(".")[1])&&(t=t.concat(Object.keys(T[e.capabilities[a].interface.split(".")[1]])));return t},deviceByEndpointId:H,deviceByFriendlyName:function(e){for(var t in N)if(N[t].friendlyName===e)return N[t]},devicesByFriendlyName:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2?arguments[2]:void 0,r=[];if("object"===typeof e)for(var n=0;n<e.length;n++)for(var o in N)e[n]!==N[o].friendlyName||void 0!==a&&!N[o].displayCategories.includes(a)||r.push(N[o]);else for(var i in N)(""===e||N[i].friendlyName.includes(e))&&r.push(N[i]);return t&&r.sort((function(e,t){var a=e.friendlyName.toLowerCase(),r=t.friendlyName.toLowerCase();return a<r?-1:a>r?1:0})),r},devicesByCategory:function(e,t){e||(e="ALL"),Array.isArray(e)||(e=[e]);for(var a=[],r=0;r<e.length;r++){var n=e[r];for(var o in N)(N[o].displayCategories.includes(n)||"ALL"===n)&&(t&&!N[o].friendlyName.toLowerCase().includes(t.toLowerCase())||a.push(N[o]))}return a.sort((function(e,t){var a=e.friendlyName.toLowerCase(),r=t.friendlyName.toLowerCase();return a<r?-1:a>r?1:0})),a},devicesByController:function(e,t){if(!e)return[];Array.isArray(e)||(e=[e]);for(var a=[],r=0;r<e.length;r++)for(var n in N)for(var o=0;o<N[n].capabilities.length;o++)N[n].capabilities[o].interface.endsWith(e[r])&&(t&&!N[n].friendlyName.toLowerCase().includes(t.toLowerCase())||a.push(N[n]));return a.sort((function(e,t){var a=e.friendlyName.toLowerCase(),r=t.friendlyName.toLowerCase();return a<r?-1:a>r?1:0})),a},propertyNamesFromDevice:function(e){for(var t=[],a=0;a<e.capabilities.length;a++)t.push(e.capabilities[a].interface);return t},sortByName:function(e){return e.sort((function(e,t){var a=e.friendlyName.toLowerCase(),r=t.friendlyName.toLowerCase();return a<r?-1:a>r?1:0})),e},deviceDirectives:function(e){if(void 0!==e){var t=[];if(e.hasOwnProperty("capabilities"))for(var a=0;a<e.capabilities.length;a++){var r=e.capabilities[a].interface.split(".")[1];if(j.hasOwnProperty(r))for(var n=Object.keys(j[r]),o=0;o<n.length;o++)e.capabilities[a].hasOwnProperty("instance")?t.push({directive:n[o],controller:r,instance:e.capabilities[a].instance}):t.push({directive:n[o],controller:r,instance:void 0})}return t}},propertyMap:function(e){var t=[];if(void 0!==e){for(var a=0;a<e.capabilities.length;a++){if(void 0!==h[e.capabilities[a].interface.split(".")[1]])for(var r=Object.keys(h[e.capabilities[a].interface.split(".")[1]]),n=0;n<r.length;n++)t.push({instance:e.capabilities[a].instance,controller:e.capabilities[a].interface.split(".")[1],property:r[n]});if(T.hasOwnProperty(e.capabilities[a].interface.split(".")[1]))for(var o=Object.keys(h[e.capabilities[a].interface.split(".")[1]]),i=0;i<o.length;i++)t.push({instance:e.capabilities[a].instance,controller:e.capabilities[a].interface.split(".")[1],property:r[i]})}return t}},getControllerInterface:function(e,t){if(void 0!==e){if(e.hasOwnProperty("capabilities"))for(var a=0;a<e.capabilities.length;a++)if(e.capabilities[a].interface.split(".")[1]===t.controller){if(void 0===t.instance&&void 0===e.capabilities[a].interface.instance)return e.capabilities[a];if(t.hasOwnProperty("instance")&&e.capabilities[a].hasOwnProperty("instance")&&(t.instance===e.capabilities[a].instance||t.instance===e.capabilities[a].instance.split(".")[1]))return e.capabilities[a]}console.log("failed get interface",e,t)}},instanceForProperty:function(e,t){if(void 0!==t&&e.hasOwnProperty("capabilities"))for(var a=0;a<e.capabilities.length;a++)if(e.capabilities[a].hasOwnProperty("instance")&&t===e.capabilities[a].instance.split(".")[1])return e.capabilities[a].instance.split(".")[1]},getDefaultCapability:function(e){for(var t=0;t<e.capabilities.length;t++)if("Alexa"!==e.capabilities[t].interface)return e.capabilities[t]},getDefaultDirective:function(t){var a=function(t){var a=e.device;t&&(a=t);var r=[];if(a.hasOwnProperty("capabilities"))for(var n=0;n<a.capabilities.length;n++){var o=a.capabilities[n].interface.split(".")[1];"ModeController"===o?r=r.concat("SetMode."+a.capabilities[n].instance.split(".")[1]):e.directives.hasOwnProperty(o)&&(r=r.concat(Object.keys(e.directives[o])))}return r}(t.interface);if(a.length>0)return a[0]},getChangeTimesForDevices:function(e,t){for(var a=[],r=0;r<t.length;r++)a.push(t[r].endpointId);return n("list/influx/last/"+e,a).then((function(e){return"string"===typeof(t=e)?JSON.parse(t):t;var t})).then((function(e){return e}))},getHistoryForDevice:function(e,t,r){var n="list/influx/history/"+e+"/"+t;return r&&(n=n+"/"+r),a(n)},historyQuery:function(e){return n("list/influx/querylist",{query:e}).then((function(e){return e}))},setArea:L,area:P,getModes:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a={},r=0;r<e.capabilities.length;r++)if(e.capabilities[r].interface.endsWith("ModeController")){var n=e.capabilities[r],o=n.capabilityResources.friendlyNames[0].value.text;if(!t.includes(o)){for(var i=[],s=0;s<n.configuration.supportedModes.length;s++)i[n.configuration.supportedModes[s].value]=n.configuration.supportedModes[s].modeResources.friendlyNames[0].value.text;a[o]=i}}return a},getInputs:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var t=[],a=0;a<e.capabilities.length;a++)if(e.capabilities[a].interface.endsWith("InputController"))for(var r=0;r<e.capabilities[a].inputs.length;r++)t.push(e.capabilities[a].inputs[r].name);return t},getController:M,directive:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=M(e,t),i="https://"+window.location.hostname,s={name:a,namespace:o.interface,payloadVersion:"3",messageId:I(),correlationToken:I()};o.hasOwnProperty("instance")&&(s.instance=o.instance);var c={endpointId:e,cookie:n,scope:{type:"BearerToken",token:"sofa-interchange-token"}},l={directive:{header:s,endpoint:c,payload:r}};return fetch(i+"/directive",{withCredentials:!0,credentials:"include",method:"post",body:JSON.stringify(l)}).then((function(e){return e.json()})).then((function(e){return e}))},getSceneDetails:function(e){return a("list/logic/scene/"+e).then((function(e){return e}))},saveSceneDetails:function(e,t){return n("save/logic/scene/"+e,t).then((function(e){return e}))}}},e.children)}},45:function(e,t,a){"use strict";a.r(t),a.d(t,"UserContext",(function(){return l})),a.d(t,"default",(function(){return u}));var r=a(44),n=a(7),o=a(6),i=a(0),s=a.n(i),c=a(12),l=Object(i.createContext)();function u(e){var t=Object(i.useState)({}),a=Object(o.a)(t,2),u=a[0],d=a[1],p=Object(i.useContext)(c.NetworkContext),f=p.getJSON,m=p.postJSON,v=p.loggedIn,h=Object(i.useState)([]),g=Object(o.a)(h,2),y=g[0],b=g[1],j=Object(i.useState)(void 0),O=Object(o.a)(j,2),S=O[0],C=O[1],w=Object(i.useState)(void 0),x=Object(o.a)(w,2),E=x[0],k=x[1];function P(e){m("save-user",e).then((function(e){return console.log(e)}))}return Object(i.useEffect)((function(){v?f("get-user").then((function(e){return function(e){e&&(e.hasOwnProperty("favorites")&&b(e.favorites),e.hasOwnProperty("camera")&&C(e.camera),e.hasOwnProperty("theme")&&k(e.theme),d(e))}(e)})):d({})}),[v]),s.a.createElement(l.Provider,{value:{userData:u,makeFavorite:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=Object(r.a)(y);t&&!u.favorites.includes(e)?(a=[].concat(Object(r.a)(a),[e]),b(a),d(Object(n.a)({},u,{favorites:a})),P(Object(n.a)({},u,{favorites:a}))):!t&&u.favorites.includes(e)&&((a=Object(r.a)(u.favorites)).splice(a.indexOf(e),1),b(a),d(Object(n.a)({},u,{favorites:a})),P(Object(n.a)({},u,{favorites:a})))},isFavorite:function(e){return y.includes(e)},favorites:y,userCamera:S,chooseUserCamera:function(e){e!==S&&(C(e),d(Object(n.a)({},u,{camera:e})),P(Object(n.a)({},u,{camera:e})))},userTheme:E,chooseUserTheme:function(e){e!==E&&(k(e),d(Object(n.a)({},u,{theme:e})),P(Object(n.a)({},u,{theme:e})))}}},e.children)}},48:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return p}));var r=a(0),n=a.n(r),o=a(27),i=a(62),s=a(115),c=a(25),l=a(59),u=a(112),d=a.n(u);function p(e){return n.a.createElement(o.default,{wide:e.wide},n.a.createElement(s.a,null,n.a.createElement(c.a,null,n.a.createElement(i.default,{avatarState:"open"},n.a.createElement(d.a,null)),n.a.createElement(l.a,{primary:e.name,secondary:e.message})),n.a.createElement(c.a,null,n.a.createElement(l.a,{primary:"Reload",onClick:function(){return"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})),void window.location.reload(!0)}}))))}},51:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return p}));var r=a(0),n=a.n(r),o=a(32),i=a(16),s=a(40),c=a(24),l=a(25),u=a(59),d=Object(o.a)((function(e){return{gridColumn:{margin:1,overflowX:"hidden",overflowY:"hidden",alignContent:"start",padding:"3px !important",backgroundColor:e.palette.layer.section,borderRadius:"4px 4px 4px 4px",maxWidth:"24%"},mobileGridColumn:{height:"100%",margin:0,overflowX:"hidden",overflowY:"hidden",alignContent:"start",padding:"3px !important",backgroundColor:e.palette.layer.section,borderRadius:"4px 4px 4px 4px"},paddedToolbar:{paddingBottom:"env(safe-area-inset-bottom)",marginBottom:"env(safe-area-inset-bottom)"}}}));function p(e){var t=d(),a=Object(r.useContext)(i.LayoutContext).renderSuspenseModule;return n.a.createElement(c.default,{wide:e.wide},n.a.createElement(s.a,{container:!0,item:!0,spacing:1,key:e.name,xs:e.wide?12:3,className:e.wide?t.mobileGridColumn:t.gridColumn},n.a.createElement(l.a,null,n.a.createElement(u.a,{primary:e.name})),e.page.map((function(t,r){return n.a.createElement(c.default,{wide:!0,key:e.name+r},a(t.module,t.props))})),!1))}},62:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(32),i=a(318),s=a(41),c=a.n(s),l=a(317),u=a(322),d=Object(o.a)((function(e){return{flex:{display:"flex",alignItems:"center"},base:{padding:0,minWidth:56},reverse:{justifyContent:"flex-end",display:"flex"},sizeSmall:{minWidth:26,fontSize:10},avatarSmall:{height:28,width:28,fontSize:14},none:{color:e.palette.primary.dark,padding:"0 8px",fontSize:20}}}));function p(e){var t=d(),a={back:{backgroundColor:e.theme.palette.avatar[e.avatarState.toLowerCase()]},noback:{backgroundColor:e.theme.palette.avatar.none,color:e.theme.palette.avatar[e.avatarState.toLowerCase()]}};return n.a.createElement(l.a,{onClick:e.onClick,className:c()(t.flex,e.small?t.sizeSmall:t.base,e.reverse&&t.reverse)},n.a.createElement(u.a,{style:e.noback?a.noback:a.back,className:c()(e.small&&t.avatarSmall),onClick:e.onClick},e.children))}p.defaultProps={reverse:!1,noback:!1,small:!1},t.default=Object(i.a)(p)},63:function(e,t,a){"use strict";a.r(t),a.d(t,"DataContext",(function(){return d})),a.d(t,"deviceStatesReducer",(function(){return p})),a.d(t,"default",(function(){return f}));var r=a(6),n=a(19),o=a(7),i=a(0),s=a.n(i),c=a(12),l=a(42),u=a(77),d=Object(i.createContext)();var p=function(e,t){if(t==={})return e;if(!t.hasOwnProperty("event"))return e;var a=0,r=Object(o.a)({},e),i="",s="",c={};switch(t.event.header.name){case"Multistate":for(c in t.state){var l={};for(r.hasOwnProperty(c)&&(l=Object(o.a)({},r[c])),a=0;a<t.state[c].context.properties.length;a++){s=(i=t.state[c].context.properties[a]).namespace.split(".")[1],i.hasOwnProperty("instance")&&(s=i.instance.split(".")[1]),l.hasOwnProperty(s)||(l[s]={});try{i.value.hasOwnProperty("value")?i.deepvalue=i.value.value:i.deepvalue=i.value}catch(f){i.deepvalue=i.value}l=Object(o.a)({},l,Object(n.a)({},s,Object(o.a)({},l[s],Object(n.a)({},i.name,{value:i.value,deepvalue:i.deepvalue,timeOfSample:i.timeOfSample}))))}r=Object(o.a)({},r,Object(n.a)({},c,l))}return r;case"ChangeReport":if(t.event.endpoint.endpointId in r){var u="",d={},p=t.event.endpoint.endpointId;for(c=Object(o.a)({},r[t.event.endpoint.endpointId]),a=0;a<t.event.payload.change.properties.length;a++){s=(i=t.event.payload.change.properties[a]).namespace.split(".")[1],i.hasOwnProperty("instance")&&(s=i.instance.split(".")[1]),u=i.name,d=Object(o.a)({},c[s]);try{i.value&&i.value.hasOwnProperty("value")?i.deepvalue=i.value.value:i.deepvalue=i.value}catch(m){i.deepvalue=i.value}c=Object(o.a)({},c,Object(n.a)({},s,Object(o.a)({},d,Object(n.a)({},u,Object(o.a)({},d[u],{value:i.value,deepvalue:i.deepvalue,timeOfSample:i.timeOfSample})))))}for(a=0;a<t.context.properties.length;a++){s=(i=t.context.properties[a]).namespace.split(".")[1],i.hasOwnProperty("instance")&&(s=i.instance.split(".")[1]),u=i.name,d=Object(o.a)({},c[s]);try{i.value&&i.value.hasOwnProperty("value")?i.deepvalue=i.value.value:i.deepvalue=i.value}catch(v){i.deepvalue=i.value}c=Object(o.a)({},c,Object(n.a)({},s,Object(o.a)({},d,Object(n.a)({},u,Object(o.a)({},d[u],{value:i.value,deepvalue:i.deepvalue,timeOfSample:i.timeOfSample})))))}return Object(o.a)({},r,Object(n.a)({},p,c))}return e;default:return e}};function f(e){var t=Object(i.useContext)(l.DeviceContext),a=t.getSceneDetails,n=t.saveSceneDetails,f=t.deviceByEndpointId,m=t.devicesByCategory,v=t.devicesByFriendlyName,h=t.devicesByController,g=t.deviceByFriendlyName,y=t.directive,b=Object(i.useContext)(c.NetworkContext),j=b.getJSON,O=b.loggedIn,S=b.addSubscriber,C=function(){var e={},t=function(){try{return JSON.parse(localStorage.getItem("deviceStates"))}catch(e){}return{}}();for(var a in t)e[t[a].endpointId]=new u.default(t[a]);return e}(),w=Object(i.useState)({}),x=Object(r.a)(w,2),E=x[0],k=x[1],P=Object(i.useState)("Main"),L=Object(r.a)(P,2),A=L[0],D=L[1],N=Object(i.useReducer)(p,C),B=Object(r.a)(N,2),T=B[0],H=B[1],I=Object(i.useState)("sonos:player:RINCON_B8E937ECE1F001400"),M=Object(r.a)(I,2),R=M[0],W=M[1],F=Object(i.useState)(""),z=Object(r.a)(F,2),J=z[0],U=z[1];function G(e){return"OK"===e.EndpointHealth.connectivity.value.value}function V(e,t){var a=m(e,t);return a.sort((function(e,t){var a=e.friendlyName.toLowerCase(),r=t.friendlyName.toLowerCase();return a<r?-1:a>r?1:0})),Z(a)}function Z(e){for(var t=[],a=0;a<e.length;a++){var r=Q(e[a]);void 0!==r&&(r.endpointId=e[a].endpointId,t.push(r))}return t}function Q(e){var t=void 0;if(void 0!==e)return T.hasOwnProperty(e.endpointId)&&(t=Object(o.a)({},e,{},T[e.endpointId])),t}return Object(i.useEffect)((function(){S(H)}),[]),Object(i.useEffect)((function(){!0===O&&j("list/logic/virtualDevices").then((function(e){return k(e)}))}),[O]),s.a.createElement(d.Provider,{value:{deviceStates:T,virtualDeviceStates:E,deviceStateByEndpointId:function(e){var t=f(e);if(void 0!==t)return Q(t)},deviceStateByFriendlyName:function(e){return Q(g(e))},deviceStatesByFriendlyName:function(e,t,a){return Z(v(e,t,a))},deviceStatesByCategory:V,deviceStatesByController:function(e,t){var a=h(e,t);return a.sort((function(e,t){var a=e.friendlyName.toLowerCase(),r=t.friendlyName.toLowerCase();return a<r?-1:a>r?1:0})),Z(a)},isReachable:G,sortByName:function(e){return e.sort((function(e,t){var a=e.friendlyName.toLowerCase(),r=t.friendlyName.toLowerCase();return a<r?-1:a>r?1:0})),e},setArea:D,area:A,lightCount:function(e){var t=0,a=V("LIGHT");for(var r in a)"all"===e.toLowerCase()?t+=1:"off"===e.toLowerCase()?"OFF"!==a[r].PowerController.powerState.value&&G(a[r])||(t+=1):"on"===e.toLowerCase()&&"ON"===a[r].PowerController.powerState.value&&G(a[r])&&(t+=1);return t},defaultPlayer:R,setDefaultPlayer:W,userPlayer:J,setUserPlayer:U,getModes:function(e){for(var t={},a=0;a<e.interfaces.length;a++)if("ModeController"===e[e.interfaces[a]].controller){for(var r=e[e.interfaces[a]],n=r.capabilityResources.friendlyNames[0].value.text,o=[],i=0;i<r.configuration.supportedModes.length;i++)o[r.configuration.supportedModes[i].value]=r.configuration.supportedModes[i].modeResources.friendlyNames[0].value.text;t[n]=o}return t},directive:y,getSceneDetails:a,saveSceneDetails:n}},e.children)}},64:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(57);function i(e){return n.a.createElement(o.a,e,n.a.createElement("path",{d:"M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6C7.8 12.16 7 10.63 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"}))}i.muiName="SvgIcon",t.default=i},68:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(9),i=a.n(o),s=(a(108),a(70)),c=a(78);i.a.render(n.a.createElement(s.default,null),document.getElementById("root")),c.register()},69:function(e,t,a){"use strict";a.r(t),a.d(t,"ThemeContext",(function(){return d})),a.d(t,"default",(function(){return p}));var r=a(6),n=a(0),o=a.n(n),i=a(37),s=a(38),c=a(321),l=a(116),u=a(45),d=o.a.createContext();function p(e){var t=Object(n.useState)(""),a=Object(r.a)(t,2),p=a[0],f=a[1],m=Object(n.useState)({}),v=Object(r.a)(m,2),h=v[0],g=v[1],y=Object(n.useContext)(u.UserContext),b=y.chooseUserTheme,j=y.userTheme;function O(){if(h.hasOwnProperty("palette"))return h;var e=(new Date).getHours();return e>17||e<8?s.default:i.default}function S(e){return"dark"===e?(f("dark"),g(s.default),s.default):"light"===e?(f("light"),g(i.default),i.default):O()}return Object(n.useEffect)((function(){var e=(new Date).getHours();"dark"===j||e>17||e<8?(f("dark"),g(s.default)):(f("light"),g(i.default))}),[j]),o.a.createElement(d.Provider,{value:{colorScheme:p,sofaTheme:h,applyTheme:S,getTheme:O,pickUserTheme:function(e){b(e),S(e),console.log("set user theme to ",e)}}},o.a.createElement(c.a,{theme:O()},o.a.createElement(l.a,null),e.children))}},70:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return h}));var r=a(6),n=a(0),o=a.n(n),i=a(71),s=a(74),c=a(24),l=a(116),u=a(42),d=a(63),p=a(16),f=a(45),m=a(69),v=a(12);function h(e){var t=Object(n.useState)(!1),a=Object(r.a)(t,2),h=a[0],g=a[1],y=Object(n.useState)(window.innerWidth),b=Object(r.a)(y,2),j=b[0],O=b[1],S=j<=800;function C(){O(window.innerWidth)}return Object(n.useEffect)((function(){window.addEventListener("resize",C)}),[]),o.a.createElement(v.default,null,o.a.createElement(f.default,null,o.a.createElement(m.default,null,o.a.createElement(p.LayoutProvider,null,o.a.createElement(u.default,null,o.a.createElement(d.default,null,!S&&o.a.createElement(i.default,{open:function(){g(!h)},mobile:S}),o.a.createElement(c.default,null,o.a.createElement(s.default,null)))),o.a.createElement(l.a,null)))))}},71:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return y}));var r=a(0),n=a.n(r),o=a(32),i=a(16),s=a(12),c=a(82),l=a.n(c),u=a(100),d=a.n(u),p=a(101),f=a.n(p),m=a(111),v=a.n(m),h=a(94),g=Object(o.a)((function(e){return{list:{minWidth:320},flex:{flex:1},menuButton:{marginLeft:-12,marginRight:20},desktopTop:{paddingTop:"env(safe-area-inset-top)"},phoneTop:{paddingTop:"env(safe-area-inset-top)",height:2},fab:{position:"fixed",bottom:16,left:"calc(100vw - 80px)",marginBottom:"env(safe-area-inset-bottom)",zIndex:1200},fabBack:{position:"fixed",bottom:24,left:"calc(100vw - 128px)",padding:0,marginBottom:"env(safe-area-inset-bottom)",boxSizing:"content-box",zIndex:1200}}}));function y(e){var t=g(),a=Object(r.useContext)(i.LayoutContext),o=a.applyHomePage,c=a.masterButtonState,u=a.goBack,p=a.goHome,m=a.backPage,y=Object(r.useContext)(s.NetworkContext),b=y.loggedIn,j=y.connectError;return!1===b||j?n.a.createElement(h.a,{className:t.fab,color:"primary",onClick:function(){return"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})),void window.location.reload(!0)}},n.a.createElement(v.a,null)):n.a.createElement(n.a.Fragment,null,n.a.createElement(h.a,{className:t.fab,color:"primary",onClick:function(){return"Home"===c&&p(),void("System"===c&&o("System"))}},"System"===c&&n.a.createElement(l.a,null),"Home"===c&&n.a.createElement(d.a,null)),m.name&&n.a.createElement(h.a,{size:"small",color:"primary",onClick:function(){return u()},className:t.fabBack},n.a.createElement(f.a,null)))}},72:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return i}));var r=a(0),n=a.n(r),o=a(27);function i(e){return n.a.createElement(o.default,{wide:!0,nopaper:!0})}},74:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return h}));var r=a(0),n=a.n(r),o=a(16),i=a(12),s=a(32),c=a(40),l=a(51),u=a(25),d=a(59),p=a(75),f=a(48),m=a(76),v=Object(s.a)((function(e){return{controlArea:{margin:"8px auto",maxWidth:1920,width:"100vw",boxSizing:"border-box",display:"flex",justifyContent:"center"},mobileControlArea:{minHeight:"100%",margin:"8px auto",maxWidth:600,width:"100%",marginTop:"env(safe-area-inset-top)",marginBottom:"env(safe-area-inset-top)",boxSizing:"border-box",alignContent:"flex-start",display:"flex"},version:{paddingLeft:16,opacity:"0.5"},scrollHolder:{display:"flex",flex:3,paddingBottom:0,marginBottom:0,overflowY:"auto",marginLeft:"calc(100vw - 100%)",alignContent:"flex-start",flexDirection:"column",minWidth:"100%",backgroundColor:e.palette.layer.body}}}));function h(e){var t=Object(r.useContext)(o.LayoutContext),a=t.layout,s=t.isMobile,h=t.renderSuspenseModule,g=Object(r.useContext)(i.NetworkContext),y=g.streamStatus,b=g.streamConnected,j=g.connectError,O=g.loggedIn,S=v();return O?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:S.scrollHolder},n.a.createElement(c.a,{container:!0,spacing:s&&"single"===a.data.type?2:8,className:s?S.mobileControlArea:S.controlArea},function(){if("single"===a.data.type)return h(a.name,a.props);if("pages"===a.data.type){if(s||a.page)return a.hasOwnProperty("page")&&""!==a.page?n.a.createElement(l.default,{wide:!0,key:a.page,name:a.page,page:a.data.pages[a.page]}):n.a.createElement(l.default,{wide:!0,key:a.data.order[0],name:a.data.order[0],page:a.data.pages[a.data.order[0]]});for(var e=[],t=0;t<a.data.order.length;t++){var r=a.data.order[t];e.push(n.a.createElement(l.default,{key:r,name:r,page:a.data.pages[r]}))}return e}return null}(),!b&&n.a.createElement(c.a,{container:!0,spacing:2,className:s?S.mobileControlArea:S.controlArea},n.a.createElement(u.a,null,n.a.createElement(d.a,{primary:"Network not ready",secondary:"Server Side Event Stream not connected:"+b+" "+y}))))),s&&n.a.createElement(m.default,null)):n.a.createElement(n.a.Fragment,null,j&&n.a.createElement(f.default,null),n.a.createElement(c.a,{container:!0,spacing:2,justify:"center",alignItems:"center",className:s?S.mobileControlArea:S.controlArea},n.a.createElement(p.default,null)))}},75:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return h}));var r=a(6),n=a(0),o=a.n(n),i=a(12),s=a(32),c=a(40),l=a(27),u=a(25),d=a(59),p=a(117),f=a(319),m=a(60),v=Object(s.a)({loginBox:{marginTop:"30%",margin:"auto"},controlArea:{height:"90%",margin:"8px auto",maxWidth:1440,boxSizing:"border-box",overflowY:"auto",width:"100%"},form:{width:"100%"}});function h(e){var t=Object(n.useContext)(i.NetworkContext),a=t.login,s=t.getCookie,h=Object(n.useState)(s("user")),g=Object(r.a)(h,2),y=g[0],b=g[1],j=Object(n.useState)(""),O=Object(r.a)(j,2),S=O[0],C=O[1],w=Object(n.useState)(""),x=Object(r.a)(w,2),E=x[0],k=x[1],P=v();function L(){a(y,S).then((function(e){return function(e){console.log("resulting token",e),e?(k(""),window.location.replace(window.location)):k("Incorrect credentials")}(e)}))}return o.a.createElement(c.a,{container:!0,spacing:2,justify:"center",alignItems:"center",className:P.controlArea},o.a.createElement(l.default,{wide:e.wide,className:P.loginBox},o.a.createElement(u.a,{style:{display:"flex",justifyContent:"center"}},o.a.createElement(m.a,{variant:"h6"},"Sofa Login")),o.a.createElement(u.a,null,o.a.createElement(p.a,{fullWidth:!0,variant:"outlined",onChange:function(e){return b(e.target.value)},value:y,id:"user",label:"User",type:"mail"})),o.a.createElement(u.a,null,o.a.createElement(p.a,{fullWidth:!0,variant:"outlined",onChange:function(e){return C(e.target.value)},onKeyDown:function(e){13===e.keyCode&&L()},id:"password",label:"Password",type:"password",defaultValue:""})),o.a.createElement(u.a,null,o.a.createElement(d.a,{primary:E})),o.a.createElement(u.a,{style:{display:"flex",justifyContent:"center"}},o.a.createElement(f.a,{fullWidth:!0,onClick:function(){return L()}},"Login"))))}},76:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return j}));var r=a(6),n=a(0),o=a.n(n),i=a(16),s=a(93),c=a(320),l=a(61),u=a(82),d=a.n(u),p=a(64),f=a(99),m=a.n(f),v=a(113),h=a.n(v),g=a(97),y=a.n(g),b=Object(s.a)({mobileBar:{boxSizing:"border-box",alignContent:"flex-start",zIndex:1e3,display:"flex"}});function j(){var e=b(),t=o.a.useState(0),a=Object(r.a)(t,2),s=a[0],u=a[1],f=Object(n.useContext)(i.LayoutContext).applyHomePage;return o.a.createElement(c.a,{value:s,onChange:function(e,t){var a;a=t,console.log("section",a),u(a),0===a&&f("Audio Video"),1===a&&f("Lights and Comfort"),2===a&&f("Climate"),3===a&&f("Security"),4===a&&f("System")},showLabels:!0,className:e.mobileBar},o.a.createElement(l.a,{label:"AV",icon:o.a.createElement(m.a,null)}),o.a.createElement(l.a,{label:"Lights",icon:o.a.createElement(p.default,null)}),o.a.createElement(l.a,{label:"Climate",icon:o.a.createElement(y.a,null)}),o.a.createElement(l.a,{label:"Security",icon:o.a.createElement(h.a,null)}),o.a.createElement(l.a,{label:"More",icon:o.a.createElement(d.a,null)}))}},77:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return o})),a.d(t,"AlexaController",(function(){return i})),a.d(t,"AlexaControllerProperty",(function(){return s}));var r=a(46),n=a(47),o=function(){function e(t){Object(r.a)(this,e),this.endpointId=t.endpointId,this.friendlyName=t.friendlyName,this.manufacturerName=t.manufacturerName,this.description=t.description,this.displayCategories=t.displayCategories,this.interfaces=[],this.interfaceobjects=[];for(var a=0;a<t.capabilities.length;a++){var n=t.capabilities[a].interface.split(".")[1];t.capabilities[a].hasOwnProperty("instance")&&(n=t.capabilities[a].instance.split(".")[1]),t.capabilities[a].interface.split(".")[1]&&!this.interfaces.includes(n)&&(this[n]=new i(this,t.capabilities[a]),this.interfaces.push(n),this.interfaceobjects.push(this[n]))}}return Object(n.a)(e,[{key:"hasData",value:function(){for(var e in this.interfaceobjects)for(var t in e.propertyobjects)if(null===t.value)return console.log("device is missing data",this.endpointId,this.friendlyName,e.controller,t),!1;return!0}},{key:"newtoken",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return((15&(e^crypto.getRandomValues(new Uint8Array(1))[0]))>>e/4).toString(16)}))}},{key:"responseHandler",value:function(e){return e}},{key:"properties",value:function(){for(var e=[],t=0;t<this.interfaces.length;t++)e=e.concat(this[this.interfaces[t]].properties);return e}},{key:"controllerForProperty",value:function(e){for(var t=0;t<this.interfaces.length;t++)if(this[this.interfaces[t]].properties.includes(e))return this.interfaces[t];return""}}]),e}(),i=function(){function e(t,a){if(Object(r.a)(this,e),this.device=t,this.namespace=a.interface.split(".")[0],this.controller=a.interface.split(".")[1],this.properties=[],this.propertyobjects=[],a.hasOwnProperty("configuration")&&(this.configuration=a.configuration),a.hasOwnProperty("inputs")&&(this.inputs=a.inputs),a.hasOwnProperty("instance")&&(this.instance=a.instance),a.hasOwnProperty("capabilityResources")&&(this.capabilityResources=a.capabilityResources),a.hasOwnProperty("properties")&&a.properties.hasOwnProperty("supported"))for(var n=0;n<a.properties.supported.length;n++)this[a.properties.supported[n].name]=new s,this.properties.push(a.properties.supported[n].name),this.propertyobjects.push(this[a.properties.supported[n].name])}return Object(n.a)(e,[{key:"directive",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n="https://"+window.location.hostname,o={name:e,namespace:this.namespace+"."+this.controller,payloadVersion:"3",messageId:this.device.newtoken(),correlationToken:this.device.newtoken()};this.hasOwnProperty("instance")&&(o.instance=this.instance);var i={endpointId:this.device.endpointId,cookie:r,scope:{type:"BearerToken",token:"sofa-interchange-token"}},s={directive:{header:o,endpoint:i,payload:a}};return console.log("Sending device-based alexa command:",s),fetch(n+"/directive",{withCredentials:!0,credentials:"include",method:"post",body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){return t.device.responseHandler(e)})).then((function(e){return e}))}}]),e}(),s=function(){function e(){Object(r.a)(this,e),this.value=null}return Object(n.a)(e,[{key:"deepvalue",get:function(){return this.value?this.value.hasOwnProperty("value")?this.value.value:this.value:null}}]),e}()},78:function(e,t,a){"use strict";a.r(t),a.d(t,"register",(function(){return n})),a.d(t,"unregister",(function(){return i}));var r=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function n(e){if("serviceWorker"in navigator){if(new URL("/client",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/client","/service-worker.js");r?(!function(e,t){fetch(e).then((function(a){var r=a.headers.get("content-type");404===a.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):o(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):o(t,e)}))}}function o(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}function i(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}}},[[304,208,209]]]);
//# sourceMappingURL=main.2ace08f3.chunk.js.map