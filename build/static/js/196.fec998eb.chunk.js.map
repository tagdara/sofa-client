{"version":3,"sources":["controllers/properties/color.js"],"names":["useStyles","makeStyles","wide","width","indent","paddingLeft","paddingRight","button","minWidth","minHeight","revealIcon","height","color","sketchPickerStyles","default","picker","boxShadow","sl2sb","undefined","h","SL","s","l","SB","hue","saturation","brightness","t","sb2sl","Color","props","sl","classes","useState","setColor","openDialog","setOpenDialog","closeDialog","useEffect","item","value","directive","device","endpointId","instance","interface","variant","size","onClick","style","className","open","close","maxWidth","fullWidth","disableAlpha","styles","onChangeComplete","event","hsl","sendsb","defaultProps","live"],"mappings":"sTAOMA,EAAYC,YAAW,CAEzBC,KAAM,CACFC,MAAO,QAEXC,OAAQ,CACJC,YAAa,GACbC,aAAc,GAElBC,OAAQ,CACJC,SAAU,GACVC,UAAW,IAEfC,WAAY,CACRC,OAAQ,GACRR,MAAO,GACPS,MAAO,YAITC,EAAqB,CACvBC,QAAS,CACLC,OAAQ,CACJC,UAAW,UAKVC,EAAQ,SAACL,GAClB,QAAYM,IAARN,EAAJ,CACYA,EAAMO,EAAlB,IAAIC,EAAmBR,EAAMS,EAAzBD,EAA8BR,EAAMU,EACpCC,EAAK,CAACC,IAAIZ,EAAMO,EAAGM,WAAW,EAAGC,WAAW,GAC5CC,EAAIP,GAAQA,EAAK,GAAMA,EAAO,EAAEA,GAGpC,OAFAG,EAAGG,WAAaN,EAAKO,EACrBJ,EAAGE,WAAaL,EAAK,EAAI,EAAEO,EAAEJ,EAAGG,WAAaH,EAAGE,WACzCF,IAGEK,EAAQ,SAAChB,GAEJA,EAAMY,IAApB,IAAID,EAAgCX,EAAMa,WAAtCF,EAA6DX,EAAMc,WACnEN,EAAK,CAACD,EAAEP,EAAMY,IAAKH,EAAE,EAAGC,EAAE,GAG9B,OAFAF,EAAGE,GAAK,EAAIC,GAAiBA,EAAgB,EAC7CH,EAAGC,EAAID,EAAGE,GAAGF,EAAGE,EAAE,EAAIC,EAAcA,GAAeH,EAAGE,EAAE,GAAW,EAALF,EAAGE,EAAM,EAAO,EAALF,EAAGE,GAAOF,EAAGC,EAC/ED,GAGI,SAASS,EAAMC,GAE1B,IA0BgBC,EA1BVC,EAAUhC,IAFiB,EAGPiC,wBAASf,GAHF,mBAG1BN,EAH0B,KAGnBsB,EAHmB,OAIGD,oBAAS,GAJZ,mBAI1BE,EAJ0B,KAIdC,EAJc,KAmCjC,SAASC,IACLD,GAAc,GASlB,OAvCAE,qBAAU,gBACiBpB,IAAnBY,EAAMS,KAAKC,MACXN,EAASN,EAAM,CAACJ,IAAK,KAAMC,WAAW,IAAMC,WAAY,KAExDQ,EAASN,EAAME,EAAMS,KAAKC,MAAM5B,UAErC,CAACkB,EAAMS,KAAKC,QAEfF,qBAAU,gBAGiBpB,IAAnBY,EAAMS,KAAKC,OACXV,EAAMW,UAAUX,EAAMY,OAAOC,WAAY,kBAAmB,WAAY,CAAE,MAH/D,CAACnB,IAAK,KAAMC,WAAW,IAAMC,WAAY,IAG0C,GAAII,EAAMS,KAAKK,YAGlH,CAACd,EAAMS,KAAMT,EAAMY,OAAQZ,EAAMe,YAyBhC,oCACI,kBAAC,IAAD,CAAQC,QAAQ,WAAWC,KAAK,QAAQC,QAAU,kBAAMZ,GAAc,IAAQa,OAnBtElB,EAmBoFnB,EAlB5FmB,EACO,CAAE,gBAAkB,OAAOA,EAAE,EAAM,KAAc,IAARA,EAAE,EAAW,MAAe,IAARA,EAAE,EAAW,MAE9E,CAAE,gBAAkB,yBAe6EmB,UAAWlB,EAAQzB,QAAvH,SAEA,kBAAC,IAAD,CAAQ4C,KAAMhB,EAAYiB,MAAOf,EAAagB,SAAU,KAAMC,WAAW,GACrE,kBAAC,eAAD,CACIC,cAAY,EAACC,OAAQ3C,EACrBD,MAAQA,EACR6C,iBA7BhB,SAAiC7C,EAAO8C,GACpCxB,EAAStB,EAAM+C,QA8BP,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAQX,QAASX,EAAazB,MAAM,WAApC,UAGA,kBAAC,IAAD,CAAQoC,QApBxB,WACI,IAAIY,EAAO3C,EAAML,GACjBkB,EAAMW,UAAUX,EAAMY,OAAOC,WAAY,kBAAmB,WAAY,CAAE,MAAUiB,GAAU,GAAI9B,EAAMS,KAAKK,UAC7GR,GAAc,IAiB0BxB,MAAM,WAAlC,SASpBiB,EAAMgC,aAAe,CACjBC,MAAM","file":"static/js/196.fec998eb.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/styles';\nimport Button from '@material-ui/core/Button';\nimport { SketchPicker } from 'react-color'\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\n\nconst useStyles = makeStyles({\n        \n    wide: {\n        width: \"100%\",\n    },\n    indent: {\n        paddingLeft: 40,\n        paddingRight: 8,\n    },\n    button: {\n        minWidth: 96,\n        minHeight: 39,\n    },\n    revealIcon: {\n        height: 24,\n        width: 24,\n        color: \"FFE4B5\",\n    }\n});\n\nconst sketchPickerStyles = {\n    default: {\n        picker: { // See the individual picker source for which keys to use\n            boxShadow: 'none',\n        },\n    },\n}\n\nexport const sl2sb = (color) => {\n    if (color===undefined) { return undefined }\n    var SL = {h:color.h, s:color.s, l:color.l};\n    var SB = {hue:color.h, saturation:0, brightness:0};\n    var t = SL.s * (SL.l<0.5 ? SL.l : 1-SL.l);\n    SB.brightness = SL.l+t;\n    SB.saturation = SL.l>0 ? 2*t/SB.brightness : SB.saturation ;\n    return SB\n}    \n\nexport const sb2sl = (color) => {\n    \n    var SB = {hue:color.hue, saturation:color.saturation, brightness:color.brightness};\n    var SL = {h:color.hue, s:0, l:0};\n    SL.l = (2 - SB.saturation) * SB.brightness / 2;\n    SL.s = SL.l&&SL.l<1 ? SB.saturation*SB.brightness/(SL.l<0.5 ? SL.l*2 : 2-SL.l*2) : SL.s;\n    return SL\n}\n\nexport default function Color(props) {\n    \n    const classes = useStyles();\n    const [color, setColor] = useState(undefined);\n    const [openDialog, setOpenDialog] = useState(false);\n\n    useEffect(() => {\n        if (props.item.value===undefined) {\n            setColor(sb2sl({hue: 43.5, saturation:0.27, brightness: 1}))\n        } else {\n            setColor(sb2sl(props.item.value.color))\n        }\n    }, [props.item.value] )\n\n    useEffect(() => {\n        const reveal = {hue: 43.5, saturation:0.27, brightness: 1}\n        \n        if (props.item.value===undefined) {\n            props.directive(props.device.endpointId, 'ColorController', 'SetColor', { \"color\" : reveal }, {}, props.item.instance)\n        }\n    // eslint-disable-next-line    \n    }, [props.item, props.device, props.interface])\n\n\n    function handleColorSliderChange(color, event) {\n        setColor(color.hsl)\n    }\n\n    function gethsl(sl) {\n        if (sl) {\n            return { \"backgroundColor\":\"hsl(\"+sl['h']+\", \"+(sl['s']*100)+\"%, \"+(sl['l']*100)+\"%)\"}\n        }\n        return { \"backgroundColor\":\"hsl(255, 100%, 100%)\"}\n    }\n    \n    function closeDialog() {\n        setOpenDialog(false)\n    }\n    \n    function saveColor() { \n        var sendsb=sl2sb(color)\n        props.directive(props.device.endpointId, 'ColorController', 'SetColor', { \"color\" : sendsb }, {}, props.item.instance)\n        setOpenDialog(false)\n    }\n\n    return (\n        <>\n            <Button variant=\"outlined\" size=\"small\" onClick={ () => setOpenDialog(true) } style={gethsl(color)} className={classes.button }> &nbsp;\n            </Button>\n            <Dialog open={openDialog} close={closeDialog} maxWidth={'xs'} fullWidth={false} >\n                <SketchPicker\n                    disableAlpha styles={sketchPickerStyles}\n                    color={ color }\n                    onChangeComplete={ handleColorSliderChange }\n                />\n                <DialogActions>\n                    <Button onClick={closeDialog} color=\"primary\">\n                        CANCEL\n                    </Button>\n                    <Button onClick={saveColor} color=\"primary\">\n                        OK\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </>\n    );\n}\n\nColor.defaultProps = {\n    live: false\n}\n\n"],"sourceRoot":""}