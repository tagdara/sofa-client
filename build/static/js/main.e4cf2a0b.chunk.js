(this["webpackJsonpsofa-client"]=this["webpackJsonpsofa-client"]||[]).push([[183],{101:function(e,t,r){},12:function(e,t,r){"use strict";r.r(t),r.d(t,"useStream",(function(){return l})),r.d(t,"useApi",(function(){return c})),r.d(t,"NetworkContext",(function(){return u})),r.d(t,"default",(function(){return d}));var a=r(93),n=r(6),o=r(0),i=r.n(o),s="https://"+window.location.hostname,l=function(e){var t=Object(o.useState)(void 0),r=Object(n.a)(t,2),i=r[0],l=r[1],c=Object(o.useState)([]),u=Object(n.a)(c,2),d=u[0],p=u[1],m=Object(o.useState)(!1),f=Object(n.a)(m,2),v=f[0],h=f[1];var g=i?i.readyState:10,y=void 0!==i&&1===i.readyState;return Object(o.useEffect)((function(){var t=!1,r=function(){console.log("SSE Opened"),h(!1)},a=function(){console.log("ERROR with EventSource")},n=function(e){for(var t=JSON.parse(e.data),r=0;r<d.length;r++)d[r](t)};return t||v||1===g||function(){if(e&&d.length>0&&!v){h(!0),console.log(".. Connecting event source:",e,d);var t=new EventSource(s+"/sse",{headers:{authorization:e},withCredentials:!0});t.addEventListener("message",n),t.addEventListener("error",a),t.addEventListener("open",r),l(t)}}(),function(){t=!0}}),[e,d,v,y,g]),{streamConnected:y,streamStatus:g,closeStream:function(){l(void 0)},addSubscriber:function(e){p((function(t){return[].concat(Object(a.a)(t),[e])}))}}},c=function(e,t,r){var a=Object(o.useState)(!0),i=Object(n.a)(a,2),l=i[0],c=i[1],u=Object(o.useState)(!1),d=Object(n.a)(u,2),p=d[0],m=d[1],f=Object(o.useState)(!1),v=Object(n.a)(f,2),h=v[0],g=v[1],y=Object(o.useState)(r),j=Object(n.a)(y,2),b=j[0],S=j[1];return Object(o.useEffect)((function(){var a=!1,n=function(e){return a?r:(g(400!==e.status&&401!==e.status),m(!e.ok),c(!1),400!==e.status&&401!==e.status&&e.ok&&e.json?e.json():r)};return e&&!a&&(c(!0),fetch(s+"/"+e,{method:"GET",headers:{authorization:t}}).then(n).catch(n)).then((function(e){return!a&&S(e)})),function(){a=!0}}),[e,t,r]),{isLoading:l,hasError:p,loggedIn:h,data:b}},u=Object(o.createContext)();function d(e){var t=Object(o.useState)(!0),r=Object(n.a)(t,2),a=r[0],c=r[1],d=Object(o.useState)(!1),p=Object(n.a)(d,2),m=p[0],f=p[1],v=Object(o.useState)(x("token")),h=Object(n.a)(v,2),g=h[0],y=h[1],j=l(g,[]),b=j.streamConnected,S=j.streamStatus,O=j.closeStream,C=j.addSubscriber;function w(e){return 400===e.status?(c(!1),console.log("Not logged in",e.status,e.statusText),{error:"login"}):401===e.status?(c(!1),console.log("Not logged in",e.status,e.statusText),{error:"login"}):e.ok?(f(!1),e.json()):(console.log("Error connecting",e.status,e.statusText),f(!0),{error:e.statusText})}function E(e,t,r){var a=new Date;return r=r||365,a.setTime(+a+864e5*r),window.document.cookie=e+"="+t+"; expires="+a.toGMTString()+"; path=/",t}function x(e){for(var t=e+"=",r=decodeURIComponent(document.cookie).split(";"),a=0;a<r.length;a++){for(var n=r[a];" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(t))return n.substring(t.length,n.length)}return""}return i.a.createElement(u.Provider,{value:{connectError:m,streamConnected:b,streamStatus:S,loggedIn:a,getJSON:function(e){return g&&a?fetch(s+"/"+e,{method:"GET",headers:{authorization:g}}).then((function(e){return w(e)})):(c(!1),new Promise((function(e,t){e(void 0)})))},postJSON:function(e,t){return g?fetch(s+"/"+e,{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",authorization:g},body:JSON.stringify(t)}).then((function(e){return w(e)})):(c(!1),new Promise((function(e,t){e(void 0)})))},login:function(e,t){console.log("Logging in as user",e,t);var r=new FormData;return r.append("user",e),r.append("password",t),fetch(s+"/login",{method:"post",body:r}).then((function(e){return e.json()})).then((function(t){return function(e,t){if(console.log("tokendata",t),t.hasOwnProperty("token"))return E("token",t.token,365),E("user",e,365),console.log("GetCookie",x("token")),y(t.token),a||c(!0),t.token}(e,t)}))},logout:function(){document.cookie="token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",console.log("logging out"),fetch(s+"/logout",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){return c(!1)})).then((function(e){return O()}))},addSubscriber:C,getCookie:x}},e.children)}},19:function(e,t,r){"use strict";r.r(t),r.d(t,"moduleReducer",(function(){return c})),r.d(t,"LayoutContext",(function(){return u})),r.d(t,"LayoutProvider",(function(){return d}));var a=r(6),n=r(11),o=r(0),i=r.n(o),s=r(12),l=r(66),c=function(e,t){return function(t){var a=Object(n.a)({},e);return t.forEach((function(e){var t;a.hasOwnProperty(e)||(console.log("adding module",e),a[e]=(t=e,i.a.lazy((function(){return r(279)("./"+t)}))))})),a}(t)},u=Object(o.createContext)({}),d=function(e){var t=Object(o.useContext)(s.NetworkContext),r=t.getJSON,n=t.loggedIn,d=window.innerWidth<=800,p=Object(o.useState)(void 0),m=Object(a.a)(p,2),f=m[0],v=m[1],h=Object(o.useState)(function(){for(var e={name:"Home",props:{},data:{},page:""},t=decodeURIComponent(document.cookie).split(";"),r=0;r<t.length;r++){for(var a=t[r];" "===a.charAt(0);)a=a.substring(1);0===a.indexOf("layout=")&&(e=JSON.parse(a.substring("layout=".length,a.length)))}d&&e.data.hasOwnProperty("mobile")&&!e.hasOwnProperty("page")&&(e.page=e.data.mobile);return e}()),g=Object(a.a)(h,2),y=g[0],j=g[1],b=Object(o.useState)({name:"",props:{}}),S=Object(a.a)(b,2),O=S[0],C=S[1],w=Object(o.useState)({name:"",props:{}}),E=Object(a.a)(w,2),x=E[0],k=E[1],L=Object(o.useState)("System"),P=Object(a.a)(L,2),N=P[0],A=P[1],T=Object(o.useReducer)(c,[]),D=Object(a.a)(T,2),B=D[0],I=D[1];function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{type:"single"};A("Home");var a={name:e,props:t,data:r,page:y.page};j(a),R(a)}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};k({name:e,props:t})}function R(e){var t=new Date;return t.setTime(+t+864e5),window.document.cookie="layout="+JSON.stringify(e)+"; expires="+t.toGMTString()+"; path=/",e}return Object(o.useEffect)((function(){r("layout").then((function(e){v(e)}))}),[r]),Object(o.useEffect)((function(){if(void 0!==f){if(f.hasOwnProperty("error"))return console.log("Error getting layout",f),void j(void 0);if(d)return void("Home"===y.name&&f.Home.hasOwnProperty("mobile")&&y.page===f.Home.mobile?A("System"):A("Home"));var e={name:"Home",props:{},data:f.Home};return j(e),void R(e)}}),[f,d]),Object(o.useEffect)((function(){function e(e,t){if(t.data.pages.hasOwnProperty(e)){for(var r=t.data.pages[e],a=[],n=0;n<r.length;n++)a.push(r[n].module);I(a)}else console.log("Page",e,"not found in layout")}var t;t=y,n&&("pages"===y.data.type?d?t.hasOwnProperty("page")?t.data.hasOwnProperty("mobile")&&t.page===t.data.mobile?I([t.data.mobile]):e(t.page,t):t.data.hasOwnProperty("mobile")?I([t.data.mobile]):e(Object.keys(t.data.pages)[0],t):function(t,r){for(var a=0,n=Object.keys(r.data.pages);a<n.length;a++)e(n[a],r)}(y.name,t):I([y.name]))}),[y,d]),i.a.createElement(u.Provider,{value:{layouts:f,layout:y,modules:B,renderSuspenseModule:function(e,t){if(B.hasOwnProperty(e)){var r=B[e];return t.wide=!0,i.a.createElement(i.a.Suspense,{fallback:i.a.createElement(l.default,{name:e})},i.a.createElement(r,Object.assign({key:e},t)))}return null},backPage:x,returnPage:O,applyLayout:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};A("Home"!==e?"Home":"System");var r={name:e,props:t,data:f[e],page:y.page};j(r),R(r)},applyLayoutCard:H,applyLayoutPage:function(e){console.log("Apply layout page",e);var t={name:y.name,props:y.props,data:y.data,page:e};j(t),R(t)},applyHomePage:function(e){A("Home");var t={name:"Home",props:y.props,data:f.Home,page:e};j(t),R(t)},applyReturnPage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};C({name:e,props:t})},applyBackPage:M,goBack:function(){H(x.name,x.props),M("",{})},goHome:function(){var e={name:"Home",props:{},data:f.Home,page:f.Home.order[0]};d&&f.Home.hasOwnProperty("mobile")&&(console.log("setting home to mobile"),e.page=f.Home.mobile),j(e),R(e),A("System")},isMobile:d,setMasterButtonState:A,masterButtonState:N}},e.children)}},22:function(e,t,r){"use strict";r.r(t);var a=r(43),n=r(44),o=r(95),i=r(94),s=r(96),l=r(0),c=r.n(l),u=r(45),d=function(e){function t(e){var r;return Object(a.a)(this,t),(r=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={hasError:!1,error:"",info:""},r}return Object(s.a)(t,e),Object(n.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0,error:e,info:t})}},{key:"render",value:function(){return this.state.hasError?c.a.createElement(u.default,{wide:this.props.wide,name:this.state.error.name,message:this.state.error.message}):this.props.children}}]),t}(l.Component);t.default=d},26:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return p}));var a=r(0),n=r.n(a),o=r(38),i=r(42),s=r.n(i),l=r(37),c=r(283),u=r(108),d=Object(o.a)((function(e){return{content:{borderWidth:"thin",borderStyle:"solid",borderColor:e.palette.divider,display:"flex",margin:0,boxSizing:"border-box",padding:"0",flexWrap:"wrap",alignItems:"center",flexGrow:1,minWidth:"320px",minHeight:80,flexBasis:0,position:"relative"},hover:{"&:hover":{backgroundColor:e.palette.background.hover,borderColor:e.palette.primary.dark}},nopad:{padding:0},list:{width:"100%"},nopadlist:{padding:0,width:"100%"},colorband:{borderLeft:"solid 5px #44F"},thinmargin:{margin:2,padding:0},normal:{padding:"4px !important"},inset:{marginTop:"-16px",zIndex:0},upper:{zIndex:900},color:{color:e.palette.primary.contrastText,backgroundColor:"#444",borderBottomRightRadius:0,borderBottomLeftRadius:0,padding:0}}}));function p(e){var t=d(),r=window.innerWidth<=800,a=n.a.createElement(n.a.Fragment,null,e.nolist?n.a.createElement(l.a,{container:!0},e.children):n.a.createElement(u.a,{className:e.nopad?t.nopadlist:t.list},e.children));return n.a.createElement(l.a,{item:!0,xs:e.xs?e.xs:r||e.wide?12:4,className:s()(e.inset?t.inset:t.upper,e.thinmargin?t.thinmargin:t.normal)},e.nopaper?n.a.createElement(n.a.Fragment,null,a):n.a.createElement(c.a,{elevation:e.elevation,className:s()(!e.color&&t.content,e.color&&t.color,e.hover&&t.hover,e.nopad&&t.nopad,e.colorband&&t.colorband)},a))}p.defaultProps={elevation:0,wide:!1,thinmargin:!1,nopaper:!1,inset:!1,color:!1}},271:function(e,t,r){e.exports=r(62)},279:function(e,t,r){var a={"./":[62,9],"./AdapterItem":[188,9,2,3,6,104],"./AdapterItem.js":[188,9,2,3,6,104],"./AdapterLayout":[221,9,2,3,6,67],"./AdapterLayout.js":[221,9,2,3,6,67],"./AdapterStatus":[189,9,105],"./AdapterStatus.js":[189,9,105],"./AlertSummary":[190,9,131],"./AlertSummary.js":[190,9,131],"./Area":[222,9,54],"./Area.js":[222,9,54],"./AreaHero":[223,9,0,1,48,62],"./AreaHero.js":[223,9,0,1,48,62],"./AreaLayout":[224,9,0,1,44,55],"./AreaLayout.js":[224,9,0,1,44,55],"./AreaLine":[174,9,75],"./AreaLine.js":[174,9,75],"./AreasLayout":[225,9,63],"./AreasLayout.js":[225,9,63],"./AutomationColumn":[193,9,4,5,30],"./AutomationColumn.js":[193,9,4,5,30],"./AutomationLayout":[226,9,2,3,4,5,28],"./AutomationLayout.js":[226,9,2,3,4,5,28],"./AutomationsFavorites":[196,9,56],"./AutomationsFavorites.js":[196,9,56],"./AutomationsLayout":[227,9,38],"./AutomationsLayout.js":[227,9,38],"./AvSummary":[199,9,106],"./AvSummary.js":[199,9,106],"./CameraLayout":[228,9,52,114],"./CameraLayout.js":[228,9,52,114],"./CameraSelect":[229,9,61,115],"./CameraSelect.js":[229,9,61,115],"./CameraSummary":[200,9,132],"./CameraSummary.js":[200,9,132],"./CompositeDevice":[148,9,49],"./CompositeDevice.js":[148,9,49],"./ComputerHero":[230,9,133],"./ComputerHero.js":[230,9,133],"./ComputerLayout":[231,9,50],"./ComputerLayout.js":[231,9,50],"./DataContext/AlexaDevice":[71,9],"./DataContext/AlexaDevice.js":[71,9],"./DataContext/DataProvider":[56,9],"./DataContext/DataProvider.js":[56,9],"./DataContext/DeviceProvider":[40,9],"./DataContext/DeviceProvider.js":[40,9],"./DeviceDialog":[149,9,4,5,57],"./DeviceDialog.js":[149,9,4,5,57],"./DeviceDirectiveLayout":[232,9,36],"./DeviceDirectiveLayout.js":[232,9,36],"./DeviceHero":[233,9,134],"./DeviceHero.js":[233,9,134],"./DeviceIcon":[134,9,58],"./DeviceIcon.js":[134,9,58],"./DeviceLayout":[234,9,5,53],"./DeviceLayout.js":[234,9,5,53],"./DevicePropertyLayout":[267,9,33],"./DevicePropertyLayout.js":[267,9,33],"./DeviceSummary":[202,9,135],"./DeviceSummary.js":[202,9,135],"./DotLevel":[150,9,93],"./DotLevel.js":[150,9,93],"./ErrorBoundary":[22,9],"./ErrorBoundary.js":[22,9],"./ErrorCard":[45,9],"./ErrorCard.js":[45,9],"./GridBreak":[142,9,159],"./GridBreak.js":[142,9,159],"./GridItem":[26,9],"./GridItem.js":[26,9],"./GridSearch":[145,9,160],"./GridSearch.js":[145,9,160],"./GridSection":[113,9,137],"./GridSection.js":[113,9,137],"./HistoryLayout":[235,9,2,3,6,94],"./HistoryLayout.js":[235,9,2,3,6,94],"./HistoryLine":[203,9,2,3,6,116],"./HistoryLine.js":[203,9,2,3,6,116],"./LightLayout":[236,9,0,1,41],"./LightLayout.js":[236,9,0,1,41],"./LightSummary":[204,9,138],"./LightSummary.js":[204,9,138],"./LightbulbOutline":[112,9,161],"./LightbulbOutline.js":[112,9,161],"./MasterButton":[65,9],"./MasterButton.js":[65,9],"./MiniLauncher":[237,9,140],"./MiniLauncher.js":[237,9,140],"./ModeChips":[238,9,141],"./ModeChips.js":[238,9,141],"./ModeLines":[167,9,142],"./ModeLines.js":[167,9,142],"./MoreDevicesLayout":[239,9,66,68],"./MoreDevicesLayout.js":[239,9,66,68],"./NetworkProvider":[12,9],"./NetworkProvider.js":[12,9],"./Opener":[240,9,4,16,107],"./Opener.js":[240,9,4,16,107],"./PlaceholderCard":[66,9],"./PlaceholderCard.js":[66,9],"./PlayerGroup":[241,9,59],"./PlayerGroup.js":[241,9,59],"./PlayerHero":[242,9,0,7,46],"./PlayerHero.js":[242,9,0,7,46],"./PlayersLayout":[243,9,76],"./PlayersLayout.js":[243,9,76],"./ReceiverHero":[244,9,0,18,162],"./ReceiverHero.js":[244,9,0,18,162],"./Scene":[191,9,81],"./Scene.js":[191,9,81],"./SceneAdd":[192,9,96],"./SceneAdd.js":[192,9,96],"./SecuritySummary":[211,9,117],"./SecuritySummary.js":[211,9,117],"./ShortcutHero":[245,9,143],"./ShortcutHero.js":[245,9,143],"./SmallSlider":[133,9,0,163],"./SmallSlider.js":[133,9,0,163],"./SofaApp":[64,9],"./SofaApp.js":[64,9],"./SofaAppContent":[68,9],"./SofaAppContent.js":[68,9],"./SofaAvatarSlider":[143,9,0,147],"./SofaAvatarSlider.js":[143,9,0,147],"./SofaLogin":[70,9],"./SofaLogin.js":[70,9],"./SofaPage":[69,9],"./SofaPage.js":[69,9],"./SofaSlider":[114,9,0,164],"./SofaSlider.js":[114,9,0,164],"./SofaSnackbar":[266,9,119],"./SofaSnackbar.js":[266,9,119],"./SummaryLayout":[246,9,31],"./SummaryLayout.js":[246,9,31],"./SystemLayout":[247,9,43],"./SystemLayout.js":[247,9,43],"./ThermostatHero":[248,9,148],"./ThermostatHero.js":[248,9,148],"./ThermostatHistory":[249,9,2,6,29,136],"./ThermostatHistory.js":[249,9,2,6,29,136],"./ThermostatLayout":[250,9,0,69],"./ThermostatLayout.js":[250,9,0,69],"./ThermostatSummary":[212,9,165],"./ThermostatSummary.js":[212,9,165],"./ToggleAvatar":[57,9],"./ToggleAvatar.js":[57,9],"./ToggleButton":[144,9,166],"./ToggleButton.js":[144,9,166],"./ToggleChip":[251,9,150],"./ToggleChip.js":[251,9,150],"./ToggleIconButton":[210,9,151],"./ToggleIconButton.js":[210,9,151],"./TvHero":[252,9,0,17,80],"./TvHero.js":[252,9,0,17,80],"./ZoneHero":[253,9,120],"./ZoneHero.js":[253,9,120],"./ZoneLayout":[254,9,2,3,6,79],"./ZoneLayout.js":[254,9,2,3,6,79],"./automation/AutomationItemBase":[255,9,167],"./automation/AutomationItemBase.js":[255,9,167],"./automation/ScheduleDays":[163,9,149],"./automation/ScheduleDays.js":[163,9,149],"./automation/ScheduleInterval":[162,9,97],"./automation/ScheduleInterval.js":[162,9,97],"./automation/ScheduleItem":[197,9,121],"./automation/ScheduleItem.js":[197,9,121],"./automation/ScheduleStart":[161,9,84],"./automation/ScheduleStart.js":[161,9,84],"./automation/UnitButton":[155,9,152],"./automation/UnitButton.js":[155,9,152],"./automation/automationAction":[175,9,4,5,34],"./automation/automationAction.js":[175,9,4,5,34],"./automation/automationActionNew":[256,9,39],"./automation/automationActionNew.js":[256,9,39],"./automation/automationAdd":[198,9,98],"./automation/automationAdd.js":[198,9,98],"./automation/automationCondition":[176,9,32],"./automation/automationCondition.js":[176,9,32],"./automation/automationDetails":[180,9,2,3,122],"./automation/automationDetails.js":[180,9,2,3,122],"./automation/automationHeader":[195,9,2,3,64],"./automation/automationHeader.js":[195,9,2,3,64],"./automation/automationItem":[164,9,72],"./automation/automationItem.js":[164,9,72],"./automation/automationSave":[194,9,153],"./automation/automationSave.js":[194,9,153],"./automation/automationSchedule":[178,9,47],"./automation/automationSchedule.js":[178,9,47],"./automation/automationTitle":[179,9,168],"./automation/automationTitle.js":[179,9,168],"./automation/automationTrigger":[177,9,4,5,35],"./automation/automationTrigger.js":[177,9,4,5,35],"./automation/automationTriggerReal":[257,9,40],"./automation/automationTriggerReal.js":[257,9,40],"./automation/operatorButton":[154,9,154],"./automation/operatorButton.js":[154,9,154],"./camera/cameraDialog":[156,9,85],"./camera/cameraDialog.js":[156,9,85],"./camera/securitycamera":[165,9,51],"./camera/securitycamera.js":[165,9,51],"./controllers/BrightnessController":[136,9,0,82],"./controllers/BrightnessController.js":[136,9,0,82],"./controllers/ColorController":[137,9,1,86],"./controllers/ColorController.js":[137,9,1,86],"./controllers/ColorTemperatureController":[138,9,0,83],"./controllers/ColorTemperatureController.js":[138,9,0,83],"./controllers/EndpointHealth":[139,9,99],"./controllers/EndpointHealth.js":[139,9,99],"./controllers/PowerController":[140,9,77],"./controllers/PowerController.js":[140,9,77],"./controllers/StateController":[141,9,87],"./controllers/StateController.js":[141,9,87],"./controllers/properties/brightness":[125,9,0,8],"./controllers/properties/brightness.js":[125,9,0,8],"./controllers/properties/color":[116,9,1,19],"./controllers/properties/color.js":[116,9,1,19],"./controllers/properties/connectivity":[117,9,20],"./controllers/properties/connectivity.js":[117,9,20],"./controllers/properties/detectionState":[118,9,21],"./controllers/properties/detectionState.js":[118,9,21],"./controllers/properties/duration":[126,9,14],"./controllers/properties/duration.js":[126,9,14],"./controllers/properties/input":[119,9,22],"./controllers/properties/input.js":[119,9,22],"./controllers/properties/mode":[120,9,23],"./controllers/properties/mode.js":[120,9,23],"./controllers/properties/onLevel":[127,9,0,9],"./controllers/properties/onLevel.js":[127,9,0,9],"./controllers/properties/powerLevel":[128,9,0,10],"./controllers/properties/powerLevel.js":[128,9,0,10],"./controllers/properties/powerState":[121,9,24],"./controllers/properties/powerState.js":[121,9,24],"./controllers/properties/pressState":[122,9,25],"./controllers/properties/pressState.js":[122,9,25],"./controllers/properties/surround":[123,9,26],"./controllers/properties/surround.js":[123,9,26],"./controllers/properties/targetSetpoint":[129,9,0,11],"./controllers/properties/targetSetpoint.js":[129,9,0,11],"./controllers/properties/targetTemperature":[130,9,0,12],"./controllers/properties/targetTemperature.js":[130,9,0,12],"./controllers/properties/thermostatMode":[124,9,27],"./controllers/properties/thermostatMode.js":[124,9,27],"./controllers/properties/time":[131,9,15],"./controllers/properties/time.js":[131,9,15],"./controllers/properties/volume":[132,9,0,13],"./controllers/properties/volume.js":[132,9,0,13],"./deviceSelect/Device":[146,9,5,139],"./deviceSelect/Device.js":[146,9,5,139],"./deviceSelect/deviceExpand":[173,9,42],"./deviceSelect/deviceExpand.js":[173,9,42],"./deviceSelect/deviceExpandActions":[157,9,124],"./deviceSelect/deviceExpandActions.js":[157,9,124],"./deviceSelect/deviceExpandEvents":[159,9,125],"./deviceSelect/deviceExpandEvents.js":[159,9,125],"./deviceSelect/deviceExpandProperties":[158,9,126],"./deviceSelect/deviceExpandProperties.js":[158,9,126],"./deviceSelect/deviceSelect":[258,9,37],"./deviceSelect/deviceSelect.js":[258,9,37],"./deviceSelect/sofaCategoryFilter":[218,9,60],"./deviceSelect/sofaCategoryFilter.js":[218,9,60],"./devices/Television":[214,9,0,17,95],"./devices/Television.js":[214,9,0,17,95],"./devices/TvRemote":[186,9,73],"./devices/TvRemote.js":[186,9,73],"./devices/Zone":[215,9,2,3,6,127],"./devices/Zone.js":[215,9,2,3,6,127],"./devices/receiver":[220,9,0,18],"./devices/receiver.js":[220,9,0,18],"./devices/statusLock":[207,9,128],"./devices/statusLock.js":[207,9,128],"./dialogs/PinDialog":[219,9,4,16],"./dialogs/PinDialog.js":[219,9,4,16],"./dialogs/SofaDialog":[147,9,4,179],"./dialogs/SofaDialog.js":[147,9,4,179],"./directives/SetBrightness":[259,9,0,146],"./directives/SetBrightness.js":[259,9,0,146],"./index":[62,9],"./index.css":[101,7],"./index.js":[62,9],"./layout/NewLayoutProvider":[19,9],"./layout/NewLayoutProvider.js":[19,9],"./light/Light":[160,9,0,1,45],"./light/Light.js":[160,9,0,1,45],"./light/LightSliderBrightness":[151,9,0,108],"./light/LightSliderBrightness.js":[151,9,0,108],"./light/LightSliderColor":[153,9,1,112],"./light/LightSliderColor.js":[153,9,1,112],"./light/LightSliderTemperature":[152,9,0,109],"./light/LightSliderTemperature.js":[152,9,0,109],"./logo.svg":[300,7,186],"./other/Computer":[216,9,100],"./other/Computer.js":[216,9,100],"./other/ComputerList":[260,9,88],"./other/ComputerList.js":[260,9,88],"./other/Device":[166,9,101],"./other/Device.js":[166,9,101],"./other/DeviceList":[181,9,89],"./other/DeviceList.js":[181,9,89],"./other/Matrix":[182,9,129],"./other/Matrix.js":[182,9,129],"./other/MatrixList":[201,9,113],"./other/MatrixList.js":[201,9,113],"./other/Mode":[184,9,102],"./other/Mode.js":[184,9,102],"./other/ModeList":[206,9,90],"./other/ModeList.js":[206,9,90],"./other/Shade":[183,9,78],"./other/Shade.js":[183,9,78],"./other/Sprinkler":[261,9,91],"./other/Sprinkler.js":[261,9,91],"./other/VirtualList":[205,9,74],"./other/VirtualList.js":[205,9,74],"./player/CoverDimmer":[217,9,180],"./player/CoverDimmer.js":[217,9,180],"./player/NoPlayer":[209,9,157],"./player/NoPlayer.js":[209,9,157],"./player/OldPlayerArtOverlay":[262,9,130],"./player/OldPlayerArtOverlay.js":[262,9,130],"./player/OldPlayerArtOverlayButtons":[263,9,65],"./player/OldPlayerArtOverlayButtons.js":[263,9,65],"./player/OldPlayerCard":[264,9,0,7,70],"./player/OldPlayerCard.js":[264,9,0,7,70],"./player/OldPlayerVolume":[265,9,0,110],"./player/OldPlayerVolume.js":[265,9,0,110],"./player/PlayerArtOverlay":[169,9,158],"./player/PlayerArtOverlay.js":[169,9,158],"./player/PlayerArtOverlayButtons":[170,9,92],"./player/PlayerArtOverlayButtons.js":[170,9,92],"./player/PlayerBase":[168,9,103],"./player/PlayerBase.js":[168,9,103],"./player/PlayerCard":[208,9,0,7,71],"./player/PlayerCard.js":[208,9,0,7,71],"./player/PlayerCover":[172,9,7,181],"./player/PlayerCover.js":[172,9,7,181],"./player/PlayerVolume":[171,9,0,118],"./player/PlayerVolume.js":[171,9,0,118],"./serviceWorker":[73,9],"./serviceWorker.js":[73,9],"./theme/SofaTheme":[63,9],"./theme/SofaTheme.js":[63,9],"./theme/sofaThemeDark":[35,9],"./theme/sofaThemeDark.js":[35,9],"./theme/sofaThemeLight":[34,9],"./theme/sofaThemeLight.js":[34,9],"./thermostat/TemperatureSensor":[185,9,182],"./thermostat/TemperatureSensor.js":[185,9,182],"./thermostat/Thermostat":[213,9,0,111],"./thermostat/Thermostat.js":[213,9,0,111],"./user/UserProvider":[72,9],"./user/UserProvider.js":[72,9]};function n(e){if(!r.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],n=t[0];return Promise.all(t.slice(2).map(r.e)).then((function(){return r.t(n,t[1])}))}n.keys=function(){return Object.keys(a)},n.id=279,e.exports=n},34:function(e,t,r){"use strict";r.r(t);var a=r(79),n=r(13),o=r.n(n),i=r(30),s=r.n(i);t.default=Object(a.a)({palette:{primary:{light:o.a[300],main:o.a[500],dark:o.a[700]},secondary:{light:s.a[300],main:s.a[500],dark:s.a[700]},background:{page:"#eee",hover:"rgba(255, 87, 34, 0.1)",card:"#efefef"},dot:{off:"#bbb",on:o.a[500]},avatar:{normal:o.a[500],off:o.a[700],on:o.a[500],notready:"#bbb",closed:"#6a6",open:"#e66",cool:"#00796B",mid:"#558B2F",hot:"#E65100"},type:"light"}})},35:function(e,t,r){"use strict";r.r(t);var a=r(79),n=r(13),o=r.n(n),i=r(30),s=r.n(i);t.default=Object(a.a)({direction:"ltr",palette:{primary:{light:o.a[300],main:o.a[500],dark:o.a[700]},secondary:{light:s.a[300],main:s.a[500],dark:s.a[700]},text:{primary:"#c0c0c0"},background:{default:"#000",page:"#111",hover:"rgba(188, 54, 12, 0.1)",paper:"#222",card:"#262626"},dot:{off:"#444",on:o.a[500]},avatar:{normal:o.a[500],off:o.a[700],on:o.a[500],notready:"#bbb",closed:"#6a6",open:"#e66",cool:"#00796B",mid:"#558B2F",hot:"#E65100"},type:"dark"}})},40:function(e,t,r){"use strict";r.r(t),r.d(t,"DeviceContext",(function(){return l})),r.d(t,"default",(function(){return d}));var a=r(6),n=r(11),o=r(0),i=r.n(o),s=r(12),l=Object(o.createContext)();function c(){try{return JSON.parse(localStorage.getItem("devices"))}catch(e){}return{}}var u=function(e,t){if(t==={})return e;if(!t.hasOwnProperty("event"))return e;var r=0,a=Object(n.a)({},e);switch(t.event.header.name){case"DeleteReport":for(r=0;r<t.event.payload.endpoints.length;r++)t.event.payload.endpoints[r].endpointId in a&&delete a[t.event.payload.endpoints[r].endpointId];return localStorage.setItem("devices",JSON.stringify(a)),a;case"AddOrUpdateReport":var o=c();for(o||(o={}),r=0;r<t.event.payload.endpoints.length;r++)"logic:area:Main"===t.event.payload.endpoints[r].endpointId&&console.log("AOU",t.event.payload.endpoints[r].endpointId,t.event.payload.endpoints[r]),o[t.event.payload.endpoints[r].endpointId]=t.event.payload.endpoints[r];return localStorage.setItem("devices",JSON.stringify(o)),o;default:return e}};function d(e){var t=Object(o.useContext)(s.NetworkContext),r=t.getJSON,n=t.postJSON,d=t.loggedIn,p=t.addSubscriber,m=c(),f=Object(o.useState)({}),v=Object(a.a)(f,2),h=v[0],g=v[1],y=Object(o.useState)({}),j=Object(a.a)(y,2),b=j[0],S=j[1],O=Object(o.useState)({}),C=Object(a.a)(O,2),w=C[0],E=C[1],x=Object(o.useState)("Main"),k=Object(a.a)(x,2),L=k[0],P=k[1],N=Object(o.useReducer)(u,m),A=Object(a.a)(N,2),T=A[0],D=A[1];function B(e){if(e in T)return T[e]}function I(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return((15&(e^crypto.getRandomValues(new Uint8Array(1))[0]))>>e/4).toString(16)}))}function H(e,t){var r=B(e);if(void 0!==r)for(var a=0;a<r.capabilities.length;a++){if(r.capabilities[a].interface.endsWith("."+t))return r.capabilities[a];if(r.capabilities[a].hasOwnProperty("instance")&&r.capabilities[a].instance.endsWith("."+t))return r.capabilities[a]}}return Object(o.useEffect)((function(){p(D)}),[]),Object(o.useEffect)((function(){console.log("logged in changed to",d),!0===d&&(r("directives").then((function(e){return S(e)})),r("properties").then((function(e){return g(e)})),r("list/logic/virtualDevices").then((function(e){return E(e)})))}),[d]),i.a.createElement(l.Provider,{value:{devices:T,virtualDevices:w,directives:b,controllerProperties:h,deviceByEndpointId:B,deviceByFriendlyName:function(e){for(var t in T)if(T[t].friendlyName===e)return T[t]},devicesByFriendlyName:function(e){var t=[];for(var r in T)(""===e||T[r].friendlyName.includes(e))&&t.push(T[r]);return t.sort((function(e,t){var r=e.friendlyName.toLowerCase(),a=t.friendlyName.toLowerCase();return r<a?-1:r>a?1:0})),t},devicesByCategory:function(e,t){e||(e="ALL"),Array.isArray(e)||(e=[e]);for(var r=[],a=0;a<e.length;a++){var n=e[a];for(var o in T)(T[o].displayCategories.includes(n)||"ALL"===n)&&(t&&!T[o].friendlyName.toLowerCase().includes(t.toLowerCase())||r.push(T[o]))}return r.sort((function(e,t){var r=e.friendlyName.toLowerCase(),a=t.friendlyName.toLowerCase();return r<a?-1:r>a?1:0})),r},devicesByController:function(e,t){if(!e)return[];Array.isArray(e)||(e=[e]);for(var r=[],a=0;a<e.length;a++)for(var n in T)for(var o=0;o<T[n].capabilities.length;o++)T[n].capabilities[o].interface.endsWith(e[a])&&(t&&!T[n].friendlyName.toLowerCase().includes(t.toLowerCase())||r.push(T[n]));return r.sort((function(e,t){var r=e.friendlyName.toLowerCase(),a=t.friendlyName.toLowerCase();return r<a?-1:r>a?1:0})),r},propertyNamesFromDevice:function(e){for(var t=[],r=0;r<e.capabilities.length;r++)t.push(e.capabilities[r].interface);return t},sortByName:function(e){return e.sort((function(e,t){var r=e.friendlyName.toLowerCase(),a=t.friendlyName.toLowerCase();return r<a?-1:r>a?1:0})),e},getChangeTimesForDevices:function(e,t){for(var r=[],a=0;a<t.length;a++)r.push(t[a].endpointId);return n("list/influx/last/"+e,r).then((function(e){return e}))},getHistoryForDevice:function(e,t,a){var n="list/influx/history/"+e+"/"+t;return a&&(n=n+"/"+a),r(n)},setArea:P,area:L,getModes:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r={},a=0;a<e.capabilities.length;a++)if(e.capabilities[a].interface.endsWith("ModeController")){var n=e.capabilities[a],o=n.capabilityResources.friendlyNames[0].value.text;if(!t.includes(o)){for(var i=[],s=0;s<n.configuration.supportedModes.length;s++)i[n.configuration.supportedModes[s].value]=n.configuration.supportedModes[s].modeResources.friendlyNames[0].value.text;r[o]=i}}return r},getInputs:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var t=[],r=0;r<e.capabilities.length;r++)if(e.capabilities[r].interface.endsWith("InputController"))for(var a=0;a<e.capabilities[r].inputs.length;a++)t.push(e.capabilities[r].inputs[a].name);return t},getController:H,directive:function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=H(e,t),i="https://"+window.location.hostname,s={name:r,namespace:o.interface,payloadVersion:"3",messageId:I(),correlationToken:I()};o.hasOwnProperty("instance")&&(s.instance=o.instance);var l={endpointId:e,cookie:n,scope:{type:"BearerToken",token:"sofa-interchange-token"}},c={directive:{header:s,endpoint:l,payload:a}};return console.log("Sending device-based alexa command:",c),fetch(i+"/directive",{withCredentials:!0,credentials:"include",method:"post",body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){return e}))}}},e.children)}},45:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return p}));var a=r(0),n=r.n(a),o=r(26),i=r(57),s=r(108),l=r(25),c=r(55),u=r(106),d=r.n(u);function p(e){return n.a.createElement(o.default,{wide:e.wide},n.a.createElement(s.a,null,n.a.createElement(l.a,null,n.a.createElement(i.default,{avatarState:"open"},n.a.createElement(d.a,null)),n.a.createElement(c.a,{primary:e.name,secondary:e.message})),n.a.createElement(l.a,null,n.a.createElement(c.a,{primary:"Reload",onClick:function(){return"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})),void window.location.reload(!0)}}))))}},56:function(e,t,r){"use strict";r.r(t),r.d(t,"DataContext",(function(){return d})),r.d(t,"deviceStatesReducer",(function(){return p})),r.d(t,"default",(function(){return m}));var a=r(6),n=r(17),o=r(11),i=r(0),s=r.n(i),l=r(12),c=r(40),u=r(71),d=Object(i.createContext)();var p=function(e,t){if(t==={})return e;if(!t.hasOwnProperty("event"))return e;var r=0,a=Object(o.a)({},e),i="",s="",l={};switch(t.event.header.name){case"Multistate":for(l in t.state){"sonos:player:RINCON_B8E937ECE1F001400"===l&&console.log("MS",t.state[l]);var c={};for(a.hasOwnProperty(l)&&(c=Object(o.a)({},a[l])),r=0;r<t.state[l].context.properties.length;r++){s=(i=t.state[l].context.properties[r]).namespace.split(".")[1],i.hasOwnProperty("instance")&&(s=i.instance.split(".")[1]),c.hasOwnProperty(s)||(c[s]={});try{i.value.hasOwnProperty("value")?i.deepvalue=i.value.value:i.deepvalue=i.value}catch(m){i.deepvalue=i.value}c=Object(o.a)({},c,Object(n.a)({},s,Object(o.a)({},c[s],Object(n.a)({},i.name,{value:i.value,deepvalue:i.deepvalue,timeOfSample:i.timeOfSample}))))}a=Object(o.a)({},a,Object(n.a)({},l,c)),"sonos:player:RINCON_B8E937ECE1F001400"===l&&console.log("MS+",Object(n.a)({},l,c))}return a;case"ChangeReport":if("elk:zone:27"===t.event.endpoint.endpointId&&console.log("CR",t),t.event.endpoint.endpointId in a){var u="",d={},p=t.event.endpoint.endpointId;for(l=Object(o.a)({},a[t.event.endpoint.endpointId]),r=0;r<t.event.payload.change.properties.length;r++){s=(i=t.event.payload.change.properties[r]).namespace.split(".")[1],i.hasOwnProperty("instance")&&(s=i.instance.split(".")[1]),u=i.name,d=Object(o.a)({},l[s]);try{i.value&&i.value.hasOwnProperty("value")?i.deepvalue=i.value.value:i.deepvalue=i.value}catch(f){i.deepvalue=i.value}l=Object(o.a)({},l,Object(n.a)({},s,Object(o.a)({},d,Object(n.a)({},u,Object(o.a)({},d[u],{value:i.value,deepvalue:i.deepvalue,timeOfSample:i.timeOfSample})))))}for(r=0;r<t.context.properties.length;r++){s=(i=t.context.properties[r]).namespace.split(".")[1],i.hasOwnProperty("instance")&&(s=i.instance.split(".")[1]),u=i.name,d=Object(o.a)({},l[s]);try{i.value&&i.value.hasOwnProperty("value")?i.deepvalue=i.value.value:i.deepvalue=i.value}catch(v){i.deepvalue=i.value}l=Object(o.a)({},l,Object(n.a)({},s,Object(o.a)({},d,Object(n.a)({},u,Object(o.a)({},d[u],{value:i.value,deepvalue:i.deepvalue,timeOfSample:i.timeOfSample})))))}return Object(o.a)({},a,Object(n.a)({},p,l))}return e;default:return e}};function m(e){var t=Object(i.useContext)(c.DeviceContext),r=t.deviceByEndpointId,n=t.devicesByCategory,m=t.devicesByFriendlyName,f=t.devicesByController,v=t.deviceByFriendlyName,h=t.directive,g=Object(i.useContext)(l.NetworkContext),y=g.getJSON,j=g.loggedIn,b=g.addSubscriber,S=function(){var e={},t=function(){try{return JSON.parse(localStorage.getItem("deviceStates"))}catch(e){}return{}}();for(var r in t)e[t[r].endpointId]=new u.default(t[r]);return e}(),O=Object(i.useState)({}),C=Object(a.a)(O,2),w=C[0],E=C[1],x=Object(i.useState)("Main"),k=Object(a.a)(x,2),L=k[0],P=k[1],N=Object(i.useReducer)(p,S),A=Object(a.a)(N,2),T=A[0],D=A[1],B=Object(i.useState)("sonos:player:RINCON_B8E937ECE1F001400"),I=Object(a.a)(B,2),H=I[0],M=I[1],R=Object(i.useState)(""),W=Object(a.a)(R,2),F=W[0],z=W[1];function U(e){return"OK"===e.EndpointHealth.connectivity.value.value}function G(e,t){var r=n(e,t);return r.sort((function(e,t){var r=e.friendlyName.toLowerCase(),a=t.friendlyName.toLowerCase();return r<a?-1:r>a?1:0})),J(r)}function J(e){for(var t=[],r=0;r<e.length;r++){var a=V(e[r]);void 0!==a&&(a.endpointId=e[r].endpointId,t.push(a))}return t}function V(e){var t=void 0;return T.hasOwnProperty(e.endpointId)&&(t=Object(o.a)({},e,{},T[e.endpointId])),t}return Object(i.useEffect)((function(){b(D)}),[]),Object(i.useEffect)((function(){console.log("logged in changed to",j),!0===j&&y("list/logic/virtualDevices").then((function(e){return E(e)}))}),[j]),s.a.createElement(d.Provider,{value:{deviceStates:T,virtualDeviceStates:w,deviceStateByEndpointId:function(e){var t=r(e);if(void 0!==t)return V(t)},deviceStateByFriendlyName:function(e){return V(v(e))},deviceStatesByFriendlyName:function(e){var t=m(e);return t.sort((function(e,t){var r=e.friendlyName.toLowerCase(),a=t.friendlyName.toLowerCase();return r<a?-1:r>a?1:0})),J(t)},deviceStatesByCategory:G,deviceStatesByController:function(e,t){var r=f(e,t);return r.sort((function(e,t){var r=e.friendlyName.toLowerCase(),a=t.friendlyName.toLowerCase();return r<a?-1:r>a?1:0})),J(r)},isReachable:U,sortByName:function(e){return e.sort((function(e,t){var r=e.friendlyName.toLowerCase(),a=t.friendlyName.toLowerCase();return r<a?-1:r>a?1:0})),e},setArea:P,area:L,lightCount:function(e){var t=0,r=G("LIGHT");for(var a in r)"all"===e.toLowerCase()?t+=1:"off"===e.toLowerCase()?"OFF"!==r[a].PowerController.powerState.value&&U(r[a])||(t+=1):"on"===e.toLowerCase()&&"ON"===r[a].PowerController.powerState.value&&U(r[a])&&(t+=1);return t},defaultPlayer:H,setDefaultPlayer:M,userPlayer:F,setUserPlayer:z,getModes:function(e){for(var t={},r=0;r<e.interfaces.length;r++)if("ModeController"===e[e.interfaces[r]].controller){for(var a=e[e.interfaces[r]],n=a.capabilityResources.friendlyNames[0].value.text,o=[],i=0;i<a.configuration.supportedModes.length;i++)o[a.configuration.supportedModes[i].value]=a.configuration.supportedModes[i].modeResources.friendlyNames[0].value.text;t[n]=o}return t},directive:h}},e.children)}},57:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(38),i=r(285),s=r(42),l=r.n(s),c=r(284),u=r(289),d=Object(o.a)((function(e){return{base:{padding:0,minWidth:56},reverse:{justifyContent:"flex-end",display:"flex"},sizeSmall:{minWidth:36,fontSize:10},avatarSmall:{height:28,width:28,fontSize:14},none:{color:e.palette.primary.dark,padding:"0 8px",fontSize:20}}}));function p(e){var t=d(),r={back:{backgroundColor:e.theme.palette.avatar[e.avatarState],color:e.theme.palette.primary.contrastText},noback:{color:e.theme.palette.avatar[e.avatarState]},none:{}};return n.a.createElement(c.a,{style:e.noback?r.noback:r.none,onClick:e.onClick,className:l()(e.small?t.sizeSmall:t.base,e.reverse&&t.reverse)},e.noback?n.a.createElement(n.a.Fragment,null,e.children):n.a.createElement(u.a,{style:r.back,className:l()(e.small&&t.avatarSmall),onClick:e.onClick},e.children))}p.defaultProps={reverse:!1,noback:!1,small:!1},t.default=Object(i.a)(p)},62:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(8),i=r.n(o),s=(r(101),r(64)),l=r(73);i.a.render(n.a.createElement(s.default,null),document.getElementById("root")),l.register()},63:function(e,t,r){"use strict";r.r(t),r.d(t,"ThemeContext",(function(){return u})),r.d(t,"default",(function(){return d})),r.d(t,"withThemeChange",(function(){return p}));var a=r(6),n=r(0),o=r.n(n),i=r(34),s=r(35),l=r(288),c=r(110),u=o.a.createContext();function d(e){var t=Object(n.useState)(""),r=Object(a.a)(t,2),d=r[0],p=r[1],m=Object(n.useState)({}),f=Object(a.a)(m,2),v=f[0],h=f[1];function g(){if(v.hasOwnProperty("palette"))return v;var e=(new Date).getHours();return e>17||e<8?s.default:i.default}return Object(n.useEffect)((function(){var e=(new Date).getHours();e>17||e<8?(p("dark"),h(s.default)):(p("light"),h(i.default))}),[]),o.a.createElement(u.Provider,{value:{colorScheme:d,sofaTheme:v,applyTheme:function(e){return"dark"===e?(p("dark"),h(s.default),s.default):"light"===e?(p("light"),h(i.default),i.default):g()},getTheme:g}},o.a.createElement(l.a,{theme:g()},o.a.createElement(c.a,null),e.children))}function p(e){return function(t){return o.a.createElement(u.Consumer,null,(function(r){return o.a.createElement(e,Object.assign({},t,r,{context:r,colorScheme:r.colorScheme,sofaTheme:r.sofaTheme,applyTheme:r.applyTheme}))}))}}},64:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return h}));var a=r(6),n=r(0),o=r.n(n),i=r(65),s=r(68),l=r(22),c=r(110),u=r(40),d=r(56),p=r(19),m=r(72),f=r(63),v=r(12);function h(e){var t=Object(n.useState)(!1),r=Object(a.a)(t,2),h=r[0],g=r[1],y=Object(n.useState)(window.innerWidth),j=Object(a.a)(y,2),b=j[0],S=j[1],O=b<=800;function C(){S(window.innerWidth)}return Object(n.useEffect)((function(){window.addEventListener("resize",C)}),[]),o.a.createElement(f.default,null,o.a.createElement(v.default,null,o.a.createElement(m.default,null,o.a.createElement(p.LayoutProvider,null,o.a.createElement(u.default,null,o.a.createElement(d.default,null,o.a.createElement(i.default,{open:function(){g(!h)},mobile:O}),o.a.createElement(l.default,null,o.a.createElement(s.default,null)))),o.a.createElement(c.a,null)))))}},65:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return y}));var a=r(0),n=r.n(a),o=r(38),i=r(19),s=r(12),l=r(105),c=r.n(l),u=r(97),d=r.n(u),p=r(98),m=r.n(p),f=r(104),v=r.n(f),h=r(85),g=Object(o.a)((function(e){return{list:{minWidth:320},flex:{flex:1},menuButton:{marginLeft:-12,marginRight:20},desktopTop:{paddingTop:"env(safe-area-inset-top)"},phoneTop:{paddingTop:"env(safe-area-inset-top)",height:2},fab:{position:"fixed",bottom:16,left:"calc(100vw - 80px)",marginBottom:"env(safe-area-inset-bottom)",zIndex:1200},fabBack:{position:"fixed",bottom:24,left:"calc(100vw - 128px)",padding:0,marginBottom:"env(safe-area-inset-bottom)",boxSizing:"content-box",zIndex:1200}}}));function y(e){var t=g(),r=Object(a.useContext)(i.LayoutContext),o=r.applyLayoutCard,l=r.masterButtonState,u=r.goBack,p=r.goHome,f=r.backPage,y=Object(a.useContext)(s.NetworkContext),j=y.loggedIn,b=y.connectError;return!1===j||b?n.a.createElement(h.a,{className:t.fab,color:"primary",onClick:function(){return"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})),void window.location.reload(!0)}},n.a.createElement(v.a,null)):n.a.createElement(n.a.Fragment,null,n.a.createElement(h.a,{className:t.fab,color:"primary",onClick:function(){return"Home"===l&&p(),void("System"===l&&o("SystemLayout"))}},"System"===l&&n.a.createElement(c.a,null),"Home"===l&&n.a.createElement(d.a,null)),f.name&&n.a.createElement(h.a,{size:"small",color:"primary",onClick:function(){return u()},className:t.fabBack},n.a.createElement(m.a,null)))}},66:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var a=r(0),n=r.n(a),o=r(26);function i(e){return n.a.createElement(o.default,{wide:!0,nopaper:!0})}},68:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return g}));var a=r(0),n=r.n(a),o=r(19),i=r(12),s=r(38),l=r(37),c=r(22),u=r(69),d=r(25),p=r(55),m=r(50),f=r(70),v=r(45),h=Object(s.a)({controlArea:{margin:"8px auto",maxWidth:1440,width:"100vw",boxSizing:"border-box"},mobileControlArea:{margin:"8px auto",maxWidth:600,width:"100%",marginTop:"env(safe-area-inset-top)",paddingTop:8,boxSizing:"border-box",minHeight:"100%",alignContent:"flex-start"},version:{paddingLeft:16,opacity:"0.5"}});function g(e){var t=Object(a.useContext)(o.LayoutContext),r=t.layout,s=t.isMobile,g=t.renderSuspenseModule,y=Object(a.useContext)(i.NetworkContext),j=y.streamStatus,b=y.streamConnected,S=y.connectError,O=y.loggedIn,C=h();return O?n.a.createElement(l.a,{container:!0,spacing:s&&"single"===r.data.type?2:8,className:s?C.mobileControlArea:C.controlArea},"pages"===r.data.type&&(!s||r.page||void 0===r.data.mobile)&&n.a.createElement(c.default,{wide:e.wide},r.data.order.map((function(e){return void 0!==r.page&&e!==r.page&&s?null:n.a.createElement(u.default,{key:e,name:e,page:r.data.pages[e]})}))),"single"===r.data.type&&n.a.createElement(c.default,{wide:e.wide},g(r.name,r.props)),"pages"===r.data.type&&s&&void 0!==r.data.mobile&&n.a.createElement(c.default,{wide:e.wide},g(r.page?r.page:r.data.mobile,r.props)),!b&&n.a.createElement(l.a,{container:!0,spacing:2,className:s?C.mobileControlArea:C.controlArea},n.a.createElement(d.a,null,n.a.createElement(p.a,{primary:"Network not ready",secondary:"Server Side Event Stream not connected:"+b+" "+j}))),"Home"===r.name&&n.a.createElement(m.a,{className:C.version,variant:"caption"},"2.2.20")):n.a.createElement(n.a.Fragment,null,S&&n.a.createElement(v.default,null),n.a.createElement(l.a,{container:!0,spacing:2,justify:"center",alignItems:"center",className:s?C.mobileControlArea:C.controlArea},n.a.createElement(f.default,null)))}},69:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return m}));var a=r(0),n=r.n(a),o=r(38),i=r(19),s=r(37),l=r(22),c=r(286),u=r(25),d=r(55),p=Object(o.a)((function(e){return{gridColumn:{margin:1,overflowX:"hidden",overflowY:"hidden",alignContent:"start",padding:"3px !important",backgroundColor:e.palette.background.page,borderRadius:"4px 4px 4px 4px",maxWidth:"33%"},mobileGridColumn:{margin:1,overflowX:"hidden",overflowY:"hidden",alignContent:"start",padding:"3px !important",backgroundColor:e.palette.background.page,borderRadius:"4px 4px 4px 4px"},paddedToolbar:{paddingBottom:"env(safe-area-inset-bottom)",marginBottom:"env(safe-area-inset-bottom)"}}}));function m(e){var t=p(),r=Object(a.useContext)(i.LayoutContext),o=r.isMobile,m=r.renderSuspenseModule;return n.a.createElement(s.a,{container:!0,item:!0,spacing:1,key:e.name,xs:o?12:4,className:o?t.mobileGridColumn:t.gridColumn},n.a.createElement(u.a,null,n.a.createElement(d.a,{primary:e.name})),e.page.map((function(t,r){return n.a.createElement(l.default,{wide:!0,key:e.name+r},m(t.module,t.props))})),o&&n.a.createElement(c.a,{className:t.paddedToolbar}))}},70:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return h}));var a=r(6),n=r(0),o=r.n(n),i=r(12),s=r(38),l=r(37),c=r(26),u=r(25),d=r(55),p=r(109),m=r(287),f=r(50),v=Object(s.a)({loginBox:{marginTop:"30%",margin:"auto"},controlArea:{height:"90%",margin:"8px auto",maxWidth:1440,boxSizing:"border-box",overflowY:"auto",width:"100%"},form:{width:"100%"}});function h(e){var t=Object(n.useContext)(i.NetworkContext),r=t.login,s=t.getCookie,h=Object(n.useState)(s("user")),g=Object(a.a)(h,2),y=g[0],j=g[1],b=Object(n.useState)(""),S=Object(a.a)(b,2),O=S[0],C=S[1],w=Object(n.useState)(""),E=Object(a.a)(w,2),x=E[0],k=E[1],L=v();function P(){r(y,O).then((function(e){return function(e){console.log("resulting token",e),e?(k(""),window.location.replace(window.location)):k("Incorrect credentials")}(e)}))}return o.a.createElement(l.a,{container:!0,spacing:2,justify:"center",alignItems:"center",className:L.controlArea},o.a.createElement(c.default,{wide:e.wide,className:L.loginBox},o.a.createElement(u.a,{style:{display:"flex",justifyContent:"center"}},o.a.createElement(f.a,{variant:"h6"},"Sofa Login")),o.a.createElement(u.a,null,o.a.createElement(p.a,{fullWidth:!0,variant:"outlined",onChange:function(e){return j(e.target.value)},value:y,id:"user",label:"User",type:"mail"})),o.a.createElement(u.a,null,o.a.createElement(p.a,{fullWidth:!0,variant:"outlined",onChange:function(e){return C(e.target.value)},onKeyDown:function(e){13===e.keyCode&&P()},id:"password",label:"Password",type:"password",defaultValue:""})),o.a.createElement(u.a,null,o.a.createElement(d.a,{primary:x})),o.a.createElement(u.a,{style:{display:"flex",justifyContent:"center"}},o.a.createElement(m.a,{fullWidth:!0,onClick:function(){return P()}},"Login"))))}},71:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return o})),r.d(t,"AlexaController",(function(){return i})),r.d(t,"AlexaControllerProperty",(function(){return s}));var a=r(43),n=r(44),o=function(){function e(t){Object(a.a)(this,e),this.endpointId=t.endpointId,this.friendlyName=t.friendlyName,this.manufacturerName=t.manufacturerName,this.description=t.description,this.displayCategories=t.displayCategories,this.interfaces=[],this.interfaceobjects=[];for(var r=0;r<t.capabilities.length;r++){var n=t.capabilities[r].interface.split(".")[1];t.capabilities[r].hasOwnProperty("instance")&&(n=t.capabilities[r].instance.split(".")[1]),t.capabilities[r].interface.split(".")[1]&&!this.interfaces.includes(n)&&(this[n]=new i(this,t.capabilities[r]),this.interfaces.push(n),this.interfaceobjects.push(this[n]))}}return Object(n.a)(e,[{key:"hasData",value:function(){for(var e in this.interfaceobjects)for(var t in e.propertyobjects)if(null===t.value)return console.log("device is missing data",this.endpointId,this.friendlyName,e.controller,t),!1;return!0}},{key:"newtoken",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return((15&(e^crypto.getRandomValues(new Uint8Array(1))[0]))>>e/4).toString(16)}))}},{key:"responseHandler",value:function(e){return e}},{key:"properties",value:function(){for(var e=[],t=0;t<this.interfaces.length;t++)e=e.concat(this[this.interfaces[t]].properties);return e}},{key:"controllerForProperty",value:function(e){for(var t=0;t<this.interfaces.length;t++)if(this[this.interfaces[t]].properties.includes(e))return this.interfaces[t];return""}}]),e}(),i=function(){function e(t,r){if(Object(a.a)(this,e),this.device=t,this.namespace=r.interface.split(".")[0],this.controller=r.interface.split(".")[1],this.properties=[],this.propertyobjects=[],r.hasOwnProperty("configuration")&&(this.configuration=r.configuration),r.hasOwnProperty("inputs")&&(this.inputs=r.inputs),r.hasOwnProperty("instance")&&(this.instance=r.instance),r.hasOwnProperty("capabilityResources")&&(this.capabilityResources=r.capabilityResources),r.hasOwnProperty("properties")&&r.properties.hasOwnProperty("supported"))for(var n=0;n<r.properties.supported.length;n++)this[r.properties.supported[n].name]=new s,this.properties.push(r.properties.supported[n].name),this.propertyobjects.push(this[r.properties.supported[n].name])}return Object(n.a)(e,[{key:"directive",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n="https://"+window.location.hostname,o={name:e,namespace:this.namespace+"."+this.controller,payloadVersion:"3",messageId:this.device.newtoken(),correlationToken:this.device.newtoken()};this.hasOwnProperty("instance")&&(o.instance=this.instance);var i={endpointId:this.device.endpointId,cookie:a,scope:{type:"BearerToken",token:"sofa-interchange-token"}},s={directive:{header:o,endpoint:i,payload:r}};return console.log("Sending device-based alexa command:",s),fetch(n+"/directive",{withCredentials:!0,credentials:"include",method:"post",body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){return t.device.responseHandler(e)})).then((function(e){return e}))}}]),e}(),s=function(){function e(){Object(a.a)(this,e),this.value=null}return Object(n.a)(e,[{key:"deepvalue",get:function(){return this.value?this.value.hasOwnProperty("value")?this.value.value:this.value:null}}]),e}()},72:function(e,t,r){"use strict";r.r(t),r.d(t,"UserContext",(function(){return i})),r.d(t,"default",(function(){return s}));var a=r(6),n=r(0),o=r.n(n),i=Object(n.createContext)();function s(e){var t=Object(n.useState)(""),r=Object(a.a)(t,2),s=r[0],l=r[1];return o.a.createElement(i.Provider,{value:{userPlayer:s,setUserPlayer:l}},e.children)}},73:function(e,t,r){"use strict";r.r(t),r.d(t,"register",(function(){return n})),r.d(t,"unregister",(function(){return i}));var a=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function n(e){if("serviceWorker"in navigator){if(new URL("/client",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/client","/service-worker.js");a?(!function(e,t){fetch(e).then((function(r){var a=r.headers.get("content-type");404===r.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):o(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):o(t,e)}))}}function o(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var r=e.installing;null!=r&&(r.onstatechange=function(){"installed"===r.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}function i(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}}},[[271,184,185]]]);
//# sourceMappingURL=main.e4cf2a0b.chunk.js.map