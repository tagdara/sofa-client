(this["webpackJsonpsofa-client"]=this["webpackJsonpsofa-client"]||[]).push([[153,169],{149:function(e,t,i){"use strict";i.r(t);var a=i(283),n=i(111),r=Object(a.a)((function(e){return{input:{minWidth:"100px",borderRadius:4,position:"relative",backgroundColor:e.palette.background.paper,border:"1px solid #ced4da",fontSize:16,padding:"10px 26px 10px 12px",transition:e.transitions.create(["border-color","box-shadow"]),"&:focus":{borderRadius:4,borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"}}}}))(n.a);t.default=r},179:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return N}));var a=i(11),n=i(6),r=i(0),c=i.n(r),l=i(38),o=i(335),d=i(25),s=i(338),u=i(109),v=i(333),m=i.n(v),p=i(341),f=i.n(p),b=i(342),x=i.n(b),w=i(144),h=i(149),E=i(26),y=i(37),O=i(357),g=i(327),k=Object(l.a)({flex:{display:"flex"},wideSelect:{width:"100%"}});function N(e){var t=k(),l=function(){if(void 0===e.device)return;var t=e.device;if(t.hasOwnProperty("capabilities"))for(var i=0;i<t.capabilities.length;i++)if(t.capabilities[i].interface.split(".")[1]===e.item.controller){if(void 0===e.item.instance&&void 0===t.capabilities[i].interface.instance)return t.capabilities[i];if(e.item.hasOwnProperty("instance")&&t.capabilities[i].hasOwnProperty("instance")&&e.item.instance===t.capabilities[i].instance.split(".")[1])return t.capabilities[i]}return void console.log("failed get interface",e.item.controller,e.item.instance,e.device)}(),v=Object(r.useState)(j(e.item.propertyName)),p=Object(n.a)(v,2),b=p[0],N=p[1];function j(e){if(void 0!==e)return c.a.lazy((function(){try{return i(388)("./"+e).catch((function(){return{default:function(){return t=e,c.a.createElement(u.a,{value:"failed"+t});var t}}}))}catch(t){return c.a.createElement(u.a,{value:"failed "+e})}}))}function P(t){if(void 0===e.device&&void 0===t)return[];var i=e.device;t&&(i=t);var a=[];if(console.log("XXXXY dev",i),!i.hasOwnProperty("capabilities"))return[];for(var n=0;n<i.capabilities.length;n++)e.directives.hasOwnProperty(i.capabilities[n].interface.split(".")[1])&&(a=a.concat(Object.keys(e.directives[i.capabilities[n].interface.split(".")[1]])));return a}function C(e){return c.a.createElement(u.a,{value:e})}function S(t,i,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=(arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0);"TurnOn"===n&&(r="ON"),"TurnOff"===n&&(r="OFF"),console.log("placeholder",e.index,Object(a.a)({},e.item,{controller:i,command:n,instance:c,value:r})),e.save(e.index,Object(a.a)({},e.item,{controller:i,command:n,instance:c,value:r}))}return c.a.createElement(E.default,{nolist:!0,elevation:0,wide:!0,xs:12},c.a.createElement(w.default,{device:e.device,index:e.index,selectDevice:function(t){var i;console.log("selected new device",t),N(j(function(t,i){if(void 0!==t&&void 0!==i&&e.directives.hasOwnProperty(t)&&e.directives[t].hasOwnProperty(i)){var a=e.directives[t][i];for(var n in a)return n}}(t.capabilities[0].interface,P(t.capabilities[0].interface)[0]))),i=Object(a.a)({},e.item,{instance:t.capabilities[0].instance,name:t.friendlyName,endpointId:t.endpointId,controller:t.capabilities[0],command:P(t.capabilities[0].interface)[0],value:void 0}),e.save(e.index,i)},wide:e.wide,remove:e.remove,reorder:e.reorder,moveUp:e.moveUp,moveDown:e.moveDown,delete:e.delete}),void 0!==e.device&&c.a.createElement(y.a,{item:!0,xs:e.wide?12:4,className:t.flex},c.a.createElement(d.a,null,c.a.createElement(g.a,{className:t.wideSelect,value:e.item.propertyName?e.item.propertyName:"",onChange:function(t){return i=t.target.value,N(j(i)),void e.save(e.index,Object(a.a)({},e.item,{value:void 0,controller:e.controllerForProperty(e.device.endpointId,i),propertyName:i}));var i},input:c.a.createElement(h.default,{name:"property",id:"property-select"})},e.controllerProperties.map((function(t){return c.a.createElement(O.a,{key:e.device.endpointId+t,value:t},t)}))))),void 0!==e.device&&c.a.createElement(y.a,{item:!0,xs:e.wide?12:4,className:t.flex},c.a.createElement(d.a,null,function(t){if(void 0!==b){if(null===b)return null;var i=b;return c.a.createElement(r.Suspense,{key:t,fallback:C()},c.a.createElement(i,{item:e.item,interface:l,device:e.device,instance:e.item.instance,directive:S}))}return null}(e.item.propertyName))),!e.wide&&c.a.createElement(c.a.Fragment,null,e.remove&&c.a.createElement(s.a,null,c.a.createElement(o.a,{size:"small",onClick:function(){return e.delete(e.index)}},c.a.createElement(m.a,null))),e.reorder&&c.a.createElement(s.a,null,e.index>0&&c.a.createElement(o.a,{size:"small",onClick:function(){return e.moveUp(e.index)}},c.a.createElement(f.a,null)),c.a.createElement(o.a,{size:"small",onClick:function(){return e.moveDown(e.index)}},c.a.createElement(x.a,null)))))}}}]);
//# sourceMappingURL=153.343ecac1.chunk.js.map