(window.webpackJsonp=window.webpackJsonp||[]).push([[48,70],{269:function(e,t,o){"use strict";o.r(t);var r=o(0),n=o.n(r),i=o(1),a=o.n(i),s=o(3),c=o(7),l=o.n(c),p=o(28),u=o.n(p),f=o(31),d=o.n(f),y=o(21),h=o.n(y),v=o(270),b=o(38);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var S=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),w(this,O(t).apply(this,arguments))}var o,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,n.a.Component),o=t,(r=[{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement(b.default,{title:"Sonos Zones",open:this.props.showGrid,close:this.props.closeGrid},n.a.createElement(d.a,{className:t.dialogContent},this.props.devices.map(function(t){return n.a.createElement(v.default,{sendAlexaCommand:e.props.sendAlexaCommand,devices:e.props.devices,chooseActivePlayer:e.props.chooseActivePlayer,key:t.endpointId+"sonosgi",name:t.friendlyName,filter:e.props.filter,device:t,deviceProperties:e.props.deviceProperties[t.friendlyName],linkedPlayers:e.props.deviceProperties})})),n.a.createElement(h.a,null),n.a.createElement(u.a,{className:t.dialogActions},n.a.createElement(l.a,{onClick:function(t){return e.props.closeGrid(t)},color:"primary",autoFocus:!0},"OK")))}}])&&P(o.prototype,r),i&&P(o,i),t}();S.propTypes={classes:a.a.object.isRequired},t.default=Object(s.withStyles)(function(e){return{dialogContent:{height:"100%",padding:8},dialogActions:{paddingBottom:"env(safe-area-inset-bottom)"}}})(S)},295:function(e,t,o){"use strict";o.r(t);var r=o(0),n=o.n(r),i=o(1),a=o.n(i),s=o(3),c=o(269),l=o(291),p=o(29);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var b=function(e){function t(e){var o,r,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=d(t).call(this,e),o=!n||"object"!==u(n)&&"function"!=typeof n?h(r):n,v(h(h(o)),"handleGrid",function(e){e.stopPropagation(),o.setState({showGrid:!0})}),v(h(h(o)),"handleCloseGrid",function(e){e.stopPropagation(),o.setState({showGrid:!1})}),v(h(h(o)),"chooseActivePlayer",function(e){o.setState({activePlayer:e,showGrid:!1})}),v(h(h(o)),"isPlayerActive",function(e){return!!o.props.deviceProperties[e].hasOwnProperty("playbackState")&&"STOPPED"!=o.props.deviceProperties[e].playbackState}),o.state={defaultPlayer:"Office",activePlayer:"",showGrid:!1},o.chooseActivePlayer=o.chooseActivePlayer.bind(h(h(o))),o.handleGrid=o.handleGrid.bind(h(h(o))),o}var o,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,n.a.Component),o=t,i=[{key:"getDerivedStateFromProps",value:function(e,t){var o=e.deviceProperties,r={};if(e.hasOwnProperty("devices")){for(var n="",i=0;i<e.devices.length;i++){console.log("name");var a=e.devices[i].friendlyName;if(o.hasOwnProperty(a)){var s=o[a];console.log(a,s),s.hasOwnProperty("playbackState")&&"PLAYING"==s.playbackState&&(""!=n&&a!=t.defaultPlayer||(n=s.input==a||""==s.input?a:s.input))}}return n?(console.log("chose",n),r.activePlayer=n):(console.log("fallback",t.defaultPlayer),r.activePlayer=t.defaultPlayer),r}}}],(r=[{key:"render",value:function(){var e=this,t=this.props,o=t.classes,r=t.devices,i=this.state,a=i.activePlayer,s=i.showGrid;return n.a.createElement("div",{className:o.list},r.map(function(t){var o;return t.friendlyName==a?n.a.createElement(l.default,(v(o={sendAlexaCommand:e.props.sendAlexaCommand,deviceByName:e.props.deviceByName,chooseActivePlayer:e.chooseActivePlayer,key:t.endpointId,handleGrid:e.handleGrid},"key",t.endpointId),v(o,"name",t.friendlyName),v(o,"device",t),v(o,"deviceProperties",e.props.deviceProperties),o)):null}),s?n.a.createElement(c.default,{sendAlexaCommand:this.props.sendAlexaCommand,closeGrid:this.handleCloseGrid,showGrid:s,chooseActivePlayer:this.chooseActivePlayer,devices:this.props.devices,deviceProperties:this.props.deviceProperties,sendMessage:this.props.sendMessage}):null)}}])&&f(o.prototype,r),i&&f(o,i),t}();b.propTypes={classes:a.a.object.isRequired},t.default=Object(p.withData)(Object(s.withStyles)(function(e){return{list:{paddingBottom:4,display:"flex",flexGrow:1,flexDirection:"column"}}})(b))}}]);