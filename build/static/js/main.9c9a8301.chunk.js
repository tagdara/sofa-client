(this["webpackJsonpsofa-client"]=this["webpackJsonpsofa-client"]||[]).push([[183],{11:function(e,t,r){"use strict";r.r(t),r.d(t,"useStream",(function(){return l})),r.d(t,"useApi",(function(){return c})),r.d(t,"NetworkContext",(function(){return u})),r.d(t,"default",(function(){return d}));var o=r(80),a=r(6),n=r(0),i=r.n(n),s="https://"+window.location.hostname,l=function(e){var t=Object(n.useState)(void 0),r=Object(a.a)(t,2),i=r[0],l=r[1],c=Object(n.useState)([]),u=Object(a.a)(c,2),d=u[0],p=u[1],m=Object(n.useState)(!1),f=Object(a.a)(m,2),h=f[0],v=f[1],g=Object(n.useCallback)((function(e){var t=Object(o.a)(d);t.push(e),p(Object(o.a)(new Set(t)))}),[d]);var y=i?i.readyState:10,j=void 0!==i&&1===i.readyState;return Object(n.useEffect)((function(){var t=!1,r=function(){console.log("SSE Opened"),v(!1)},o=function(){console.log("ERROR with EventSource")},a=function(e){for(var t=JSON.parse(e.data),r=0;r<d.length;r++)d[r](t)};return t||h||1===y||function(){if(e&&d.length>0&&!h){v(!0),console.log(".. Connecting event source:",e,d);var t=new EventSource(s+"/sse",{headers:{authorization:e},withCredentials:!0});t.addEventListener("message",a),t.addEventListener("error",o),t.addEventListener("open",r),l(t)}}(),function(){t=!0}}),[e,d,h,j,y]),{streamConnected:j,streamStatus:y,closeStream:function(){l(void 0)},addSubscriber:g}},c=function(e,t,r){var o=Object(n.useState)(!0),i=Object(a.a)(o,2),l=i[0],c=i[1],u=Object(n.useState)(!1),d=Object(a.a)(u,2),p=d[0],m=d[1],f=Object(n.useState)(!1),h=Object(a.a)(f,2),v=h[0],g=h[1],y=Object(n.useState)(r),j=Object(a.a)(y,2),b=j[0],S=j[1];return Object(n.useEffect)((function(){var o=!1,a=function(e){return o?r:(g(400!==e.status&&401!==e.status),m(!e.ok),c(!1),400!==e.status&&401!==e.status&&e.ok&&e.json?e.json():r)};return e&&!o&&(c(!0),fetch(s+"/"+e,{method:"GET",headers:{authorization:t}}).then(a).catch(a)).then((function(e){return!o&&S(e)})),function(){o=!0}}),[e,t,r]),{isLoading:l,hasError:p,loggedIn:v,data:b}},u=Object(n.createContext)();function d(e){var t=Object(n.useState)(!0),r=Object(a.a)(t,2),o=r[0],c=r[1],d=Object(n.useState)(!1),p=Object(a.a)(d,2),m=p[0],f=p[1],h=Object(n.useState)(E("token")),v=Object(a.a)(h,2),g=v[0],y=v[1],j=l(g,[]),b=j.streamConnected,S=j.streamStatus,O=j.closeStream,w=j.addSubscriber;function C(e){return 400===e.status?(c(!1),console.log("Not logged in",e.status,e.statusText),{error:"login"}):401===e.status?(c(!1),console.log("Not logged in",e.status,e.statusText),{error:"login"}):e.ok?(f(!1),e.json()):(console.log("Error connecting",e.status,e.statusText),f(!0),{error:e.statusText})}function x(e,t,r){var o=new Date;return r=r||365,o.setTime(+o+864e5*r),window.document.cookie=e+"="+t+"; expires="+o.toGMTString()+"; path=/",t}function E(e){for(var t=e+"=",r=decodeURIComponent(document.cookie).split(";"),o=0;o<r.length;o++){for(var a=r[o];" "===a.charAt(0);)a=a.substring(1);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return""}return i.a.createElement(u.Provider,{value:{connectError:m,streamConnected:b,streamStatus:S,loggedIn:o,getJSON:function(e){return g&&o?fetch(s+"/"+e,{method:"GET",headers:{authorization:g}}).then((function(e){return C(e)})):(c(!1),new Promise((function(e,t){e(void 0)})))},postJSON:function(e,t){return g?fetch(s+"/"+e,{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",authorization:g},body:JSON.stringify(t)}).then((function(e){return C(e)})):(c(!1),new Promise((function(e,t){e(void 0)})))},login:function(e,t){console.log("Logging in as user",e,t);var r=new FormData;return r.append("user",e),r.append("password",t),fetch(s+"/login",{method:"post",body:r}).then((function(e){return e.json()})).then((function(t){return function(e,t){if(console.log("tokendata",t),t.hasOwnProperty("token"))return x("token",t.token,365),x("user",e,365),console.log("GetCookie",E("token")),y(t.token),o||c(!0),t.token}(e,t)}))},logout:function(){document.cookie="token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",console.log("logging out"),fetch(s+"/logout",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){return c(!1)})).then((function(e){return O()}))},addSubscriber:w,getCookie:E}},e.children)}},16:function(e,t,r){"use strict";r.r(t),r.d(t,"moduleReducer",(function(){return c})),r.d(t,"LayoutContext",(function(){return u})),r.d(t,"LayoutProvider",(function(){return d}));var o=r(6),a=r(57),n=r(0),i=r.n(n),s=r(11),l=r(65),c=function(e,t){return function(t){var o=Object(a.a)({},e);return t.forEach((function(e){var t;o.hasOwnProperty(e)||(console.log("adding module",e),o[e]=(t=e,i.a.lazy((function(){return r(278)("./"+t)}))))})),o}(t)},u=Object(n.createContext)({}),d=function(e){var t=Object(n.useContext)(s.NetworkContext),r=t.getJSON,a=t.loggedIn,d=window.innerWidth<=800,p=Object(n.useState)(void 0),m=Object(o.a)(p,2),f=m[0],h=m[1],v=Object(n.useState)(function(){for(var e={name:"Home",props:{},data:{},page:""},t=decodeURIComponent(document.cookie).split(";"),r=0;r<t.length;r++){for(var o=t[r];" "===o.charAt(0);)o=o.substring(1);0===o.indexOf("layout=")&&(e=JSON.parse(o.substring("layout=".length,o.length)))}d&&e.data.hasOwnProperty("mobile")&&!e.hasOwnProperty("page")&&(e.page=e.data.mobile);return e}()),g=Object(o.a)(v,2),y=g[0],j=g[1],b=Object(n.useState)({name:"",props:{}}),S=Object(o.a)(b,2),O=S[0],w=S[1],C=Object(n.useState)({name:"",props:{}}),x=Object(o.a)(C,2),E=x[0],k=x[1],L=Object(n.useState)("System"),P=Object(o.a)(L,2),T=P[0],A=P[1],N=Object(n.useReducer)(c,[]),D=Object(o.a)(N,2),H=D[0],B=D[1];function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{type:"single"};A("Home");var o={name:e,props:t,data:r,page:y.page};j(o),R(o)}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};k({name:e,props:t})}function R(e){var t=new Date;return t.setTime(+t+864e5),window.document.cookie="layout="+JSON.stringify(e)+"; expires="+t.toGMTString()+"; path=/",e}return Object(n.useEffect)((function(){r("layout").then((function(e){h(e)}))}),[r]),Object(n.useEffect)((function(){if(void 0!==f){if(f.hasOwnProperty("error"))return console.log("Error getting layout",f),void j(void 0);if(d)return void("Home"===y.name&&f.Home.hasOwnProperty("mobile")&&y.page===f.Home.mobile?A("System"):A("Home"));var e={name:"Home",props:{},data:f.Home};return j(e),void R(e)}}),[f,d]),Object(n.useEffect)((function(){function e(e,t){if(t.data.pages.hasOwnProperty(e)){for(var r=t.data.pages[e],o=[],a=0;a<r.length;a++)o.push(r[a].module);B(o)}else console.log("Page",e,"not found in layout")}var t;t=y,a&&("pages"===y.data.type?d?t.hasOwnProperty("page")?t.data.hasOwnProperty("mobile")&&t.page===t.data.mobile?B([t.data.mobile]):e(t.page,t):t.data.hasOwnProperty("mobile")?B([t.data.mobile]):e(Object.keys(t.data.pages)[0],t):function(t,r){for(var o=0,a=Object.keys(r.data.pages);o<a.length;o++)e(a[o],r)}(y.name,t):B([y.name]))}),[y,d]),i.a.createElement(u.Provider,{value:{layouts:f,layout:y,modules:H,renderSuspenseModule:function(e,t){if(H.hasOwnProperty(e)){var r=H[e];return t.wide=!0,i.a.createElement(i.a.Suspense,{fallback:i.a.createElement(l.default,{name:e})},i.a.createElement(r,Object.assign({key:e},t)))}return null},backPage:E,returnPage:O,applyLayout:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};A("Home"!==e?"Home":"System");var r={name:e,props:t,data:f[e],page:y.page};j(r),R(r)},applyLayoutCard:I,applyLayoutPage:function(e){console.log("Apply layout page",e);var t={name:y.name,props:y.props,data:y.data,page:e};j(t),R(t)},applyHomePage:function(e){A("Home");var t={name:"Home",props:y.props,data:f.Home,page:e};j(t),R(t)},applyReturnPage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};w({name:e,props:t})},applyBackPage:M,goBack:function(){I(E.name,E.props),M("",{})},goHome:function(){var e={name:"Home",props:{},data:f.Home,page:f.Home.order[0]};d&&f.Home.hasOwnProperty("mobile")&&(console.log("setting home to mobile"),e.page=f.Home.mobile),j(e),R(e),A("System")},isMobile:d,setMasterButtonState:A,masterButtonState:T}},e.children)}},19:function(e,t,r){"use strict";r.r(t);var o=r(40),a=r(41),n=r(91),i=r(90),s=r(92),l=r(0),c=r.n(l),u=r(42),d=function(e){function t(e){var r;return Object(o.a)(this,t),(r=Object(n.a)(this,Object(i.a)(t).call(this,e))).state={hasError:!1,error:"",info:""},r}return Object(s.a)(t,e),Object(a.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0,error:e,info:t})}},{key:"render",value:function(){return this.state.hasError?c.a.createElement(u.default,{wide:this.props.wide,name:this.state.error.name,message:this.state.error.message}):this.props.children}}]),t}(l.Component);t.default=d},24:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return p}));var o=r(0),a=r.n(o),n=r(29),i=r(39),s=r.n(i),l=r(36),c=r(282),u=r(107),d=Object(n.a)((function(e){return{content:{borderWidth:"thin",borderStyle:"solid",borderColor:e.palette.divider,display:"flex",margin:0,boxSizing:"border-box",padding:"0",flexWrap:"wrap",alignItems:"center",flexGrow:1,minWidth:"320px",minHeight:80,flexBasis:0,position:"relative"},hover:{"&:hover":{backgroundColor:e.palette.background.hover,borderColor:e.palette.primary.dark}},nopad:{padding:0},list:{width:"100%"},nopadlist:{padding:0,width:"100%"},colorband:{borderLeft:"solid 5px #44F"},thinmargin:{margin:2,padding:0},normal:{padding:"4px !important"},inset:{marginTop:"-16px",zIndex:0},upper:{zIndex:900},color:{color:e.palette.primary.contrastText,backgroundColor:"#444",borderBottomRightRadius:0,borderBottomLeftRadius:0,padding:0}}}));function p(e){var t=d(),r=window.innerWidth<=800,o=a.a.createElement(a.a.Fragment,null,e.nolist?a.a.createElement(l.a,{container:!0},e.children):a.a.createElement(u.a,{className:e.nopad?t.nopadlist:t.list},e.children));return a.a.createElement(l.a,{item:!0,xs:e.xs?e.xs:r||e.wide?12:4,className:s()(e.inset?t.inset:t.upper,e.thinmargin?t.thinmargin:t.normal)},e.nopaper?a.a.createElement(a.a.Fragment,null,o):a.a.createElement(c.a,{elevation:e.elevation,className:s()(!e.color&&t.content,e.color&&t.color,e.hover&&t.hover,e.nopad&&t.nopad,e.colorband&&t.colorband)},o))}p.defaultProps={elevation:0,wide:!1,thinmargin:!1,nopaper:!1,inset:!1,color:!1}},270:function(e,t,r){e.exports=r(61)},278:function(e,t,r){var o={"./":[61,9],"./AdapterItem":[187,9,2,3,6,103],"./AdapterItem.js":[187,9,2,3,6,103],"./AdapterLayout":[220,9,2,3,6,67],"./AdapterLayout.js":[220,9,2,3,6,67],"./AdapterStatus":[188,9,104],"./AdapterStatus.js":[188,9,104],"./AlertSummary":[189,9,131],"./AlertSummary.js":[189,9,131],"./Area":[221,9,54],"./Area.js":[221,9,54],"./AreaHero":[222,9,0,1,48,62],"./AreaHero.js":[222,9,0,1,48,62],"./AreaLayout":[223,9,0,1,44,55],"./AreaLayout.js":[223,9,0,1,44,55],"./AreaLine":[173,9,74],"./AreaLine.js":[173,9,74],"./AreasLayout":[224,9,63],"./AreasLayout.js":[224,9,63],"./AutomationColumn":[192,9,4,5,30],"./AutomationColumn.js":[192,9,4,5,30],"./AutomationLayout":[225,9,2,3,4,5,28],"./AutomationLayout.js":[225,9,2,3,4,5,28],"./AutomationsFavorites":[195,9,56],"./AutomationsFavorites.js":[195,9,56],"./AutomationsLayout":[226,9,38],"./AutomationsLayout.js":[226,9,38],"./AvSummary":[198,9,105],"./AvSummary.js":[198,9,105],"./CameraLayout":[227,9,52,114],"./CameraLayout.js":[227,9,52,114],"./CameraSelect":[228,9,61,115],"./CameraSelect.js":[228,9,61,115],"./CameraSummary":[199,9,132],"./CameraSummary.js":[199,9,132],"./CompositeDevice":[146,9,49],"./CompositeDevice.js":[146,9,49],"./ComputerHero":[229,9,133],"./ComputerHero.js":[229,9,133],"./ComputerLayout":[230,9,50],"./ComputerLayout.js":[230,9,50],"./DataContext/AlexaDevice":[51,9],"./DataContext/AlexaDevice.js":[51,9],"./DataContext/DataProvider":[54,9],"./DataContext/DataProvider.js":[54,9],"./DeviceDialog":[147,9,4,5,57],"./DeviceDialog.js":[147,9,4,5,57],"./DeviceDirectiveLayout":[231,9,36],"./DeviceDirectiveLayout.js":[231,9,36],"./DeviceHero":[232,9,134],"./DeviceHero.js":[232,9,134],"./DeviceIcon":[133,9,58],"./DeviceIcon.js":[133,9,58],"./DeviceLayout":[233,9,5,53],"./DeviceLayout.js":[233,9,5,53],"./DevicePropertyLayout":[266,9,33],"./DevicePropertyLayout.js":[266,9,33],"./DeviceSummary":[201,9,135],"./DeviceSummary.js":[201,9,135],"./DotLevel":[149,9,91],"./DotLevel.js":[149,9,91],"./ErrorBoundary":[19,9],"./ErrorBoundary.js":[19,9],"./ErrorCard":[42,9],"./ErrorCard.js":[42,9],"./GridBreak":[141,9,159],"./GridBreak.js":[141,9,159],"./GridItem":[24,9],"./GridItem.js":[24,9],"./GridSearch":[143,9,160],"./GridSearch.js":[143,9,160],"./GridSection":[112,9,137],"./GridSection.js":[112,9,137],"./HistoryLayout":[234,9,2,3,6,92],"./HistoryLayout.js":[234,9,2,3,6,92],"./HistoryLine":[202,9,2,3,6,116],"./HistoryLine.js":[202,9,2,3,6,116],"./LightLayout":[235,9,0,1,41],"./LightLayout.js":[235,9,0,1,41],"./LightSummary":[203,9,138],"./LightSummary.js":[203,9,138],"./LightbulbOutline":[111,9,161],"./LightbulbOutline.js":[111,9,161],"./MasterButton":[64,9],"./MasterButton.js":[64,9],"./MiniLauncher":[236,9,140],"./MiniLauncher.js":[236,9,140],"./ModeChips":[237,9,141],"./ModeChips.js":[237,9,141],"./ModeLines":[166,9,142],"./ModeLines.js":[166,9,142],"./MoreDevicesLayout":[238,9,66,68],"./MoreDevicesLayout.js":[238,9,66,68],"./NetworkProvider":[11,9],"./NetworkProvider.js":[11,9],"./Opener":[239,9,4,17,107],"./Opener.js":[239,9,4,17,107],"./PlaceholderCard":[65,9],"./PlaceholderCard.js":[65,9],"./PlayerGroup":[240,9,59],"./PlayerGroup.js":[240,9,59],"./PlayerHero":[241,9,0,7,46],"./PlayerHero.js":[241,9,0,7,46],"./PlayersLayout":[242,9,75],"./PlayersLayout.js":[242,9,75],"./ReceiverHero":[243,9,0,18,162],"./ReceiverHero.js":[243,9,0,18,162],"./Scene":[190,9,79],"./Scene.js":[190,9,79],"./SceneAdd":[191,9,94],"./SceneAdd.js":[191,9,94],"./SecuritySummary":[210,9,117],"./SecuritySummary.js":[210,9,117],"./ShortcutHero":[244,9,143],"./ShortcutHero.js":[244,9,143],"./SmallSlider":[132,9,0,163],"./SmallSlider.js":[132,9,0,163],"./SofaApp":[63,9],"./SofaApp.js":[63,9],"./SofaAppContent":[66,9],"./SofaAppContent.js":[66,9],"./SofaAvatarSlider":[148,9,0,147],"./SofaAvatarSlider.js":[148,9,0,147],"./SofaLogin":[68,9],"./SofaLogin.js":[68,9],"./SofaPage":[67,9],"./SofaPage.js":[67,9],"./SofaSlider":[113,9,0,164],"./SofaSlider.js":[113,9,0,164],"./SofaSnackbar":[265,9,119],"./SofaSnackbar.js":[265,9,119],"./SummaryLayout":[245,9,31],"./SummaryLayout.js":[245,9,31],"./SystemLayout":[246,9,43],"./SystemLayout.js":[246,9,43],"./ThermostatHero":[247,9,148],"./ThermostatHero.js":[247,9,148],"./ThermostatHistory":[248,9,2,6,29,136],"./ThermostatHistory.js":[248,9,2,6,29,136],"./ThermostatLayout":[249,9,0,69],"./ThermostatLayout.js":[249,9,0,69],"./ThermostatSummary":[211,9,165],"./ThermostatSummary.js":[211,9,165],"./ToggleAvatar":[55,9],"./ToggleAvatar.js":[55,9],"./ToggleButton":[142,9,166],"./ToggleButton.js":[142,9,166],"./ToggleChip":[250,9,150],"./ToggleChip.js":[250,9,150],"./ToggleIconButton":[209,9,151],"./ToggleIconButton.js":[209,9,151],"./TvHero":[251,9,0,16,93],"./TvHero.js":[251,9,0,16,93],"./ZoneHero":[252,9,120],"./ZoneHero.js":[252,9,120],"./ZoneLayout":[253,9,2,3,6,78],"./ZoneLayout.js":[253,9,2,3,6,78],"./automation/AutomationItemBase":[254,9,167],"./automation/AutomationItemBase.js":[254,9,167],"./automation/ScheduleDays":[162,9,149],"./automation/ScheduleDays.js":[162,9,149],"./automation/ScheduleInterval":[161,9,95],"./automation/ScheduleInterval.js":[161,9,95],"./automation/ScheduleItem":[196,9,121],"./automation/ScheduleItem.js":[196,9,121],"./automation/ScheduleStart":[160,9,82],"./automation/ScheduleStart.js":[160,9,82],"./automation/UnitButton":[154,9,152],"./automation/UnitButton.js":[154,9,152],"./automation/automationAction":[174,9,4,5,34],"./automation/automationAction.js":[174,9,4,5,34],"./automation/automationActionNew":[255,9,39],"./automation/automationActionNew.js":[255,9,39],"./automation/automationAdd":[197,9,96],"./automation/automationAdd.js":[197,9,96],"./automation/automationCondition":[175,9,32],"./automation/automationCondition.js":[175,9,32],"./automation/automationDetails":[179,9,2,3,122],"./automation/automationDetails.js":[179,9,2,3,122],"./automation/automationHeader":[194,9,2,3,64],"./automation/automationHeader.js":[194,9,2,3,64],"./automation/automationItem":[163,9,97],"./automation/automationItem.js":[163,9,97],"./automation/automationSave":[193,9,153],"./automation/automationSave.js":[193,9,153],"./automation/automationSchedule":[177,9,47],"./automation/automationSchedule.js":[177,9,47],"./automation/automationTitle":[178,9,168],"./automation/automationTitle.js":[178,9,168],"./automation/automationTrigger":[176,9,4,5,35],"./automation/automationTrigger.js":[176,9,4,5,35],"./automation/automationTriggerReal":[256,9,40],"./automation/automationTriggerReal.js":[256,9,40],"./automation/operatorButton":[153,9,154],"./automation/operatorButton.js":[153,9,154],"./camera/cameraDialog":[155,9,83],"./camera/cameraDialog.js":[155,9,83],"./camera/securitycamera":[164,9,51],"./camera/securitycamera.js":[164,9,51],"./controllers/BrightnessController":[135,9,0,80],"./controllers/BrightnessController.js":[135,9,0,80],"./controllers/ColorController":[136,9,1,84],"./controllers/ColorController.js":[136,9,1,84],"./controllers/ColorTemperatureController":[137,9,0,81],"./controllers/ColorTemperatureController.js":[137,9,0,81],"./controllers/EndpointHealth":[138,9,98],"./controllers/EndpointHealth.js":[138,9,98],"./controllers/PowerController":[139,9,76],"./controllers/PowerController.js":[139,9,76],"./controllers/StateController":[140,9,85],"./controllers/StateController.js":[140,9,85],"./controllers/properties/brightness":[124,9,0,8],"./controllers/properties/brightness.js":[124,9,0,8],"./controllers/properties/color":[115,9,1,19],"./controllers/properties/color.js":[115,9,1,19],"./controllers/properties/connectivity":[116,9,20],"./controllers/properties/connectivity.js":[116,9,20],"./controllers/properties/detectionState":[117,9,21],"./controllers/properties/detectionState.js":[117,9,21],"./controllers/properties/duration":[125,9,14],"./controllers/properties/duration.js":[125,9,14],"./controllers/properties/input":[118,9,22],"./controllers/properties/input.js":[118,9,22],"./controllers/properties/mode":[119,9,23],"./controllers/properties/mode.js":[119,9,23],"./controllers/properties/onLevel":[126,9,0,9],"./controllers/properties/onLevel.js":[126,9,0,9],"./controllers/properties/powerLevel":[127,9,0,10],"./controllers/properties/powerLevel.js":[127,9,0,10],"./controllers/properties/powerState":[120,9,24],"./controllers/properties/powerState.js":[120,9,24],"./controllers/properties/pressState":[121,9,25],"./controllers/properties/pressState.js":[121,9,25],"./controllers/properties/surround":[122,9,26],"./controllers/properties/surround.js":[122,9,26],"./controllers/properties/targetSetpoint":[128,9,0,11],"./controllers/properties/targetSetpoint.js":[128,9,0,11],"./controllers/properties/targetTemperature":[129,9,0,12],"./controllers/properties/targetTemperature.js":[129,9,0,12],"./controllers/properties/thermostatMode":[123,9,27],"./controllers/properties/thermostatMode.js":[123,9,27],"./controllers/properties/time":[130,9,15],"./controllers/properties/time.js":[130,9,15],"./controllers/properties/volume":[131,9,0,13],"./controllers/properties/volume.js":[131,9,0,13],"./deviceSelect/Device":[144,9,5,139],"./deviceSelect/Device.js":[144,9,5,139],"./deviceSelect/deviceExpand":[172,9,42],"./deviceSelect/deviceExpand.js":[172,9,42],"./deviceSelect/deviceExpandActions":[156,9,124],"./deviceSelect/deviceExpandActions.js":[156,9,124],"./deviceSelect/deviceExpandEvents":[158,9,125],"./deviceSelect/deviceExpandEvents.js":[158,9,125],"./deviceSelect/deviceExpandProperties":[157,9,126],"./deviceSelect/deviceExpandProperties.js":[157,9,126],"./deviceSelect/deviceSelect":[257,9,37],"./deviceSelect/deviceSelect.js":[257,9,37],"./deviceSelect/sofaCategoryFilter":[217,9,60],"./deviceSelect/sofaCategoryFilter.js":[217,9,60],"./devices/Television":[213,9,0,16,106],"./devices/Television.js":[213,9,0,16,106],"./devices/TvRemote":[185,9,72],"./devices/TvRemote.js":[185,9,72],"./devices/Zone":[214,9,2,3,6,127],"./devices/Zone.js":[214,9,2,3,6,127],"./devices/receiver":[219,9,0,18],"./devices/receiver.js":[219,9,0,18],"./devices/statusLock":[206,9,128],"./devices/statusLock.js":[206,9,128],"./dialogs/PinDialog":[218,9,4,17],"./dialogs/PinDialog.js":[218,9,4,17],"./dialogs/SofaDialog":[145,9,4,179],"./dialogs/SofaDialog.js":[145,9,4,179],"./directives/SetBrightness":[258,9,0,146],"./directives/SetBrightness.js":[258,9,0,146],"./index":[61,9],"./index.css":[99,7],"./index.js":[61,9],"./layout/NewLayoutProvider":[16,9],"./layout/NewLayoutProvider.js":[16,9],"./light/Light":[159,9,0,1,45],"./light/Light.js":[159,9,0,1,45],"./light/LightSliderBrightness":[150,9,0,108],"./light/LightSliderBrightness.js":[150,9,0,108],"./light/LightSliderColor":[152,9,1,112],"./light/LightSliderColor.js":[152,9,1,112],"./light/LightSliderTemperature":[151,9,0,109],"./light/LightSliderTemperature.js":[151,9,0,109],"./logo.svg":[298,7,186],"./other/Computer":[215,9,99],"./other/Computer.js":[215,9,99],"./other/ComputerList":[259,9,86],"./other/ComputerList.js":[259,9,86],"./other/Device":[165,9,100],"./other/Device.js":[165,9,100],"./other/DeviceList":[180,9,87],"./other/DeviceList.js":[180,9,87],"./other/Matrix":[181,9,129],"./other/Matrix.js":[181,9,129],"./other/MatrixList":[200,9,113],"./other/MatrixList.js":[200,9,113],"./other/Mode":[183,9,101],"./other/Mode.js":[183,9,101],"./other/ModeList":[205,9,88],"./other/ModeList.js":[205,9,88],"./other/Shade":[182,9,77],"./other/Shade.js":[182,9,77],"./other/Sprinkler":[260,9,89],"./other/Sprinkler.js":[260,9,89],"./other/VirtualList":[204,9,73],"./other/VirtualList.js":[204,9,73],"./player/CoverDimmer":[216,9,180],"./player/CoverDimmer.js":[216,9,180],"./player/NoPlayer":[208,9,157],"./player/NoPlayer.js":[208,9,157],"./player/OldPlayerArtOverlay":[261,9,130],"./player/OldPlayerArtOverlay.js":[261,9,130],"./player/OldPlayerArtOverlayButtons":[262,9,65],"./player/OldPlayerArtOverlayButtons.js":[262,9,65],"./player/OldPlayerCard":[263,9,0,7,70],"./player/OldPlayerCard.js":[263,9,0,7,70],"./player/OldPlayerVolume":[264,9,0,110],"./player/OldPlayerVolume.js":[264,9,0,110],"./player/PlayerArtOverlay":[168,9,158],"./player/PlayerArtOverlay.js":[168,9,158],"./player/PlayerArtOverlayButtons":[169,9,90],"./player/PlayerArtOverlayButtons.js":[169,9,90],"./player/PlayerBase":[167,9,102],"./player/PlayerBase.js":[167,9,102],"./player/PlayerCard":[207,9,0,7,71],"./player/PlayerCard.js":[207,9,0,7,71],"./player/PlayerCover":[171,9,7,181],"./player/PlayerCover.js":[171,9,7,181],"./player/PlayerVolume":[170,9,0,118],"./player/PlayerVolume.js":[170,9,0,118],"./serviceWorker":[70,9],"./serviceWorker.js":[70,9],"./theme/SofaTheme":[62,9],"./theme/SofaTheme.js":[62,9],"./theme/sofaThemeDark":[34,9],"./theme/sofaThemeDark.js":[34,9],"./theme/sofaThemeLight":[33,9],"./theme/sofaThemeLight.js":[33,9],"./thermostat/TemperatureSensor":[184,9,182],"./thermostat/TemperatureSensor.js":[184,9,182],"./thermostat/Thermostat":[212,9,0,111],"./thermostat/Thermostat.js":[212,9,0,111],"./user/UserProvider":[69,9],"./user/UserProvider.js":[69,9]};function a(e){if(!r.o(o,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=o[e],a=t[0];return Promise.all(t.slice(2).map(r.e)).then((function(){return r.t(a,t[1])}))}a.keys=function(){return Object.keys(o)},a.id=278,e.exports=a},33:function(e,t,r){"use strict";r.r(t);var o=r(76),a=r(21),n=r.n(a),i=r(28),s=r.n(i);t.default=Object(o.a)({palette:{primary:{light:n.a[300],main:n.a[500],dark:n.a[700]},secondary:{light:s.a[300],main:s.a[500],dark:s.a[700]},background:{page:"#eee",hover:"rgba(255, 87, 34, 0.1)",card:"#efefef"},dot:{off:"#bbb",on:n.a[500]},type:"light"}})},34:function(e,t,r){"use strict";r.r(t);var o=r(76),a=r(21),n=r.n(a),i=r(28),s=r.n(i);t.default=Object(o.a)({direction:"ltr",palette:{primary:{light:n.a[300],main:n.a[500],dark:n.a[700]},secondary:{light:s.a[300],main:s.a[500],dark:s.a[700]},text:{primary:"#c0c0c0"},background:{default:"#000",page:"#111",hover:"rgba(188, 54, 12, 0.1)",paper:"#222",card:"#262626"},dot:{off:"#444",on:n.a[500]},type:"dark"}})},42:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return p}));var o=r(0),a=r.n(o),n=r(24),i=r(55),s=r(107),l=r(23),c=r(53),u=r(105),d=r.n(u);function p(e){return a.a.createElement(n.default,{wide:e.wide},a.a.createElement(s.a,null,a.a.createElement(l.a,null,a.a.createElement(i.default,{avatarState:"open"},a.a.createElement(d.a,null)),a.a.createElement(c.a,{primary:e.name,secondary:e.message})),a.a.createElement(l.a,null,a.a.createElement(c.a,{primary:"Reload",onClick:function(){return"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})),void window.location.reload(!0)}}))))}},51:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return n})),r.d(t,"AlexaController",(function(){return i})),r.d(t,"AlexaControllerProperty",(function(){return s}));var o=r(40),a=r(41),n=function(){function e(t){Object(o.a)(this,e),this.endpointId=t.endpointId,this.friendlyName=t.friendlyName,this.manufacturerName=t.manufacturerName,this.description=t.description,this.displayCategories=t.displayCategories,this.interfaces=[],this.interfaceobjects=[];for(var r=0;r<t.capabilities.length;r++){var a=t.capabilities[r].interface.split(".")[1];t.capabilities[r].hasOwnProperty("instance")&&(a=t.capabilities[r].instance.split(".")[1]),t.capabilities[r].interface.split(".")[1]&&!this.interfaces.includes(a)&&(this[a]=new i(this,t.capabilities[r]),this.interfaces.push(a),this.interfaceobjects.push(this[a]))}}return Object(a.a)(e,[{key:"hasData",value:function(){for(var e in this.interfaceobjects)for(var t in e.propertyobjects)if(null===t.value)return console.log("device is missing data",this.endpointId,this.friendlyName,e.controller,t),!1;return!0}},{key:"newtoken",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return((15&(e^crypto.getRandomValues(new Uint8Array(1))[0]))>>e/4).toString(16)}))}},{key:"responseHandler",value:function(e){if(e.hasOwnProperty("context")&&e.context.hasOwnProperty("properties")){console.log("resp",e.context);for(var t=0;t<e.context.properties.length;t++){var r=e.context.properties[t],o=r.namespace.split(".")[1];r.hasOwnProperty("instance")&&(o=r.instance.split(".")[1]),this[o][r.name].value=r.value,this[o][r.name].timeOfSample=r.timeOfSample}}return e}},{key:"properties",value:function(){for(var e=[],t=0;t<this.interfaces.length;t++)e=e.concat(this[this.interfaces[t]].properties);return e}},{key:"controllerForProperty",value:function(e){for(var t=0;t<this.interfaces.length;t++)if(this[this.interfaces[t]].properties.includes(e))return this.interfaces[t];return""}}]),e}(),i=function(){function e(t,r){if(Object(o.a)(this,e),this.device=t,this.namespace=r.interface.split(".")[0],this.controller=r.interface.split(".")[1],this.properties=[],this.propertyobjects=[],r.hasOwnProperty("configuration")&&(this.configuration=r.configuration),r.hasOwnProperty("inputs")&&(this.inputs=r.inputs),r.hasOwnProperty("instance")&&(this.instance=r.instance),r.hasOwnProperty("capabilityResources")&&(this.capabilityResources=r.capabilityResources),r.hasOwnProperty("properties")&&r.properties.hasOwnProperty("supported"))for(var a=0;a<r.properties.supported.length;a++)this[r.properties.supported[a].name]=new s,this.properties.push(r.properties.supported[a].name),this.propertyobjects.push(this[r.properties.supported[a].name])}return Object(a.a)(e,[{key:"directive",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="https://"+window.location.hostname,n={name:e,namespace:this.namespace+"."+this.controller,payloadVersion:"3",messageId:this.device.newtoken(),correlationToken:this.device.newtoken()};this.hasOwnProperty("instance")&&(n.instance=this.instance);var i={endpointId:this.device.endpointId,cookie:o,scope:{type:"BearerToken",token:"sofa-interchange-token"}},s={directive:{header:n,endpoint:i,payload:r}};return console.log("Sending device-based alexa command:",s),fetch(a+"/directive",{withCredentials:!0,credentials:"include",method:"post",body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){return t.device.responseHandler(e)})).then((function(e){return e}))}}]),e}(),s=function(){function e(){Object(o.a)(this,e),this.value=null}return Object(a.a)(e,[{key:"deepvalue",get:function(){return this.value?this.value.hasOwnProperty("value")?this.value.value:this.value:null}}]),e}()},54:function(e,t,r){"use strict";r.r(t),r.d(t,"DataContext",(function(){return c})),r.d(t,"deviceReducer",(function(){return d})),r.d(t,"default",(function(){return p}));var o=r(6),a=r(57),n=r(0),i=r.n(n),s=r(11),l=r(51),c=Object(n.createContext)();function u(){try{return JSON.parse(localStorage.getItem("devices"))}catch(e){}return{}}var d=function(e,t){if(t==={})return e;if(!t.hasOwnProperty("event"))return e;var r=0,o=Object(a.a)({},e),n="",i="";switch(t.event.header.name){case"DeleteReport":for(r=0;r<t.event.payload.endpoints.length;r++)t.event.payload.endpoints[r].endpointId in o&&delete o[t.event.payload.endpoints[r].endpointId];return o;case"AddOrUpdateReport":var s=u();for(s||(s={}),r=0;r<t.event.payload.endpoints.length;r++)s[t.event.payload.endpoints[r].endpointId]=t.event.payload.endpoints[r],o[t.event.payload.endpoints[r].endpointId]=new l.default(t.event.payload.endpoints[r]);return localStorage.setItem("devices",JSON.stringify(s)),o;case"Multistate":for(var c in t.state)if(c in o)for(r=0;r<t.state[c].context.properties.length;r++)i=(n=t.state[c].context.properties[r]).namespace.split(".")[1],n.hasOwnProperty("instance")&&(i=n.instance.split(".")[1]),o[c][i][n.name].value=n.value,o[c][i][n.name].timeOfSample=n.timeOfSample;return o;case"ChangeReport":if(t.event.endpoint.endpointId in o){for(r=0;r<t.event.payload.change.properties.length;r++)i=(n=t.event.payload.change.properties[r]).namespace.split(".")[1],n.hasOwnProperty("instance")&&(i=n.instance.split(".")[1]),o[t.event.endpoint.endpointId][i][n.name].value=n.value,o[t.event.endpoint.endpointId][i][n.name].timeOfSample=n.timeOfSample;for(r=0;r<t.context.properties.length;r++)i=(n=t.context.properties[r]).namespace.split(".")[1],n.hasOwnProperty("instance")&&(i=n.instance.split(".")[1]),o[t.event.endpoint.endpointId][i][n.name].value=n.value,o[t.event.endpoint.endpointId][i][n.name].timeOfSample=n.timeOfSample}return o;default:return e}};function p(e){var t=Object(n.useContext)(s.NetworkContext),r=t.getJSON,a=t.postJSON,p=t.connectError,m=t.loggedIn,f=t.addSubscriber,h=function(){var e={},t=u();for(var r in t)e[t[r].endpointId]=new l.default(t[r]);return e}(),v=Object(n.useState)({}),g=Object(o.a)(v,2),y=g[0],j=g[1],b=Object(n.useState)({}),S=Object(o.a)(b,2),O=S[0],w=S[1],C=Object(n.useState)({}),x=Object(o.a)(C,2),E=x[0],k=x[1],L=Object(n.useState)("Main"),P=Object(o.a)(L,2),T=P[0],A=P[1],N=Object(n.useReducer)(d,h),D=Object(o.a)(N,2),H=D[0],B=D[1],I=Object(n.useState)("sonos:player:RINCON_B8E937ECE1F001400"),M=Object(o.a)(I,2),R=M[0],W=M[1],F=Object(n.useState)(""),z=Object(o.a)(F,2),G=z[0],U=z[1];function J(e){return"OK"===e.EndpointHealth.connectivity.value.value}function V(e,t){e||(e="ALL"),Array.isArray(e)||(e=[e]);for(var r=[],o=0;o<e.length;o++){var a=e[o];for(var n in H)(H[n].displayCategories.includes(a)||"ALL"===a)&&(t&&!H[n].friendlyName.toLowerCase().includes(t.toLowerCase())||H[n].hasData()&&r.push(H[n]))}return r.sort((function(e,t){var r=e.friendlyName.toLowerCase(),o=t.friendlyName.toLowerCase();return r<o?-1:r>o?1:0})),r}return Object(n.useEffect)((function(){}),[H]),Object(n.useEffect)((function(){f(B)}),[]),Object(n.useEffect)((function(){console.log("logged in changed to",m),!0===m&&(r("directives").then((function(e){return w(e)})),r("properties").then((function(e){return j(e)})),r("list/logic/virtualDevices").then((function(e){return k(e)})))}),[m]),i.a.createElement(c.Provider,{value:{devices:H,virtualDevices:E,directives:O,controllerProperties:y,deviceByEndpointId:function(e){if(e in H)return H[e]},deviceByFriendlyName:function(e){for(var t in H)if(H[t].friendlyName===e)return H[t]},devicesByFriendlyName:function(e){var t=[];for(var r in H)(""===e||H[r].friendlyName.includes(e))&&t.push(H[r]);return t.sort((function(e,t){var r=e.friendlyName.toLowerCase(),o=t.friendlyName.toLowerCase();return r<o?-1:r>o?1:0})),t},devicesByCategory:V,devicesByController:function(e,t){if(!e)return[];Array.isArray(e)||(e=[e]);for(var r=[],o=0;o<e.length;o++){var a=e[o];for(var n in H)H[n].interfaces.includes(a)&&(t&&!H[n].friendlyName.toLowerCase().includes(t.toLowerCase())||H[n].hasData()&&r.push(H[n]))}return r.sort((function(e,t){var r=e.friendlyName.toLowerCase(),o=t.friendlyName.toLowerCase();return r<o?-1:r>o?1:0})),r},propertyNamesFromDevice:function(e){for(var t=[],r=0;r<e.capabilities.length;r++)t.push(e.capabilities[r].interface);return t},isReachable:J,sortByName:function(e){return e.sort((function(e,t){var r=e.friendlyName.toLowerCase(),o=t.friendlyName.toLowerCase();return r<o?-1:r>o?1:0})),e},getChangeTimesForDevices:function(e,t){for(var r=[],o=0;o<t.length;o++)r.push(t[o].endpointId);return a("list/influx/last/"+e,r).then((function(e){return e}))},getHistoryForDevice:function(e,t,o){var a="list/influx/history/"+e+"/"+t;return o&&(a=a+"/"+o),r(a)},setArea:A,area:T,lightCount:function(e){var t=0,r=V("LIGHT");for(var o in r)"all"===e.toLowerCase()?t+=1:"off"===e.toLowerCase()?"OFF"!==r[o].PowerController.powerState.value&&J(r[o])||(t+=1):"on"===e.toLowerCase()&&"ON"===r[o].PowerController.powerState.value&&J(r[o])&&(t+=1);return t},defaultPlayer:R,setDefaultPlayer:W,userPlayer:G,setUserPlayer:U,getModes:function(e){for(var t={},r=0;r<e.interfaces.length;r++)if("ModeController"===e[e.interfaces[r]].controller){for(var o=e[e.interfaces[r]],a=o.capabilityResources.friendlyNames[0].value.text,n=[],i=0;i<o.configuration.supportedModes.length;i++)n[o.configuration.supportedModes[i].value]=o.configuration.supportedModes[i].modeResources.friendlyNames[0].value.text;t[a]=n}return t},loggedIn:m,connectError:p}},e.children)}},55:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return p}));var o=r(0),a=r.n(o),n=r(29),i=r(39),s=r.n(i),l=r(283),c=r(287),u=Object(n.a)((function(e){return{off:{color:e.palette.primary.contrastText},on:{color:e.palette.primary.contrastText,background:e.palette.primary.main},light:{color:e.palette.primary.contrastText,background:e.palette.primary.light},notready:{color:e.palette.primary.contrastText,backgroundColor:"#bbb"},closed:{color:e.palette.primary.contrastText,backgroundColor:"#6a6"},open:{color:e.palette.primary.contrastText,backgroundColor:"#e66"},cool:{color:e.palette.primary.contrastText,backgroundColor:"#00796B"},mid:{color:e.palette.primary.contrastText,backgroundColor:"#558B2F"},hot:{color:e.palette.primary.contrastText,backgroundColor:"#E65100"},none:{color:e.palette.primary.dark,padding:"0 8px",fontSize:20}}})),d=Object(n.a)((function(e){return{normal:{color:e.palette.primary.main},off:{color:e.palette.text.disabled},on:{color:e.palette.primary.main},notready:{color:"#bbb"},closed:{color:"#6a6"},open:{color:"#e66"},cool:{color:"#00796B"},mid:{color:"#558B2F"},hot:{color:"#E65100"},base:{padding:0,minWidth:56},reverse:{justifyContent:"flex-end",display:"flex"},sizeSmall:{minWidth:36,fontSize:10},avatarSmall:{height:28,width:28,fontSize:14}}}));function p(e){var t=u(),r=d();return a.a.createElement(l.a,{onClick:e.onClick,className:s()(e.small?r.sizeSmall:r.base,e.noback?t.none:r[e.avatarState],e.reverse&&r.reverse)},e.noback?a.a.createElement(a.a.Fragment,null,e.children):a.a.createElement(c.a,{className:s()(e.small&&r.avatarSmall,t[e.avatarState]),onClick:e.onClick},e.children))}p.defaultProps={reverse:!1,noback:!1,small:!1}},61:function(e,t,r){"use strict";r.r(t);var o=r(0),a=r.n(o),n=r(8),i=r.n(n),s=(r(99),r(63)),l=r(70);i.a.render(a.a.createElement(s.default,null),document.getElementById("root")),l.register()},62:function(e,t,r){"use strict";r.r(t),r.d(t,"ThemeContext",(function(){return u})),r.d(t,"default",(function(){return d})),r.d(t,"withThemeChange",(function(){return p}));var o=r(6),a=r(0),n=r.n(a),i=r(33),s=r(34),l=r(286),c=r(109),u=n.a.createContext();function d(e){var t=Object(a.useState)(""),r=Object(o.a)(t,2),d=r[0],p=r[1],m=Object(a.useState)({}),f=Object(o.a)(m,2),h=f[0],v=f[1];function g(){if(h.hasOwnProperty("palette"))return h;var e=(new Date).getHours();return e>17||e<8?s.default:i.default}return Object(a.useEffect)((function(){var e=(new Date).getHours();e>17||e<8?(p("dark"),v(s.default)):(p("light"),v(i.default))}),[]),n.a.createElement(u.Provider,{value:{colorScheme:d,sofaTheme:h,applyTheme:function(e){return"dark"===e?(p("dark"),v(s.default),s.default):"light"===e?(p("light"),v(i.default),i.default):g()},getTheme:g}},n.a.createElement(l.a,{theme:g()},n.a.createElement(c.a,null),e.children))}function p(e){return function(t){return n.a.createElement(u.Consumer,null,(function(r){return n.a.createElement(e,Object.assign({},t,r,{context:r,colorScheme:r.colorScheme,sofaTheme:r.sofaTheme,applyTheme:r.applyTheme}))}))}}},63:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return h}));var o=r(6),a=r(0),n=r.n(a),i=r(64),s=r(66),l=r(19),c=r(109),u=r(54),d=r(16),p=r(69),m=r(62),f=r(11);function h(e){var t=Object(a.useState)(!1),r=Object(o.a)(t,2),h=r[0],v=r[1],g=Object(a.useState)(window.innerWidth),y=Object(o.a)(g,2),j=y[0],b=y[1],S=j<=800;function O(){b(window.innerWidth)}return Object(a.useEffect)((function(){window.addEventListener("resize",O)}),[]),n.a.createElement(m.default,null,n.a.createElement(f.default,null,n.a.createElement(p.default,null,n.a.createElement(d.LayoutProvider,null,n.a.createElement(u.default,null,n.a.createElement(i.default,{open:function(){v(!h)},mobile:S}),n.a.createElement(l.default,null,n.a.createElement(s.default,null))),n.a.createElement(c.a,null)))))}},64:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return y}));var o=r(0),a=r.n(o),n=r(29),i=r(16),s=r(11),l=r(104),c=r.n(l),u=r(94),d=r.n(u),p=r(95),m=r.n(p),f=r(103),h=r.n(f),v=r(82),g=Object(n.a)((function(e){return{list:{minWidth:320},flex:{flex:1},menuButton:{marginLeft:-12,marginRight:20},desktopTop:{paddingTop:"env(safe-area-inset-top)"},phoneTop:{paddingTop:"env(safe-area-inset-top)",height:2},fab:{position:"fixed",bottom:16,left:"calc(100vw - 80px)",marginBottom:"env(safe-area-inset-bottom)",zIndex:1200},fabBack:{position:"fixed",bottom:24,left:"calc(100vw - 128px)",padding:0,marginBottom:"env(safe-area-inset-bottom)",boxSizing:"content-box",zIndex:1200}}}));function y(e){var t=g(),r=Object(o.useContext)(i.LayoutContext),n=r.applyLayoutCard,l=r.masterButtonState,u=r.goBack,p=r.goHome,f=r.backPage,y=Object(o.useContext)(s.NetworkContext),j=y.loggedIn,b=y.connectError;return!1===j||b?a.a.createElement(v.a,{className:t.fab,color:"primary",onClick:function(){return"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})),void window.location.reload(!0)}},a.a.createElement(h.a,null)):a.a.createElement(a.a.Fragment,null,a.a.createElement(v.a,{className:t.fab,color:"primary",onClick:function(){return"Home"===l&&p(),void("System"===l&&n("SystemLayout"))}},"System"===l&&a.a.createElement(c.a,null),"Home"===l&&a.a.createElement(d.a,null)),f.name&&a.a.createElement(v.a,{size:"small",color:"primary",onClick:function(){return u()},className:t.fabBack},a.a.createElement(m.a,null)))}},65:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var o=r(0),a=r.n(o),n=r(24);function i(e){return a.a.createElement(n.default,{wide:!0,nopaper:!0})}},66:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return g}));var o=r(0),a=r.n(o),n=r(16),i=r(11),s=r(29),l=r(36),c=r(19),u=r(67),d=r(23),p=r(53),m=r(47),f=r(68),h=r(42),v=Object(s.a)({controlArea:{margin:"8px auto",maxWidth:1440,width:"100vw",boxSizing:"border-box"},mobileControlArea:{margin:"8px auto",maxWidth:600,width:"100%",marginTop:"env(safe-area-inset-top)",paddingTop:8,boxSizing:"border-box",minHeight:"100%",alignContent:"flex-start"},version:{paddingLeft:16,opacity:"0.5"}});function g(e){var t=Object(o.useContext)(n.LayoutContext),r=t.layout,s=t.isMobile,g=t.renderSuspenseModule,y=Object(o.useContext)(i.NetworkContext),j=y.streamStatus,b=y.streamConnected,S=y.connectError,O=y.loggedIn,w=v();return O?a.a.createElement(l.a,{container:!0,spacing:s&&"single"===r.data.type?2:8,className:s?w.mobileControlArea:w.controlArea},"pages"===r.data.type&&(!s||r.page||void 0===r.data.mobile)&&a.a.createElement(c.default,{wide:e.wide},r.data.order.map((function(e){return void 0!==r.page&&e!==r.page&&s?null:a.a.createElement(u.default,{key:e,name:e,page:r.data.pages[e]})}))),"single"===r.data.type&&a.a.createElement(c.default,{wide:e.wide},g(r.name,r.props)),"pages"===r.data.type&&s&&void 0!==r.data.mobile&&a.a.createElement(c.default,{wide:e.wide},g(r.page?r.page:r.data.mobile,r.props)),!b&&a.a.createElement(l.a,{container:!0,spacing:2,className:s?w.mobileControlArea:w.controlArea},a.a.createElement(d.a,null,a.a.createElement(p.a,{primary:"Network not ready",secondary:"Server Side Event Stream not connected:"+b+" "+j}))),"Home"===r.name&&a.a.createElement(m.a,{className:w.version,variant:"caption"},"2.2.15")):a.a.createElement(a.a.Fragment,null,S&&a.a.createElement(h.default,null),a.a.createElement(l.a,{container:!0,spacing:2,justify:"center",alignItems:"center",className:s?w.mobileControlArea:w.controlArea},a.a.createElement(f.default,null)))}},67:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return m}));var o=r(0),a=r.n(o),n=r(29),i=r(16),s=r(36),l=r(19),c=r(284),u=r(23),d=r(53),p=Object(n.a)((function(e){return{gridColumn:{margin:1,overflowX:"hidden",overflowY:"hidden",alignContent:"start",padding:"3px !important",backgroundColor:e.palette.background.page,borderRadius:"4px 4px 4px 4px",maxWidth:"33%"},mobileGridColumn:{margin:1,overflowX:"hidden",overflowY:"hidden",alignContent:"start",padding:"3px !important",backgroundColor:e.palette.background.page,borderRadius:"4px 4px 4px 4px"},paddedToolbar:{paddingBottom:"env(safe-area-inset-bottom)",marginBottom:"env(safe-area-inset-bottom)"}}}));function m(e){var t=p(),r=Object(o.useContext)(i.LayoutContext),n=r.isMobile,m=r.renderSuspenseModule;return a.a.createElement(s.a,{container:!0,item:!0,spacing:1,key:e.name,xs:n?12:4,className:n?t.mobileGridColumn:t.gridColumn},a.a.createElement(u.a,null,a.a.createElement(d.a,{primary:e.name})),e.page.map((function(t,r){return a.a.createElement(l.default,{wide:!0,key:e.name+r},m(t.module,t.props))})),n&&a.a.createElement(c.a,{className:t.paddedToolbar}))}},68:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return v}));var o=r(6),a=r(0),n=r.n(a),i=r(11),s=r(29),l=r(36),c=r(24),u=r(23),d=r(53),p=r(108),m=r(285),f=r(47),h=Object(s.a)({loginBox:{marginTop:"30%",margin:"auto"},controlArea:{height:"90%",margin:"8px auto",maxWidth:1440,boxSizing:"border-box",overflowY:"auto",width:"100%"},form:{width:"100%"}});function v(e){var t=Object(a.useContext)(i.NetworkContext),r=t.login,s=t.getCookie,v=Object(a.useState)(s("user")),g=Object(o.a)(v,2),y=g[0],j=g[1],b=Object(a.useState)(""),S=Object(o.a)(b,2),O=S[0],w=S[1],C=Object(a.useState)(""),x=Object(o.a)(C,2),E=x[0],k=x[1],L=h();function P(){r(y,O).then((function(e){return function(e){console.log("resulting token",e),e?(k(""),window.location.replace(window.location)):k("Incorrect credentials")}(e)}))}return n.a.createElement(l.a,{container:!0,spacing:2,justify:"center",alignItems:"center",className:L.controlArea},n.a.createElement(c.default,{wide:e.wide,className:L.loginBox},n.a.createElement(u.a,{style:{display:"flex",justifyContent:"center"}},n.a.createElement(f.a,{variant:"h6"},"Sofa Login")),n.a.createElement(u.a,null,n.a.createElement(p.a,{fullWidth:!0,variant:"outlined",onChange:function(e){return j(e.target.value)},value:y,id:"user",label:"User",type:"mail"})),n.a.createElement(u.a,null,n.a.createElement(p.a,{fullWidth:!0,variant:"outlined",onChange:function(e){return w(e.target.value)},onKeyDown:function(e){13===e.keyCode&&P()},id:"password",label:"Password",type:"password",defaultValue:""})),n.a.createElement(u.a,null,n.a.createElement(d.a,{primary:E})),n.a.createElement(u.a,{style:{display:"flex",justifyContent:"center"}},n.a.createElement(m.a,{fullWidth:!0,onClick:function(){return P()}},"Login"))))}},69:function(e,t,r){"use strict";r.r(t),r.d(t,"UserContext",(function(){return i})),r.d(t,"default",(function(){return s}));var o=r(6),a=r(0),n=r.n(a),i=Object(a.createContext)();function s(e){var t=Object(a.useState)(""),r=Object(o.a)(t,2),s=r[0],l=r[1];return n.a.createElement(i.Provider,{value:{userPlayer:s,setUserPlayer:l}},e.children)}},70:function(e,t,r){"use strict";r.r(t),r.d(t,"register",(function(){return a})),r.d(t,"unregister",(function(){return i}));var o=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function a(e){if("serviceWorker"in navigator){if(new URL("/client",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/client","/service-worker.js");o?(!function(e,t){fetch(e).then((function(r){var o=r.headers.get("content-type");404===r.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):n(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):n(t,e)}))}}function n(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var r=e.installing;null!=r&&(r.onstatechange=function(){"installed"===r.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}function i(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},99:function(e,t,r){}},[[270,184,185]]]);
//# sourceMappingURL=main.9c9a8301.chunk.js.map